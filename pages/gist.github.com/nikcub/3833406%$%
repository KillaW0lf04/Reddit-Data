<!DOCTYPE html>
<html class="  ">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# githubog: http://ogp.me/ns/fb/githubog#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Facebook PHP Source Code from August 2007</title>

  <meta content="authenticity_token" name="csrf-param" />
<meta content="67YAeIUJG0iXTzUHrIchipDzhRq84Lbgdphxo1PQ/+SSqUR63nkFN4MsCzxCMZDvlJj2H7w8YqFI9MakNfNnbA==" name="csrf-token" />
  <meta name="viewport" content="width=960">


    <link type="text/plain" rel="author" href="https://github.com/humans.txt" />
    <meta content="gist" name="octolytics-app-id" /><meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="1FDCC856:4888:1204868:53B32156" name="octolytics-dimension-request_id" />
  <link rel="assets" href="https://gist-assets.github.com/">
  

  <link href="https://gist-assets.github.com/assets/application-fd589be2b984cbefe452bd44dea56735.css" media="screen, print" rel="stylesheet" />
  <script src="https://gist-assets.github.com/assets/application-ba55857f025a434cfdcdac65d7c830ff.js"></script>

      <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@github">
  <meta property="og:title" content="nikcub/README.md">
  <meta property="og:type" content="githubog:gist">
  <meta property="og:url" content="https://gist.github.com/nikcub/3833406">
  <meta property="og:image" content="https://avatars1.githubusercontent.com/u/441766?s=140">
  <meta property="og:site_name" content="GitHub Gists">
  <meta property="og:description" content="Facebook PHP Source Code from August 2007 - Gist is a simple way to share snippets of text and code with others.">
  <meta name="description" content="Facebook PHP Source Code from August 2007 - Gist is a simple way to share snippets of text and code with others.">


</head>

<body class=" "
  data-plan="">

  <div id="wrapper">
    

    <div id="header" class="header header-logged-out">
      <div class="container" class="clearfix">
        <a class="header-logo-wordmark" href="https://gist.github.com/"></a>

        <div class="header-actions">
          <a class="button primary" href="https://github.com/signup?return_to=gist">Sign up for a GitHub account</a>
          <a class="button" href="https://gist.github.com/login?return_to=%2Fnikcub%2F3833406" data-skip-pjax>Sign in</a>
        </div>
        <div class="divider-vertical"></div>
        <div class="topsearch">
  <form id="top_search_form" action="/search" data-pjax-remote=push accept-charset="UTF-8">
    <div class="search">
      <input type="text" class="search js-search js-navigation-enable " name="q" placeholder="Search&#x2026;" data-hotkey="/" autocomplete=off autocorrect=off value="" >

    </div>
    <div class="divider-vertical"></div>
  </form>
  <ul class="top-nav">
    <li class="explore"><a href="/discover">All Gists</a></li>
  </ul>
</div>

      </div>
    </div>

    <div class="site-content" id="js-pjax-container" data-pjax-container>
      <div id="js-flash-container" class="site-container js-site-container" data-url="/nikcub/3833406">
  
  

<meta content="true" name="octolytics-dimension-public" /><meta content="3833406" name="octolytics-dimension-gist_id" /><meta content="3833406" name="octolytics-dimension-gist_name" /><meta content="false" name="octolytics-dimension-anonymous" /><meta content="441766" name="octolytics-dimension-owner_id" /><meta content="nikcub" name="octolytics-dimension-owner_login" /><meta content="false" name="octolytics-dimension-forked" />

<div class="pagehead repohead">
  <div class="container">
    <div class="title-actions-bar">
      <ul class="pagehead-actions">


      </ul>
      <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public" >
  <span class="repo-label"><span class="" >public</span></span>
  <span class="mega-octicon octicon-gist" ></span>
  <div class="meta">
    <div class="gist-author">
      <img src="https://avatars1.githubusercontent.com/u/441766?s=140" width="26" height="26">
        <span class="author vcard">
            <span itemprop="title"><a href="/nikcub">nikcub</a></span>
        </span> /
      <strong><a href="/nikcub/3833406" class="js-current-repository">README.md</a></strong>
    </div>
    <div class="gist-timestamp">
        <span class="datetime">Last active <time datetime="2014-06-22T07:49:48Z" is="relative-time">June 22, 2014</time></span>
    </div>
</h1>

    </div>

  </div>
</div>


<div class="container">
  <div class="gist js-gist-container gist-with-sidebar with-full-navigation"
    data-version="97891e880b4ed6bd29d514b983669f611a2523a7"
    data-created="false"
    data-updated="false">

      <div class="gist-sidebar clearfix">
  <div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
    <div class="sunken-menu-contents">
      <ul class="sunken-menu-group">
        <li class="tooltipped tooltipped-w" aria-label="Code">
          <a aria-label="Code" class="sunken-menu-item selected" data-pjax="true" href="/nikcub/3833406">
            <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
            <img alt="" class="mini-loader" height="16" src="https://gist-assets.github.com/assets/spinners/octocat-spinner-32-4ae22f00973f33151cb92eea73616c5c.gif" width="16" />
</a>        </li>

          <li class="tooltipped tooltipped-w" aria-label="Revisions">
            <a aria-label="Revisions" class="sunken-menu-item" data-pjax="true" href="/nikcub/3833406/revisions">
              <span class="octicon octicon-git-commit"></span> <span class="full-word">Revisions</span>
              <img alt="" class="mini-loader" height="16" src="https://gist-assets.github.com/assets/spinners/octocat-spinner-32-4ae22f00973f33151cb92eea73616c5c.gif" width="16" />
              <span class='counter'>2</span>
</a>          </li>

          <li class="tooltipped tooltipped-w" aria-label="Stars">
            <a aria-label="Stars" class="sunken-menu-item" data-pjax="true" href="/nikcub/3833406/stars">
              <span class="octicon octicon-star"></span> <span class="full-word">Stars</span>
              <img alt="" class="mini-loader" height="16" src="https://gist-assets.github.com/assets/spinners/octocat-spinner-32-4ae22f00973f33151cb92eea73616c5c.gif" width="16" />
              <span class='counter'>657</span>
</a>          </li>

          <li class="tooltipped tooltipped-w" aria-label="Forks">
            <a aria-label="Forks" class="sunken-menu-item" data-pjax="true" href="/nikcub/3833406/forks">
              <span class="octicon octicon-git-branch"></span> <span class="full-word">Forks</span>
              <img alt="" class="mini-loader" height="16" src="https://gist-assets.github.com/assets/spinners/octocat-spinner-32-4ae22f00973f33151cb92eea73616c5c.gif" width="16" />
              <span class='counter'>159</span>
</a>          </li>
      </ul>
    </div><!-- /.sunken-menu-group -->
  </div><!-- /.sunken-menu-contents -->

  <div class="only-with-full-nav">

    <div class="embed-url open" style="display: block;">
      <h3><strong>Embed</strong> URL</h3>
      <div class="clone-url-box">
        <input type="text" class="clone js-url-field" value="&lt;script src=&quot;https://gist.github.com/nikcub/3833406.js&quot;&gt;&lt;/script&gt;" readonly="readonly">
        <span class="url-box-clippy">
          <button aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="&lt;script src=&quot;https://gist.github.com/nikcub/3833406.js&quot;&gt;&lt;/script&gt;" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
        </span>
      </div>
    </div>
    <p class="clone-options"></p>

      
<div class="clone-url open" data-protocol-type="http" data-url="https://gist.github.com/3833406.git">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone url-field js-url-field" value="https://gist.github.com/3833406.git" readonly="readonly">
    <span class="url-box-clippy">
      <button aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="https://gist.github.com/3833406.git" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="clone-url " data-protocol-type="ssh" data-url="git@gist.github.com:/3833406.git">
  <h3><strong>SSH</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone url-field js-url-field" value="git@gist.github.com:/3833406.git" readonly="readonly">
    <span class="url-box-clippy">
      <button aria-label="copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="git@gist.github.com:/3833406.git" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>
      or <a href="#" class="js-clone-selector" data-protocol="ssh">SSH</a>.
</p>


    <a aria-label="Download README.md as a zip file" class="minibutton sidebar-button" href="/nikcub/3833406/download" rel="nofollow" title="Download README.md as a zip file">
      <span class="octicon octicon-cloud-download"></span>
      Download Gist
</a>  </div><!-- /.only-with-full-nav -->

</div>


    <div class="gist-content">
          <div class="gist-meta">
            <div class="gist-description">
              <p><div>Facebook PHP Source Code from August 2007</div></p>
            </div>
          </div>

      <div class="files">
            <div id="file-readme-md" class="file ">
    <a href="/nikcub/3833406" class="link-overlay">
    <span class="link">View <strong>README.md</strong> <span class="octicon octicon-arrow-right"></span></span>
  </a>
  <div class="meta clearfix">
    <div class="info file-name">
      <span class="icon">
        <b class="octicon octicon-gist"></b>
      </span>
      <a aria-label="Permalink" href="#file-readme-md" class="tooltipped tooltipped-s permalink"><strong class="file-name js-selectable-text">README.md</strong></a>
    </div>
    <div class="actions">
      <div class="button-group">
        <a aria-label="View Raw"
          href="/nikcub/3833406/raw/570e19894ee9ae146e56f351491dd493007f81e0/README.md"
          data-skip-pjax class="minibutton raw-url js-view-raw">Raw</a>
      </div>
    </div>
  </div>
  <div class="suppressed">
    <a class="js-show-suppressed-file">File suppressed. Click to show.</a>
  </div>
  <div class="blob-wrapper data type-markdown js-blob-data">
    

    <div class="readme context-loader-container context-loader-overlay">
      <article class="markdown-body js-file "
        data-task-list-update-url="https://gist.github.com/nikcub/3833406/file/README.md">
        <p>In August 2007 a hacker found a way to expose the PHP source code on facebook.com. He retrieved two files and then emailed them to me, and I wrote about the issue:</p>

<p><a href="http://techcrunch.com/2007/08/11/facebook-source-code-leaked/" rel="noreferrer">http://techcrunch.com/2007/08/11/facebook-source-code-leaked/</a></p>

<p>It became a big deal:</p>

<p><a href="http://www.techmeme.com/070812/p1#a070812p1" rel="noreferrer">http://www.techmeme.com/070812/p1#a070812p1</a></p>

<p>The two files are index.php (the homepage) and search.php (the search page)</p>

<p>I don't know what ended up happening to the guy who stole the code.</p>

<p>I found these files today while searching for another Facebook related file. Worth preserving as part of Internet history.</p>

<p>-- <a href="http://twitter.com/nikcub" rel="noreferrer">nik</a></p>

      </article>
    </div>



  </div>
</div>

            <div id="file-index-php" class="file ">
    <a href="/nikcub/3833406" class="link-overlay">
    <span class="link">View <strong>README.md</strong> <span class="octicon octicon-arrow-right"></span></span>
  </a>
  <div class="meta clearfix">
    <div class="info file-name">
      <span class="icon">
        <b class="octicon octicon-gist"></b>
      </span>
      <a aria-label="Permalink" href="#file-index-php" class="tooltipped tooltipped-s permalink"><strong class="file-name js-selectable-text">index.php</strong></a>
    </div>
    <div class="actions">
      <div class="button-group">
        <a aria-label="View Raw"
          href="/nikcub/3833406/raw/b603aca15769c84a99e9010e260a2fff2224fd91/index.php"
          data-skip-pjax class="minibutton raw-url js-view-raw">Raw</a>
      </div>
    </div>
  </div>
  <div class="suppressed">
    <a class="js-show-suppressed-file">File suppressed. Click to show.</a>
  </div>
  <div class="blob-wrapper data type-php js-blob-data">
    



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tr>
          <td class="line-numbers">
            <span class="line-number" id="file-index-php-L1" rel="file-index-php-L1">1</span>
            <span class="line-number" id="file-index-php-L2" rel="file-index-php-L2">2</span>
            <span class="line-number" id="file-index-php-L3" rel="file-index-php-L3">3</span>
            <span class="line-number" id="file-index-php-L4" rel="file-index-php-L4">4</span>
            <span class="line-number" id="file-index-php-L5" rel="file-index-php-L5">5</span>
            <span class="line-number" id="file-index-php-L6" rel="file-index-php-L6">6</span>
            <span class="line-number" id="file-index-php-L7" rel="file-index-php-L7">7</span>
            <span class="line-number" id="file-index-php-L8" rel="file-index-php-L8">8</span>
            <span class="line-number" id="file-index-php-L9" rel="file-index-php-L9">9</span>
            <span class="line-number" id="file-index-php-L10" rel="file-index-php-L10">10</span>
            <span class="line-number" id="file-index-php-L11" rel="file-index-php-L11">11</span>
            <span class="line-number" id="file-index-php-L12" rel="file-index-php-L12">12</span>
            <span class="line-number" id="file-index-php-L13" rel="file-index-php-L13">13</span>
            <span class="line-number" id="file-index-php-L14" rel="file-index-php-L14">14</span>
            <span class="line-number" id="file-index-php-L15" rel="file-index-php-L15">15</span>
            <span class="line-number" id="file-index-php-L16" rel="file-index-php-L16">16</span>
            <span class="line-number" id="file-index-php-L17" rel="file-index-php-L17">17</span>
            <span class="line-number" id="file-index-php-L18" rel="file-index-php-L18">18</span>
            <span class="line-number" id="file-index-php-L19" rel="file-index-php-L19">19</span>
            <span class="line-number" id="file-index-php-L20" rel="file-index-php-L20">20</span>
            <span class="line-number" id="file-index-php-L21" rel="file-index-php-L21">21</span>
            <span class="line-number" id="file-index-php-L22" rel="file-index-php-L22">22</span>
            <span class="line-number" id="file-index-php-L23" rel="file-index-php-L23">23</span>
            <span class="line-number" id="file-index-php-L24" rel="file-index-php-L24">24</span>
            <span class="line-number" id="file-index-php-L25" rel="file-index-php-L25">25</span>
            <span class="line-number" id="file-index-php-L26" rel="file-index-php-L26">26</span>
            <span class="line-number" id="file-index-php-L27" rel="file-index-php-L27">27</span>
            <span class="line-number" id="file-index-php-L28" rel="file-index-php-L28">28</span>
            <span class="line-number" id="file-index-php-L29" rel="file-index-php-L29">29</span>
            <span class="line-number" id="file-index-php-L30" rel="file-index-php-L30">30</span>
            <span class="line-number" id="file-index-php-L31" rel="file-index-php-L31">31</span>
            <span class="line-number" id="file-index-php-L32" rel="file-index-php-L32">32</span>
            <span class="line-number" id="file-index-php-L33" rel="file-index-php-L33">33</span>
            <span class="line-number" id="file-index-php-L34" rel="file-index-php-L34">34</span>
            <span class="line-number" id="file-index-php-L35" rel="file-index-php-L35">35</span>
            <span class="line-number" id="file-index-php-L36" rel="file-index-php-L36">36</span>
            <span class="line-number" id="file-index-php-L37" rel="file-index-php-L37">37</span>
            <span class="line-number" id="file-index-php-L38" rel="file-index-php-L38">38</span>
            <span class="line-number" id="file-index-php-L39" rel="file-index-php-L39">39</span>
            <span class="line-number" id="file-index-php-L40" rel="file-index-php-L40">40</span>
            <span class="line-number" id="file-index-php-L41" rel="file-index-php-L41">41</span>
            <span class="line-number" id="file-index-php-L42" rel="file-index-php-L42">42</span>
            <span class="line-number" id="file-index-php-L43" rel="file-index-php-L43">43</span>
            <span class="line-number" id="file-index-php-L44" rel="file-index-php-L44">44</span>
            <span class="line-number" id="file-index-php-L45" rel="file-index-php-L45">45</span>
            <span class="line-number" id="file-index-php-L46" rel="file-index-php-L46">46</span>
            <span class="line-number" id="file-index-php-L47" rel="file-index-php-L47">47</span>
            <span class="line-number" id="file-index-php-L48" rel="file-index-php-L48">48</span>
            <span class="line-number" id="file-index-php-L49" rel="file-index-php-L49">49</span>
            <span class="line-number" id="file-index-php-L50" rel="file-index-php-L50">50</span>
            <span class="line-number" id="file-index-php-L51" rel="file-index-php-L51">51</span>
            <span class="line-number" id="file-index-php-L52" rel="file-index-php-L52">52</span>
            <span class="line-number" id="file-index-php-L53" rel="file-index-php-L53">53</span>
            <span class="line-number" id="file-index-php-L54" rel="file-index-php-L54">54</span>
            <span class="line-number" id="file-index-php-L55" rel="file-index-php-L55">55</span>
            <span class="line-number" id="file-index-php-L56" rel="file-index-php-L56">56</span>
            <span class="line-number" id="file-index-php-L57" rel="file-index-php-L57">57</span>
            <span class="line-number" id="file-index-php-L58" rel="file-index-php-L58">58</span>
            <span class="line-number" id="file-index-php-L59" rel="file-index-php-L59">59</span>
            <span class="line-number" id="file-index-php-L60" rel="file-index-php-L60">60</span>
            <span class="line-number" id="file-index-php-L61" rel="file-index-php-L61">61</span>
            <span class="line-number" id="file-index-php-L62" rel="file-index-php-L62">62</span>
            <span class="line-number" id="file-index-php-L63" rel="file-index-php-L63">63</span>
            <span class="line-number" id="file-index-php-L64" rel="file-index-php-L64">64</span>
            <span class="line-number" id="file-index-php-L65" rel="file-index-php-L65">65</span>
            <span class="line-number" id="file-index-php-L66" rel="file-index-php-L66">66</span>
            <span class="line-number" id="file-index-php-L67" rel="file-index-php-L67">67</span>
            <span class="line-number" id="file-index-php-L68" rel="file-index-php-L68">68</span>
            <span class="line-number" id="file-index-php-L69" rel="file-index-php-L69">69</span>
            <span class="line-number" id="file-index-php-L70" rel="file-index-php-L70">70</span>
            <span class="line-number" id="file-index-php-L71" rel="file-index-php-L71">71</span>
            <span class="line-number" id="file-index-php-L72" rel="file-index-php-L72">72</span>
            <span class="line-number" id="file-index-php-L73" rel="file-index-php-L73">73</span>
            <span class="line-number" id="file-index-php-L74" rel="file-index-php-L74">74</span>
            <span class="line-number" id="file-index-php-L75" rel="file-index-php-L75">75</span>
            <span class="line-number" id="file-index-php-L76" rel="file-index-php-L76">76</span>
            <span class="line-number" id="file-index-php-L77" rel="file-index-php-L77">77</span>
            <span class="line-number" id="file-index-php-L78" rel="file-index-php-L78">78</span>
            <span class="line-number" id="file-index-php-L79" rel="file-index-php-L79">79</span>
            <span class="line-number" id="file-index-php-L80" rel="file-index-php-L80">80</span>
            <span class="line-number" id="file-index-php-L81" rel="file-index-php-L81">81</span>
            <span class="line-number" id="file-index-php-L82" rel="file-index-php-L82">82</span>
            <span class="line-number" id="file-index-php-L83" rel="file-index-php-L83">83</span>
            <span class="line-number" id="file-index-php-L84" rel="file-index-php-L84">84</span>
            <span class="line-number" id="file-index-php-L85" rel="file-index-php-L85">85</span>
            <span class="line-number" id="file-index-php-L86" rel="file-index-php-L86">86</span>
            <span class="line-number" id="file-index-php-L87" rel="file-index-php-L87">87</span>
            <span class="line-number" id="file-index-php-L88" rel="file-index-php-L88">88</span>
            <span class="line-number" id="file-index-php-L89" rel="file-index-php-L89">89</span>
            <span class="line-number" id="file-index-php-L90" rel="file-index-php-L90">90</span>
            <span class="line-number" id="file-index-php-L91" rel="file-index-php-L91">91</span>
            <span class="line-number" id="file-index-php-L92" rel="file-index-php-L92">92</span>
            <span class="line-number" id="file-index-php-L93" rel="file-index-php-L93">93</span>
            <span class="line-number" id="file-index-php-L94" rel="file-index-php-L94">94</span>
            <span class="line-number" id="file-index-php-L95" rel="file-index-php-L95">95</span>
            <span class="line-number" id="file-index-php-L96" rel="file-index-php-L96">96</span>
            <span class="line-number" id="file-index-php-L97" rel="file-index-php-L97">97</span>
            <span class="line-number" id="file-index-php-L98" rel="file-index-php-L98">98</span>
            <span class="line-number" id="file-index-php-L99" rel="file-index-php-L99">99</span>
            <span class="line-number" id="file-index-php-L100" rel="file-index-php-L100">100</span>
            <span class="line-number" id="file-index-php-L101" rel="file-index-php-L101">101</span>
            <span class="line-number" id="file-index-php-L102" rel="file-index-php-L102">102</span>
            <span class="line-number" id="file-index-php-L103" rel="file-index-php-L103">103</span>
            <span class="line-number" id="file-index-php-L104" rel="file-index-php-L104">104</span>
            <span class="line-number" id="file-index-php-L105" rel="file-index-php-L105">105</span>
            <span class="line-number" id="file-index-php-L106" rel="file-index-php-L106">106</span>
            <span class="line-number" id="file-index-php-L107" rel="file-index-php-L107">107</span>
            <span class="line-number" id="file-index-php-L108" rel="file-index-php-L108">108</span>
            <span class="line-number" id="file-index-php-L109" rel="file-index-php-L109">109</span>
            <span class="line-number" id="file-index-php-L110" rel="file-index-php-L110">110</span>
            <span class="line-number" id="file-index-php-L111" rel="file-index-php-L111">111</span>
            <span class="line-number" id="file-index-php-L112" rel="file-index-php-L112">112</span>
            <span class="line-number" id="file-index-php-L113" rel="file-index-php-L113">113</span>
            <span class="line-number" id="file-index-php-L114" rel="file-index-php-L114">114</span>
            <span class="line-number" id="file-index-php-L115" rel="file-index-php-L115">115</span>
            <span class="line-number" id="file-index-php-L116" rel="file-index-php-L116">116</span>
            <span class="line-number" id="file-index-php-L117" rel="file-index-php-L117">117</span>
            <span class="line-number" id="file-index-php-L118" rel="file-index-php-L118">118</span>
            <span class="line-number" id="file-index-php-L119" rel="file-index-php-L119">119</span>
            <span class="line-number" id="file-index-php-L120" rel="file-index-php-L120">120</span>
            <span class="line-number" id="file-index-php-L121" rel="file-index-php-L121">121</span>
            <span class="line-number" id="file-index-php-L122" rel="file-index-php-L122">122</span>
            <span class="line-number" id="file-index-php-L123" rel="file-index-php-L123">123</span>
            <span class="line-number" id="file-index-php-L124" rel="file-index-php-L124">124</span>
            <span class="line-number" id="file-index-php-L125" rel="file-index-php-L125">125</span>
            <span class="line-number" id="file-index-php-L126" rel="file-index-php-L126">126</span>
            <span class="line-number" id="file-index-php-L127" rel="file-index-php-L127">127</span>
            <span class="line-number" id="file-index-php-L128" rel="file-index-php-L128">128</span>
            <span class="line-number" id="file-index-php-L129" rel="file-index-php-L129">129</span>
            <span class="line-number" id="file-index-php-L130" rel="file-index-php-L130">130</span>
            <span class="line-number" id="file-index-php-L131" rel="file-index-php-L131">131</span>
            <span class="line-number" id="file-index-php-L132" rel="file-index-php-L132">132</span>
            <span class="line-number" id="file-index-php-L133" rel="file-index-php-L133">133</span>
            <span class="line-number" id="file-index-php-L134" rel="file-index-php-L134">134</span>
            <span class="line-number" id="file-index-php-L135" rel="file-index-php-L135">135</span>
            <span class="line-number" id="file-index-php-L136" rel="file-index-php-L136">136</span>
            <span class="line-number" id="file-index-php-L137" rel="file-index-php-L137">137</span>
            <span class="line-number" id="file-index-php-L138" rel="file-index-php-L138">138</span>
            <span class="line-number" id="file-index-php-L139" rel="file-index-php-L139">139</span>
            <span class="line-number" id="file-index-php-L140" rel="file-index-php-L140">140</span>
            <span class="line-number" id="file-index-php-L141" rel="file-index-php-L141">141</span>
            <span class="line-number" id="file-index-php-L142" rel="file-index-php-L142">142</span>
            <span class="line-number" id="file-index-php-L143" rel="file-index-php-L143">143</span>
            <span class="line-number" id="file-index-php-L144" rel="file-index-php-L144">144</span>
            <span class="line-number" id="file-index-php-L145" rel="file-index-php-L145">145</span>
            <span class="line-number" id="file-index-php-L146" rel="file-index-php-L146">146</span>
            <span class="line-number" id="file-index-php-L147" rel="file-index-php-L147">147</span>
            <span class="line-number" id="file-index-php-L148" rel="file-index-php-L148">148</span>
            <span class="line-number" id="file-index-php-L149" rel="file-index-php-L149">149</span>
            <span class="line-number" id="file-index-php-L150" rel="file-index-php-L150">150</span>
            <span class="line-number" id="file-index-php-L151" rel="file-index-php-L151">151</span>
            <span class="line-number" id="file-index-php-L152" rel="file-index-php-L152">152</span>
            <span class="line-number" id="file-index-php-L153" rel="file-index-php-L153">153</span>
            <span class="line-number" id="file-index-php-L154" rel="file-index-php-L154">154</span>
            <span class="line-number" id="file-index-php-L155" rel="file-index-php-L155">155</span>
            <span class="line-number" id="file-index-php-L156" rel="file-index-php-L156">156</span>
            <span class="line-number" id="file-index-php-L157" rel="file-index-php-L157">157</span>
            <span class="line-number" id="file-index-php-L158" rel="file-index-php-L158">158</span>
            <span class="line-number" id="file-index-php-L159" rel="file-index-php-L159">159</span>
            <span class="line-number" id="file-index-php-L160" rel="file-index-php-L160">160</span>
            <span class="line-number" id="file-index-php-L161" rel="file-index-php-L161">161</span>
            <span class="line-number" id="file-index-php-L162" rel="file-index-php-L162">162</span>
            <span class="line-number" id="file-index-php-L163" rel="file-index-php-L163">163</span>
            <span class="line-number" id="file-index-php-L164" rel="file-index-php-L164">164</span>
            <span class="line-number" id="file-index-php-L165" rel="file-index-php-L165">165</span>
            <span class="line-number" id="file-index-php-L166" rel="file-index-php-L166">166</span>
            <span class="line-number" id="file-index-php-L167" rel="file-index-php-L167">167</span>
            <span class="line-number" id="file-index-php-L168" rel="file-index-php-L168">168</span>
            <span class="line-number" id="file-index-php-L169" rel="file-index-php-L169">169</span>
            <span class="line-number" id="file-index-php-L170" rel="file-index-php-L170">170</span>
            <span class="line-number" id="file-index-php-L171" rel="file-index-php-L171">171</span>
            <span class="line-number" id="file-index-php-L172" rel="file-index-php-L172">172</span>
            <span class="line-number" id="file-index-php-L173" rel="file-index-php-L173">173</span>
            <span class="line-number" id="file-index-php-L174" rel="file-index-php-L174">174</span>
            <span class="line-number" id="file-index-php-L175" rel="file-index-php-L175">175</span>
            <span class="line-number" id="file-index-php-L176" rel="file-index-php-L176">176</span>
            <span class="line-number" id="file-index-php-L177" rel="file-index-php-L177">177</span>
            <span class="line-number" id="file-index-php-L178" rel="file-index-php-L178">178</span>
            <span class="line-number" id="file-index-php-L179" rel="file-index-php-L179">179</span>
            <span class="line-number" id="file-index-php-L180" rel="file-index-php-L180">180</span>
            <span class="line-number" id="file-index-php-L181" rel="file-index-php-L181">181</span>
            <span class="line-number" id="file-index-php-L182" rel="file-index-php-L182">182</span>
            <span class="line-number" id="file-index-php-L183" rel="file-index-php-L183">183</span>
            <span class="line-number" id="file-index-php-L184" rel="file-index-php-L184">184</span>
            <span class="line-number" id="file-index-php-L185" rel="file-index-php-L185">185</span>
            <span class="line-number" id="file-index-php-L186" rel="file-index-php-L186">186</span>
            <span class="line-number" id="file-index-php-L187" rel="file-index-php-L187">187</span>
            <span class="line-number" id="file-index-php-L188" rel="file-index-php-L188">188</span>
            <span class="line-number" id="file-index-php-L189" rel="file-index-php-L189">189</span>
            <span class="line-number" id="file-index-php-L190" rel="file-index-php-L190">190</span>
            <span class="line-number" id="file-index-php-L191" rel="file-index-php-L191">191</span>
            <span class="line-number" id="file-index-php-L192" rel="file-index-php-L192">192</span>
            <span class="line-number" id="file-index-php-L193" rel="file-index-php-L193">193</span>
            <span class="line-number" id="file-index-php-L194" rel="file-index-php-L194">194</span>
            <span class="line-number" id="file-index-php-L195" rel="file-index-php-L195">195</span>
            <span class="line-number" id="file-index-php-L196" rel="file-index-php-L196">196</span>
            <span class="line-number" id="file-index-php-L197" rel="file-index-php-L197">197</span>
            <span class="line-number" id="file-index-php-L198" rel="file-index-php-L198">198</span>
            <span class="line-number" id="file-index-php-L199" rel="file-index-php-L199">199</span>
            <span class="line-number" id="file-index-php-L200" rel="file-index-php-L200">200</span>
            <span class="line-number" id="file-index-php-L201" rel="file-index-php-L201">201</span>
            <span class="line-number" id="file-index-php-L202" rel="file-index-php-L202">202</span>
            <span class="line-number" id="file-index-php-L203" rel="file-index-php-L203">203</span>
            <span class="line-number" id="file-index-php-L204" rel="file-index-php-L204">204</span>
            <span class="line-number" id="file-index-php-L205" rel="file-index-php-L205">205</span>
            <span class="line-number" id="file-index-php-L206" rel="file-index-php-L206">206</span>
            <span class="line-number" id="file-index-php-L207" rel="file-index-php-L207">207</span>
            <span class="line-number" id="file-index-php-L208" rel="file-index-php-L208">208</span>
            <span class="line-number" id="file-index-php-L209" rel="file-index-php-L209">209</span>
            <span class="line-number" id="file-index-php-L210" rel="file-index-php-L210">210</span>
            <span class="line-number" id="file-index-php-L211" rel="file-index-php-L211">211</span>
            <span class="line-number" id="file-index-php-L212" rel="file-index-php-L212">212</span>
            <span class="line-number" id="file-index-php-L213" rel="file-index-php-L213">213</span>
            <span class="line-number" id="file-index-php-L214" rel="file-index-php-L214">214</span>
            <span class="line-number" id="file-index-php-L215" rel="file-index-php-L215">215</span>
            <span class="line-number" id="file-index-php-L216" rel="file-index-php-L216">216</span>
            <span class="line-number" id="file-index-php-L217" rel="file-index-php-L217">217</span>
            <span class="line-number" id="file-index-php-L218" rel="file-index-php-L218">218</span>
            <span class="line-number" id="file-index-php-L219" rel="file-index-php-L219">219</span>
            <span class="line-number" id="file-index-php-L220" rel="file-index-php-L220">220</span>
            <span class="line-number" id="file-index-php-L221" rel="file-index-php-L221">221</span>
            <span class="line-number" id="file-index-php-L222" rel="file-index-php-L222">222</span>
            <span class="line-number" id="file-index-php-L223" rel="file-index-php-L223">223</span>
            <span class="line-number" id="file-index-php-L224" rel="file-index-php-L224">224</span>
            <span class="line-number" id="file-index-php-L225" rel="file-index-php-L225">225</span>
            <span class="line-number" id="file-index-php-L226" rel="file-index-php-L226">226</span>
            <span class="line-number" id="file-index-php-L227" rel="file-index-php-L227">227</span>
            <span class="line-number" id="file-index-php-L228" rel="file-index-php-L228">228</span>
            <span class="line-number" id="file-index-php-L229" rel="file-index-php-L229">229</span>
            <span class="line-number" id="file-index-php-L230" rel="file-index-php-L230">230</span>
            <span class="line-number" id="file-index-php-L231" rel="file-index-php-L231">231</span>
            <span class="line-number" id="file-index-php-L232" rel="file-index-php-L232">232</span>
            <span class="line-number" id="file-index-php-L233" rel="file-index-php-L233">233</span>
            <span class="line-number" id="file-index-php-L234" rel="file-index-php-L234">234</span>
            <span class="line-number" id="file-index-php-L235" rel="file-index-php-L235">235</span>
            <span class="line-number" id="file-index-php-L236" rel="file-index-php-L236">236</span>
            <span class="line-number" id="file-index-php-L237" rel="file-index-php-L237">237</span>
            <span class="line-number" id="file-index-php-L238" rel="file-index-php-L238">238</span>
            <span class="line-number" id="file-index-php-L239" rel="file-index-php-L239">239</span>
            <span class="line-number" id="file-index-php-L240" rel="file-index-php-L240">240</span>
            <span class="line-number" id="file-index-php-L241" rel="file-index-php-L241">241</span>
            <span class="line-number" id="file-index-php-L242" rel="file-index-php-L242">242</span>
            <span class="line-number" id="file-index-php-L243" rel="file-index-php-L243">243</span>
            <span class="line-number" id="file-index-php-L244" rel="file-index-php-L244">244</span>
            <span class="line-number" id="file-index-php-L245" rel="file-index-php-L245">245</span>
            <span class="line-number" id="file-index-php-L246" rel="file-index-php-L246">246</span>
            <span class="line-number" id="file-index-php-L247" rel="file-index-php-L247">247</span>
            <span class="line-number" id="file-index-php-L248" rel="file-index-php-L248">248</span>
            <span class="line-number" id="file-index-php-L249" rel="file-index-php-L249">249</span>
            <span class="line-number" id="file-index-php-L250" rel="file-index-php-L250">250</span>
            <span class="line-number" id="file-index-php-L251" rel="file-index-php-L251">251</span>
            <span class="line-number" id="file-index-php-L252" rel="file-index-php-L252">252</span>
            <span class="line-number" id="file-index-php-L253" rel="file-index-php-L253">253</span>
            <span class="line-number" id="file-index-php-L254" rel="file-index-php-L254">254</span>
            <span class="line-number" id="file-index-php-L255" rel="file-index-php-L255">255</span>
            <span class="line-number" id="file-index-php-L256" rel="file-index-php-L256">256</span>
            <span class="line-number" id="file-index-php-L257" rel="file-index-php-L257">257</span>
            <span class="line-number" id="file-index-php-L258" rel="file-index-php-L258">258</span>
            <span class="line-number" id="file-index-php-L259" rel="file-index-php-L259">259</span>
            <span class="line-number" id="file-index-php-L260" rel="file-index-php-L260">260</span>
            <span class="line-number" id="file-index-php-L261" rel="file-index-php-L261">261</span>
            <span class="line-number" id="file-index-php-L262" rel="file-index-php-L262">262</span>
            <span class="line-number" id="file-index-php-L263" rel="file-index-php-L263">263</span>
            <span class="line-number" id="file-index-php-L264" rel="file-index-php-L264">264</span>
            <span class="line-number" id="file-index-php-L265" rel="file-index-php-L265">265</span>
            <span class="line-number" id="file-index-php-L266" rel="file-index-php-L266">266</span>
            <span class="line-number" id="file-index-php-L267" rel="file-index-php-L267">267</span>
            <span class="line-number" id="file-index-php-L268" rel="file-index-php-L268">268</span>
            <span class="line-number" id="file-index-php-L269" rel="file-index-php-L269">269</span>
            <span class="line-number" id="file-index-php-L270" rel="file-index-php-L270">270</span>
            <span class="line-number" id="file-index-php-L271" rel="file-index-php-L271">271</span>
            <span class="line-number" id="file-index-php-L272" rel="file-index-php-L272">272</span>
            <span class="line-number" id="file-index-php-L273" rel="file-index-php-L273">273</span>
            <span class="line-number" id="file-index-php-L274" rel="file-index-php-L274">274</span>
            <span class="line-number" id="file-index-php-L275" rel="file-index-php-L275">275</span>
            <span class="line-number" id="file-index-php-L276" rel="file-index-php-L276">276</span>
            <span class="line-number" id="file-index-php-L277" rel="file-index-php-L277">277</span>
            <span class="line-number" id="file-index-php-L278" rel="file-index-php-L278">278</span>
            <span class="line-number" id="file-index-php-L279" rel="file-index-php-L279">279</span>
            <span class="line-number" id="file-index-php-L280" rel="file-index-php-L280">280</span>
            <span class="line-number" id="file-index-php-L281" rel="file-index-php-L281">281</span>
            <span class="line-number" id="file-index-php-L282" rel="file-index-php-L282">282</span>
            <span class="line-number" id="file-index-php-L283" rel="file-index-php-L283">283</span>
            <span class="line-number" id="file-index-php-L284" rel="file-index-php-L284">284</span>
            <span class="line-number" id="file-index-php-L285" rel="file-index-php-L285">285</span>
            <span class="line-number" id="file-index-php-L286" rel="file-index-php-L286">286</span>
            <span class="line-number" id="file-index-php-L287" rel="file-index-php-L287">287</span>
            <span class="line-number" id="file-index-php-L288" rel="file-index-php-L288">288</span>
            <span class="line-number" id="file-index-php-L289" rel="file-index-php-L289">289</span>
            <span class="line-number" id="file-index-php-L290" rel="file-index-php-L290">290</span>
            <span class="line-number" id="file-index-php-L291" rel="file-index-php-L291">291</span>
            <span class="line-number" id="file-index-php-L292" rel="file-index-php-L292">292</span>
            <span class="line-number" id="file-index-php-L293" rel="file-index-php-L293">293</span>
            <span class="line-number" id="file-index-php-L294" rel="file-index-php-L294">294</span>
            <span class="line-number" id="file-index-php-L295" rel="file-index-php-L295">295</span>
            <span class="line-number" id="file-index-php-L296" rel="file-index-php-L296">296</span>
            <span class="line-number" id="file-index-php-L297" rel="file-index-php-L297">297</span>
            <span class="line-number" id="file-index-php-L298" rel="file-index-php-L298">298</span>
            <span class="line-number" id="file-index-php-L299" rel="file-index-php-L299">299</span>
            <span class="line-number" id="file-index-php-L300" rel="file-index-php-L300">300</span>
            <span class="line-number" id="file-index-php-L301" rel="file-index-php-L301">301</span>
            <span class="line-number" id="file-index-php-L302" rel="file-index-php-L302">302</span>
            <span class="line-number" id="file-index-php-L303" rel="file-index-php-L303">303</span>
            <span class="line-number" id="file-index-php-L304" rel="file-index-php-L304">304</span>
            <span class="line-number" id="file-index-php-L305" rel="file-index-php-L305">305</span>
            <span class="line-number" id="file-index-php-L306" rel="file-index-php-L306">306</span>
            <span class="line-number" id="file-index-php-L307" rel="file-index-php-L307">307</span>
            <span class="line-number" id="file-index-php-L308" rel="file-index-php-L308">308</span>
            <span class="line-number" id="file-index-php-L309" rel="file-index-php-L309">309</span>
            <span class="line-number" id="file-index-php-L310" rel="file-index-php-L310">310</span>
            <span class="line-number" id="file-index-php-L311" rel="file-index-php-L311">311</span>
            <span class="line-number" id="file-index-php-L312" rel="file-index-php-L312">312</span>
            <span class="line-number" id="file-index-php-L313" rel="file-index-php-L313">313</span>
            <span class="line-number" id="file-index-php-L314" rel="file-index-php-L314">314</span>
            <span class="line-number" id="file-index-php-L315" rel="file-index-php-L315">315</span>
            <span class="line-number" id="file-index-php-L316" rel="file-index-php-L316">316</span>
            <span class="line-number" id="file-index-php-L317" rel="file-index-php-L317">317</span>
            <span class="line-number" id="file-index-php-L318" rel="file-index-php-L318">318</span>
            <span class="line-number" id="file-index-php-L319" rel="file-index-php-L319">319</span>
            <span class="line-number" id="file-index-php-L320" rel="file-index-php-L320">320</span>
            <span class="line-number" id="file-index-php-L321" rel="file-index-php-L321">321</span>
            <span class="line-number" id="file-index-php-L322" rel="file-index-php-L322">322</span>
            <span class="line-number" id="file-index-php-L323" rel="file-index-php-L323">323</span>
            <span class="line-number" id="file-index-php-L324" rel="file-index-php-L324">324</span>
            <span class="line-number" id="file-index-php-L325" rel="file-index-php-L325">325</span>
            <span class="line-number" id="file-index-php-L326" rel="file-index-php-L326">326</span>
            <span class="line-number" id="file-index-php-L327" rel="file-index-php-L327">327</span>
            <span class="line-number" id="file-index-php-L328" rel="file-index-php-L328">328</span>
            <span class="line-number" id="file-index-php-L329" rel="file-index-php-L329">329</span>
            <span class="line-number" id="file-index-php-L330" rel="file-index-php-L330">330</span>
            <span class="line-number" id="file-index-php-L331" rel="file-index-php-L331">331</span>
            <span class="line-number" id="file-index-php-L332" rel="file-index-php-L332">332</span>
            <span class="line-number" id="file-index-php-L333" rel="file-index-php-L333">333</span>
            <span class="line-number" id="file-index-php-L334" rel="file-index-php-L334">334</span>
            <span class="line-number" id="file-index-php-L335" rel="file-index-php-L335">335</span>
            <span class="line-number" id="file-index-php-L336" rel="file-index-php-L336">336</span>
            <span class="line-number" id="file-index-php-L337" rel="file-index-php-L337">337</span>
            <span class="line-number" id="file-index-php-L338" rel="file-index-php-L338">338</span>
            <span class="line-number" id="file-index-php-L339" rel="file-index-php-L339">339</span>
            <span class="line-number" id="file-index-php-L340" rel="file-index-php-L340">340</span>
            <span class="line-number" id="file-index-php-L341" rel="file-index-php-L341">341</span>
            <span class="line-number" id="file-index-php-L342" rel="file-index-php-L342">342</span>
            <span class="line-number" id="file-index-php-L343" rel="file-index-php-L343">343</span>
            <span class="line-number" id="file-index-php-L344" rel="file-index-php-L344">344</span>
            <span class="line-number" id="file-index-php-L345" rel="file-index-php-L345">345</span>
            <span class="line-number" id="file-index-php-L346" rel="file-index-php-L346">346</span>
            <span class="line-number" id="file-index-php-L347" rel="file-index-php-L347">347</span>
            <span class="line-number" id="file-index-php-L348" rel="file-index-php-L348">348</span>
            <span class="line-number" id="file-index-php-L349" rel="file-index-php-L349">349</span>
            <span class="line-number" id="file-index-php-L350" rel="file-index-php-L350">350</span>
            <span class="line-number" id="file-index-php-L351" rel="file-index-php-L351">351</span>
            <span class="line-number" id="file-index-php-L352" rel="file-index-php-L352">352</span>
            <span class="line-number" id="file-index-php-L353" rel="file-index-php-L353">353</span>
            <span class="line-number" id="file-index-php-L354" rel="file-index-php-L354">354</span>
            <span class="line-number" id="file-index-php-L355" rel="file-index-php-L355">355</span>
            <span class="line-number" id="file-index-php-L356" rel="file-index-php-L356">356</span>
            <span class="line-number" id="file-index-php-L357" rel="file-index-php-L357">357</span>
            <span class="line-number" id="file-index-php-L358" rel="file-index-php-L358">358</span>
            <span class="line-number" id="file-index-php-L359" rel="file-index-php-L359">359</span>
            <span class="line-number" id="file-index-php-L360" rel="file-index-php-L360">360</span>
            <span class="line-number" id="file-index-php-L361" rel="file-index-php-L361">361</span>
            <span class="line-number" id="file-index-php-L362" rel="file-index-php-L362">362</span>
            <span class="line-number" id="file-index-php-L363" rel="file-index-php-L363">363</span>
            <span class="line-number" id="file-index-php-L364" rel="file-index-php-L364">364</span>
            <span class="line-number" id="file-index-php-L365" rel="file-index-php-L365">365</span>
            <span class="line-number" id="file-index-php-L366" rel="file-index-php-L366">366</span>
            <span class="line-number" id="file-index-php-L367" rel="file-index-php-L367">367</span>
            <span class="line-number" id="file-index-php-L368" rel="file-index-php-L368">368</span>
            <span class="line-number" id="file-index-php-L369" rel="file-index-php-L369">369</span>
            <span class="line-number" id="file-index-php-L370" rel="file-index-php-L370">370</span>
            <span class="line-number" id="file-index-php-L371" rel="file-index-php-L371">371</span>
            <span class="line-number" id="file-index-php-L372" rel="file-index-php-L372">372</span>
            <span class="line-number" id="file-index-php-L373" rel="file-index-php-L373">373</span>
            <span class="line-number" id="file-index-php-L374" rel="file-index-php-L374">374</span>
            <span class="line-number" id="file-index-php-L375" rel="file-index-php-L375">375</span>
            <span class="line-number" id="file-index-php-L376" rel="file-index-php-L376">376</span>
            <span class="line-number" id="file-index-php-L377" rel="file-index-php-L377">377</span>
            <span class="line-number" id="file-index-php-L378" rel="file-index-php-L378">378</span>
            <span class="line-number" id="file-index-php-L379" rel="file-index-php-L379">379</span>
            <span class="line-number" id="file-index-php-L380" rel="file-index-php-L380">380</span>
            <span class="line-number" id="file-index-php-L381" rel="file-index-php-L381">381</span>
            <span class="line-number" id="file-index-php-L382" rel="file-index-php-L382">382</span>
            <span class="line-number" id="file-index-php-L383" rel="file-index-php-L383">383</span>
            <span class="line-number" id="file-index-php-L384" rel="file-index-php-L384">384</span>
            <span class="line-number" id="file-index-php-L385" rel="file-index-php-L385">385</span>
            <span class="line-number" id="file-index-php-L386" rel="file-index-php-L386">386</span>
            <span class="line-number" id="file-index-php-L387" rel="file-index-php-L387">387</span>
            <span class="line-number" id="file-index-php-L388" rel="file-index-php-L388">388</span>
            <span class="line-number" id="file-index-php-L389" rel="file-index-php-L389">389</span>
            <span class="line-number" id="file-index-php-L390" rel="file-index-php-L390">390</span>
            <span class="line-number" id="file-index-php-L391" rel="file-index-php-L391">391</span>
            <span class="line-number" id="file-index-php-L392" rel="file-index-php-L392">392</span>
            <span class="line-number" id="file-index-php-L393" rel="file-index-php-L393">393</span>
            <span class="line-number" id="file-index-php-L394" rel="file-index-php-L394">394</span>
            <span class="line-number" id="file-index-php-L395" rel="file-index-php-L395">395</span>
            <span class="line-number" id="file-index-php-L396" rel="file-index-php-L396">396</span>
            <span class="line-number" id="file-index-php-L397" rel="file-index-php-L397">397</span>
            <span class="line-number" id="file-index-php-L398" rel="file-index-php-L398">398</span>
            <span class="line-number" id="file-index-php-L399" rel="file-index-php-L399">399</span>
            <span class="line-number" id="file-index-php-L400" rel="file-index-php-L400">400</span>
            <span class="line-number" id="file-index-php-L401" rel="file-index-php-L401">401</span>
            <span class="line-number" id="file-index-php-L402" rel="file-index-php-L402">402</span>
            <span class="line-number" id="file-index-php-L403" rel="file-index-php-L403">403</span>
            <span class="line-number" id="file-index-php-L404" rel="file-index-php-L404">404</span>
            <span class="line-number" id="file-index-php-L405" rel="file-index-php-L405">405</span>
            <span class="line-number" id="file-index-php-L406" rel="file-index-php-L406">406</span>
            <span class="line-number" id="file-index-php-L407" rel="file-index-php-L407">407</span>
            <span class="line-number" id="file-index-php-L408" rel="file-index-php-L408">408</span>
            <span class="line-number" id="file-index-php-L409" rel="file-index-php-L409">409</span>
            <span class="line-number" id="file-index-php-L410" rel="file-index-php-L410">410</span>
            <span class="line-number" id="file-index-php-L411" rel="file-index-php-L411">411</span>
            <span class="line-number" id="file-index-php-L412" rel="file-index-php-L412">412</span>
            <span class="line-number" id="file-index-php-L413" rel="file-index-php-L413">413</span>
            <span class="line-number" id="file-index-php-L414" rel="file-index-php-L414">414</span>
            <span class="line-number" id="file-index-php-L415" rel="file-index-php-L415">415</span>
            <span class="line-number" id="file-index-php-L416" rel="file-index-php-L416">416</span>
            <span class="line-number" id="file-index-php-L417" rel="file-index-php-L417">417</span>
            <span class="line-number" id="file-index-php-L418" rel="file-index-php-L418">418</span>
            <span class="line-number" id="file-index-php-L419" rel="file-index-php-L419">419</span>
            <span class="line-number" id="file-index-php-L420" rel="file-index-php-L420">420</span>
            <span class="line-number" id="file-index-php-L421" rel="file-index-php-L421">421</span>
            <span class="line-number" id="file-index-php-L422" rel="file-index-php-L422">422</span>
            <span class="line-number" id="file-index-php-L423" rel="file-index-php-L423">423</span>
            <span class="line-number" id="file-index-php-L424" rel="file-index-php-L424">424</span>
            <span class="line-number" id="file-index-php-L425" rel="file-index-php-L425">425</span>
            <span class="line-number" id="file-index-php-L426" rel="file-index-php-L426">426</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-index-php-LC1"><span class="cp">&lt;?</span> <span class="nx">php</span></div><div class="line" id="file-index-php-LC2">&nbsp;</div><div class="line" id="file-index-php-LC3"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/html/init.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC4"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/home.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC5"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/requests.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC6"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/feed/newsfeed.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC7"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/poke.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC8"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/share.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC9"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/orientation.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC10"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/feed/newsfeed.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC11"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/mobile/register.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC12"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/forms_lib.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC13"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/contact_importer/contact_importer.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC14"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/feed/util.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC15"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/hiding_prefs.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC16"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/abtesting.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC17"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/friends.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC18"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/statusupdates.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC19">&nbsp;</div><div class="line" id="file-index-php-LC20"><span class="c1">// lib/display/feed.php has to be declared here for scope issues.</span></div><div class="line" id="file-index-php-LC21"><span class="c1">// This keeps display/feed.php cleaner and easier to understand.</span></div><div class="line" id="file-index-php-LC22"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/display/feed.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC23"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/monetization_box.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC24">&nbsp;</div><div class="line" id="file-index-php-LC25"><span class="c1">// require login</span></div><div class="line" id="file-index-php-LC26"><span class="nv">$user</span> <span class="o">=</span> <span class="nx">require_login</span><span class="p">();</span></div><div class="line" id="file-index-php-LC27"><span class="nx">print_time</span><span class="p">(</span><span class="s1">&#39;require_login&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC28"><span class="nx">param_request</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;react&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">));</span></div><div class="line" id="file-index-php-LC29">&nbsp;</div><div class="line" id="file-index-php-LC30"><span class="c1">// Check and fix broken emails</span></div><div class="line" id="file-index-php-LC31"><span class="c1">// LN - disabling due to excessive can_see dirties and sets when enabled.</span></div><div class="line" id="file-index-php-LC32"><span class="c1">//check_and_fix_broken_emails($user);</span></div><div class="line" id="file-index-php-LC33"><span class="c1">// migrate AIM screenname from profile to screenname table if needed</span></div><div class="line" id="file-index-php-LC34"><span class="nx">migrate_screenname</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC35">&nbsp;</div><div class="line" id="file-index-php-LC36"><span class="c1">// homepage announcement variables</span></div><div class="line" id="file-index-php-LC37"><span class="nv">$HIDE_ANNOUNCEMENT_BIT</span> <span class="o">=</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;HIDE_ANNOUNCEMENT_BIT&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC38"><span class="nv">$HIDE_INTRO_BITMASK</span> <span class="o">=</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;HIDE_INTRO_BITMASK&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC39">&nbsp;</div><div class="line" id="file-index-php-LC40"><span class="c1">// redirects</span></div><div class="line" id="file-index-php-LC41"><span class="k">if</span> <span class="p">(</span><span class="nx">is_sponsor_user</span><span class="p">())</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC42">  <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;bizhome.php&#39;</span><span class="p">,</span> <span class="s1">&#39;www&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC43"><span class="p">}</span></div><div class="line" id="file-index-php-LC44">&nbsp;</div><div class="line" id="file-index-php-LC45"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/mesg.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC46"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/invitetool.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC47"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/grammar.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC48"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/securityq.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC49"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/events.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC50"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/rooster/stories.php&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC51">&nbsp;</div><div class="line" id="file-index-php-LC52"><span class="c1">// todo: password confirmation redirects here (from html/reset.php),</span></div><div class="line" id="file-index-php-LC53"><span class="c1">// do we want a confirmation message?</span></div><div class="line" id="file-index-php-LC54"><span class="nx">param_get_slashed</span><span class="p">(</span><span class="k">array</span><span class="p">(</span></div><div class="line" id="file-index-php-LC55">  <span class="s1">&#39;feeduser&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="c1">//debug: gets feed for user here</span></div><div class="line" id="file-index-php-LC56">  <span class="s1">&#39;err&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_STRING</span><span class="p">,</span> <span class="c1">// returning from a failed entry on an orientation form</span></div><div class="line" id="file-index-php-LC57">  <span class="s1">&#39;error&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_STRING</span><span class="p">,</span> <span class="c1">// an error can also be here because the profile photo upload code is crazy</span></div><div class="line" id="file-index-php-LC58">  <span class="s1">&#39;ret&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="s1">&#39;success&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="c1">// successful profile picture upload</span></div><div class="line" id="file-index-php-LC59">  <span class="s1">&#39;jn&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="c1">// joined a network for orientation</span></div><div class="line" id="file-index-php-LC60">  <span class="s1">&#39;np&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="c1">// network pending (for work/address network)</span></div><div class="line" id="file-index-php-LC61">  <span class="s1">&#39;me&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_STRING</span><span class="p">,</span> <span class="c1">// mobile error</span></div><div class="line" id="file-index-php-LC62">  <span class="s1">&#39;mr&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="c1">// force mobile reg view</span></div><div class="line" id="file-index-php-LC63">  <span class="s1">&#39;mobile&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="c1">// mobile confirmation code sent</span></div><div class="line" id="file-index-php-LC64">  <span class="s1">&#39;jif&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="c1">// just imported friends</span></div><div class="line" id="file-index-php-LC65">  <span class="s1">&#39;ied&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_STRING</span><span class="p">,</span> <span class="c1">// import email domain</span></div><div class="line" id="file-index-php-LC66">  <span class="s1">&#39;o&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="c1">// first time orientation, passed on confirm</span></div><div class="line" id="file-index-php-LC67">  <span class="s1">&#39;verified&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">));</span> <span class="c1">// verified mobile phone</span></div><div class="line" id="file-index-php-LC68">&nbsp;</div><div class="line" id="file-index-php-LC69"><span class="nx">param_post</span><span class="p">(</span><span class="k">array</span><span class="p">(</span></div><div class="line" id="file-index-php-LC70">  <span class="s1">&#39;leave_orientation&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> </div><div class="line" id="file-index-php-LC71">  <span class="s1">&#39;show_orientation&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="c1">// show an orientation step</span></div><div class="line" id="file-index-php-LC72">  <span class="s1">&#39;hide_orientation&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">));</span> <span class="c1">// skip an orientation step</span></div><div class="line" id="file-index-php-LC73">&nbsp;</div><div class="line" id="file-index-php-LC74"><span class="c1">// homepage actions</span></div><div class="line" id="file-index-php-LC75"><span class="k">if</span> <span class="p">(</span><span class="nv">$req_react</span> <span class="o">&amp;&amp;</span> <span class="nx">validate_expiring_hash</span><span class="p">(</span><span class="nv">$req_react</span><span class="p">,</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;url_md5key&#39;</span><span class="p">]))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC76">  <span class="nv">$show_reactivated_message</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC77"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC78">  <span class="nv">$show_reactivated_message</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></div><div class="line" id="file-index-php-LC79"><span class="p">}</span></div><div class="line" id="file-index-php-LC80"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;show_reactivated_message&#39;</span><span class="p">,</span> <span class="nv">$show_reactivated_message</span><span class="p">);</span></div><div class="line" id="file-index-php-LC81">&nbsp;</div><div class="line" id="file-index-php-LC82">&nbsp;</div><div class="line" id="file-index-php-LC83"><span class="c1">// upcoming events</span></div><div class="line" id="file-index-php-LC84"><span class="nx">events_check_future_events</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span> <span class="c1">// make sure big tunas haven&#39;t moved around</span></div><div class="line" id="file-index-php-LC85"><span class="nv">$upcoming_events</span> <span class="o">=</span> <span class="nx">events_get_imminent_for_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC86">&nbsp;</div><div class="line" id="file-index-php-LC87"><span class="c1">// this is all stuff that can be fetched together!</span></div><div class="line" id="file-index-php-LC88"><span class="nv">$upcoming_events_short</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC89"><span class="nx">obj_multiget_short</span><span class="p">(</span><span class="nb">array_keys</span><span class="p">(</span><span class="nv">$upcoming_events</span><span class="p">),</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$upcoming_events_short</span><span class="p">);</span></div><div class="line" id="file-index-php-LC90"><span class="nv">$new_pokes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></div><div class="line" id="file-index-php-LC91">&nbsp;</div><div class="line" id="file-index-php-LC92"><span class="c1">//only get the next N pokes for display</span></div><div class="line" id="file-index-php-LC93"><span class="c1">//where N is set in the dbget to avoid caching issues</span></div><div class="line" id="file-index-php-LC94"><span class="nv">$poke_stats</span> <span class="o">=</span> <span class="nx">get_num_pokes</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC95"><span class="nx">get_next_pokes</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$new_pokes</span><span class="p">);</span></div><div class="line" id="file-index-php-LC96"><span class="nv">$poke_count</span> <span class="o">=</span> <span class="nv">$poke_stats</span><span class="p">[</span><span class="s1">&#39;unseen&#39;</span><span class="p">];</span></div><div class="line" id="file-index-php-LC97">&nbsp;</div><div class="line" id="file-index-php-LC98"><span class="nv">$targeted_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC99"><span class="nx">home_get_cache_targeted_data</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$targeted_data</span><span class="p">);</span></div><div class="line" id="file-index-php-LC100"><span class="nv">$announcement_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC101"><span class="nx">home_get_cache_announcement_data</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$announcement_data</span><span class="p">);</span></div><div class="line" id="file-index-php-LC102"><span class="nv">$orientation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></div><div class="line" id="file-index-php-LC103"><span class="nx">orientation_get_status</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">);</span></div><div class="line" id="file-index-php-LC104"><span class="nv">$short_profile</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC105"><span class="nx">profile_get_short</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$short_profile</span><span class="p">);</span></div><div class="line" id="file-index-php-LC106">&nbsp;</div><div class="line" id="file-index-php-LC107"><span class="c1">// pure priming stuff</span></div><div class="line" id="file-index-php-LC108"><span class="nx">privacy_get_network_settings</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span></div><div class="line" id="file-index-php-LC109"><span class="nv">$presence</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC110"><span class="nx">mobile_get_presence_data</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$presence</span><span class="p">);</span></div><div class="line" id="file-index-php-LC111"><span class="nx">feedback_get_event_weights</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span></div><div class="line" id="file-index-php-LC112">&nbsp;</div><div class="line" id="file-index-php-LC113"><span class="c1">// Determine if we want to display the feed intro message</span></div><div class="line" id="file-index-php-LC114"><span class="nv">$intro_settings</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></div><div class="line" id="file-index-php-LC115"><span class="nx">user_get_hide_intro_bitmask</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$intro_settings</span><span class="p">);</span></div><div class="line" id="file-index-php-LC116"><span class="nv">$user_friend_finder</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC117"><span class="nx">contact_importer_get_used_friend_finder</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">true</span><span class="p">,</span> <span class="nv">$used_friend_finder</span><span class="p">);</span></div><div class="line" id="file-index-php-LC118"><span class="nv">$all_requests</span> <span class="o">=</span> <span class="nx">requests_get_cache_data</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC119">&nbsp;</div><div class="line" id="file-index-php-LC120"><span class="c1">// FIXME?: is it sub-optimal to call this both in requests_get_cache_data and here?</span></div><div class="line" id="file-index-php-LC121"><span class="nv">$friends_status</span> <span class="o">=</span> <span class="nx">statusupdates_get_recent</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span></div><div class="line" id="file-index-php-LC122"><span class="nx">memcache_dispatch</span><span class="p">();</span> <span class="c1">// populate cache data</span></div><div class="line" id="file-index-php-LC123">&nbsp;</div><div class="line" id="file-index-php-LC124"><span class="c1">// Merman&#39;s Admin profile always links to the Merman&#39;s home</span></div><div class="line" id="file-index-php-LC125"><span class="k">if</span> <span class="p">(</span><span class="nx">user_has_obj_attached</span><span class="p">(</span><span class="nv">$user</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC126">  <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;mhome.php&#39;</span><span class="p">,</span> <span class="s1">&#39;www&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC127"><span class="p">}</span></div><div class="line" id="file-index-php-LC128">&nbsp;</div><div class="line" id="file-index-php-LC129"><span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$upcoming_events</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC130">  <span class="k">foreach</span><span class="p">(</span><span class="nv">$upcoming_events</span> <span class="k">as</span> <span class="nv">$event_id</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$data</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC131">    <span class="nv">$upcoming_events</span><span class="p">[</span><span class="nv">$event_id</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">txt_set</span><span class="p">(</span><span class="nv">$upcoming_events_short</span><span class="p">[</span><span class="nv">$event_id</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]);</span></div><div class="line" id="file-index-php-LC132">  <span class="p">}</span></div><div class="line" id="file-index-php-LC133"><span class="p">}</span></div><div class="line" id="file-index-php-LC134">&nbsp;</div><div class="line" id="file-index-php-LC135"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;upcoming_events&#39;</span><span class="p">,</span> <span class="nv">$upcoming_events</span><span class="p">);</span></div><div class="line" id="file-index-php-LC136">&nbsp;</div><div class="line" id="file-index-php-LC137"><span class="c1">// disabled account actions</span></div><div class="line" id="file-index-php-LC138"><span class="nv">$disabled_warning</span> <span class="o">=</span> <span class="p">((</span><span class="nx">IS_DEV_SITE</span> <span class="o">||</span> <span class="nx">IS_QA_SITE</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">is_disabled_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">));</span></div><div class="line" id="file-index-php-LC139"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;disabled_warning&#39;</span><span class="p">,</span> <span class="nv">$disabled_warning</span><span class="p">);</span></div><div class="line" id="file-index-php-LC140">&nbsp;</div><div class="line" id="file-index-php-LC141"><span class="c1">// new pokes (no more messages here, they are in the top nav!)</span></div><div class="line" id="file-index-php-LC142"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user_is_guest</span><span class="p">(</span><span class="nv">$user</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC143">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;poke_count&#39;</span><span class="p">,</span> <span class="nv">$poke_count</span><span class="p">);</span></div><div class="line" id="file-index-php-LC144">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;pokes&#39;</span><span class="p">,</span> <span class="nv">$new_pokes</span><span class="p">);</span></div><div class="line" id="file-index-php-LC145"><span class="p">}</span></div><div class="line" id="file-index-php-LC146">&nbsp;</div><div class="line" id="file-index-php-LC147"><span class="c1">// get announcement computations</span></div><div class="line" id="file-index-php-LC148"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;targeted_data&#39;</span><span class="p">,</span> <span class="nv">$targeted_data</span><span class="p">);</span></div><div class="line" id="file-index-php-LC149"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;announcement_data&#39;</span><span class="p">,</span> <span class="nv">$announcement_data</span><span class="p">);</span></div><div class="line" id="file-index-php-LC150">&nbsp;</div><div class="line" id="file-index-php-LC151">&nbsp;</div><div class="line" id="file-index-php-LC152"><span class="c1">// birthday notifications</span></div><div class="line" id="file-index-php-LC153"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;birthdays&#39;</span><span class="p">,</span> <span class="nv">$birthdays</span> <span class="o">=</span> <span class="nx">user_get_birthday_notifications</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$short_profile</span><span class="p">));</span></div><div class="line" id="file-index-php-LC154"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;show_birthdays&#39;</span><span class="p">,</span> <span class="nv">$show_birthdays</span> <span class="o">=</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$birthdays</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nv">$orientation</span><span class="p">));</span></div><div class="line" id="file-index-php-LC155">&nbsp;</div><div class="line" id="file-index-php-LC156"><span class="c1">// user info</span></div><div class="line" id="file-index-php-LC157"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;first_name&#39;</span><span class="p">,</span> <span class="nx">user_get_first_name</span><span class="p">(</span><span class="nx">txt_set</span><span class="p">(</span><span class="nv">$short_profile</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">])));</span></div><div class="line" id="file-index-php-LC158"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC159">&nbsp;</div><div class="line" id="file-index-php-LC160"><span class="c1">// decide if there are now any requests to show</span></div><div class="line" id="file-index-php-LC161"><span class="nv">$show_requests</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></div><div class="line" id="file-index-php-LC162"><span class="k">foreach</span><span class="p">(</span><span class="nv">$all_requests</span> <span class="k">as</span> <span class="nv">$request_category</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC163">  <span class="k">if</span> <span class="p">(</span><span class="nv">$request_category</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC164">    <span class="nv">$show_requests</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC165">    <span class="k">break</span><span class="p">;</span></div><div class="line" id="file-index-php-LC166">  <span class="p">}</span></div><div class="line" id="file-index-php-LC167"><span class="p">}</span></div><div class="line" id="file-index-php-LC168"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;all_requests&#39;</span><span class="p">,</span> <span class="nv">$show_requests</span> <span class="o">?</span> <span class="nv">$all_requests</span> <span class="o">:</span> <span class="k">null</span><span class="p">);</span></div><div class="line" id="file-index-php-LC169">&nbsp;</div><div class="line" id="file-index-php-LC170"><span class="nv">$permissions</span> <span class="o">=</span> <span class="nx">privacy_get_reduced_network_permissions</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC171">&nbsp;</div><div class="line" id="file-index-php-LC172"><span class="c1">// status</span></div><div class="line" id="file-index-php-LC173"><span class="nv">$user_info</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;user&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;firstname&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">user_get_first_name</span><span class="p">(</span><span class="nv">$user</span><span class="p">),</span> <span class="s1">&#39;see_all&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="s1">&#39;/statusupdates/?ref=hp&#39;</span><span class="p">,</span> <span class="s1">&#39;profile_pic&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">make_profile_image_src_direct</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;thumb&#39;</span><span class="p">),</span> <span class="s1">&#39;square_pic&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">make_profile_image_src_direct</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;square&#39;</span><span class="p">));</span></div><div class="line" id="file-index-php-LC174">&nbsp;</div><div class="line" id="file-index-php-LC175"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$presence</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$presence</span><span class="p">[</span><span class="s1">&#39;status_time&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nb">time</span><span class="p">()</span> <span class="o">-</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">7</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC176">  <span class="nv">$status</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;message&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">txt_set</span><span class="p">(</span><span class="nv">$presence</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]),</span> <span class="s1">&#39;time&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$presence</span><span class="p">[</span><span class="s1">&#39;status_time&#39;</span><span class="p">],</span> <span class="s1">&#39;source&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$presence</span><span class="p">[</span><span class="s1">&#39;status_source&#39;</span><span class="p">]);</span></div><div class="line" id="file-index-php-LC177"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC178">  <span class="nv">$status</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;message&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;time&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="k">null</span><span class="p">,</span> <span class="s1">&#39;source&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="k">null</span><span class="p">);</span></div><div class="line" id="file-index-php-LC179"><span class="p">}</span></div><div class="line" id="file-index-php-LC180"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;user_info&#39;</span><span class="p">,</span> <span class="nv">$user_info</span><span class="p">);</span></div><div class="line" id="file-index-php-LC181">&nbsp;</div><div class="line" id="file-index-php-LC182"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;show_status&#39;</span><span class="p">,</span> <span class="nv">$show_status</span> <span class="o">=</span> <span class="o">!</span><span class="nv">$orientation</span><span class="p">);</span></div><div class="line" id="file-index-php-LC183"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="nv">$status</span><span class="p">);</span></div><div class="line" id="file-index-php-LC184"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;status_custom&#39;</span><span class="p">,</span> <span class="nv">$status_custom</span> <span class="o">=</span> <span class="nx">mobile_get_status_custom</span><span class="p">(</span><span class="nv">$user</span><span class="p">));</span></div><div class="line" id="file-index-php-LC185"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;friends_status&#39;</span><span class="p">,</span> <span class="nv">$friends_status</span><span class="p">);</span></div><div class="line" id="file-index-php-LC186">&nbsp;</div><div class="line" id="file-index-php-LC187"><span class="c1">// orientation</span></div><div class="line" id="file-index-php-LC188"><span class="k">if</span> <span class="p">(</span><span class="nv">$orientation</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC189">  <span class="k">if</span> <span class="p">(</span><span class="nv">$post_leave_orientation</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC190">    <span class="nx">orientation_update_status</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span></div><div class="line" id="file-index-php-LC191">    <span class="nx">notification_notify_exit_orientation</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC192">    <span class="nx">dirty_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC193">    <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;home.php&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC194">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">orientation_eligible_exit</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;uid&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$user</span><span class="p">))</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC195">    <span class="nx">orientation_update_status</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span></div><div class="line" id="file-index-php-LC196">    <span class="nx">notification_notify_exit_orientation</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC197">    <span class="nx">dirty_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC198">    <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;home.php&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC199">  <span class="p">}</span></div><div class="line" id="file-index-php-LC200"><span class="p">}</span></div><div class="line" id="file-index-php-LC201">&nbsp;</div><div class="line" id="file-index-php-LC202"><span class="c1">// timezone - outside of stealth, update user&#39;s timezone if necessary</span></div><div class="line" id="file-index-php-LC203"><span class="nv">$set_time</span> <span class="o">=</span> <span class="o">!</span><span class="nx">user_is_alpha</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;stealth&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC204"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;timezone_autoset&#39;</span><span class="p">,</span> <span class="nv">$set_time</span><span class="p">);</span></div><div class="line" id="file-index-php-LC205"><span class="k">if</span> <span class="p">(</span><span class="nv">$set_time</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC206">  <span class="nv">$daylight_savings</span> <span class="o">=</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;DAYLIGHT_SAVINGS_ON&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC207">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;timezone&#39;</span><span class="p">,</span> <span class="nv">$short_profile</span><span class="p">[</span><span class="s1">&#39;timezone&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="nv">$daylight_savings</span> <span class="o">?</span> <span class="mi">4</span> <span class="o">:</span> <span class="mi">5</span><span class="p">));</span></div><div class="line" id="file-index-php-LC208"><span class="p">}</span></div><div class="line" id="file-index-php-LC209">&nbsp;</div><div class="line" id="file-index-php-LC210"><span class="c1">// set next step if we can</span></div><div class="line" id="file-index-php-LC211"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$orientation</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC212">  <span class="nx">user_set_next_step</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$short_profile</span><span class="p">);</span></div><div class="line" id="file-index-php-LC213"><span class="p">}</span></div><div class="line" id="file-index-php-LC214">&nbsp;</div><div class="line" id="file-index-php-LC215"><span class="c1">// note: don&#39;t make this an else with the above statement, because then no news feed stories will be fetched if they&#39;re exiting orientation</span></div><div class="line" id="file-index-php-LC216"><span class="k">if</span> <span class="p">(</span><span class="nv">$orientation</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC217">  <span class="nb">extract</span><span class="p">(</span><span class="nx">orientation_get_const</span><span class="p">());</span></div><div class="line" id="file-index-php-LC218">&nbsp;</div><div class="line" id="file-index-php-LC219">  <span class="nx">require_js</span><span class="p">(</span><span class="s1">&#39;js/dynamic_dialog.js&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC220">  <span class="nx">require_js</span><span class="p">(</span><span class="s1">&#39;js/suggest.js&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC221">  <span class="nx">require_js</span><span class="p">(</span><span class="s1">&#39;js/typeahead_ns.js&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC222">  <span class="nx">require_js</span><span class="p">(</span><span class="s1">&#39;js/suggest.js&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC223">  <span class="nx">require_js</span><span class="p">(</span><span class="s1">&#39;js/editregion.js&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC224">  <span class="nx">require_js</span><span class="p">(</span><span class="s1">&#39;js/orientation.js&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC225">  <span class="nx">require_css</span><span class="p">(</span><span class="s1">&#39;css/typeahead.css&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC226">  <span class="nx">require_css</span><span class="p">(</span><span class="s1">&#39;css/editor.css&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC227">&nbsp;</div><div class="line" id="file-index-php-LC228">  <span class="k">if</span> <span class="p">(</span><span class="nv">$post_hide_orientation</span> <span class="o">&amp;&amp;</span> <span class="nv">$post_hide_orientation</span> <span class="o">&lt;=</span> <span class="nv">$ORIENTATION_MAX</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC229">    <span class="nv">$orientation</span><span class="p">[</span><span class="s1">&#39;orientation_bitmask&#39;</span><span class="p">]</span> <span class="o">|=</span> <span class="p">(</span><span class="nv">$post_hide_orientation</span> <span class="o">*</span> <span class="nv">$ORIENTATION_SKIPPED_MODIFIER</span><span class="p">);</span></div><div class="line" id="file-index-php-LC230">    <span class="nx">orientation_update_status</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">);</span></div><div class="line" id="file-index-php-LC231">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$post_show_orientation</span> <span class="o">&amp;&amp;</span> <span class="nv">$post_show_orientation</span> <span class="o">&lt;=</span> <span class="nv">$ORIENTATION_MAX</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC232">    <span class="nv">$orientation</span><span class="p">[</span><span class="s1">&#39;orientation_bitmask&#39;</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="o">~</span> <span class="p">(</span><span class="nv">$post_show_orientation</span> <span class="o">*</span> <span class="nv">$ORIENTATION_SKIPPED_MODIFIER</span><span class="p">);</span></div><div class="line" id="file-index-php-LC233">    <span class="nx">orientation_update_status</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">);</span></div><div class="line" id="file-index-php-LC234">  <span class="p">}</span></div><div class="line" id="file-index-php-LC235">&nbsp;</div><div class="line" id="file-index-php-LC236">  <span class="nv">$stories</span> <span class="o">=</span> <span class="nx">orientation_get_stories</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">);</span></div><div class="line" id="file-index-php-LC237">  <span class="k">switch</span> <span class="p">(</span><span class="nv">$get_err</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC238">  <span class="k">case</span> <span class="nv">$ORIENTATION_ERR_COLLEGE</span><span class="o">:</span></div><div class="line" id="file-index-php-LC239">    <span class="nv">$temp</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span> <span class="c1">// the affil_retval_msg needs some parameters won&#39;t be used</span></div><div class="line" id="file-index-php-LC240">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_NETWORK</span><span class="p">][</span><span class="s1">&#39;failed_college&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">affil_retval_msg</span><span class="p">(</span><span class="nv">$get_ret</span><span class="p">,</span> <span class="nv">$temp</span><span class="p">,</span> <span class="nv">$temp</span><span class="p">);</span></div><div class="line" id="file-index-php-LC241">    <span class="k">break</span><span class="p">;</span></div><div class="line" id="file-index-php-LC242">  <span class="k">case</span> <span class="nv">$ORIENTATION_ERR_CORP</span><span class="o">:</span></div><div class="line" id="file-index-php-LC243">    <span class="nv">$temp</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC244">    <span class="c1">// We special case the network not recognized error here, because affil_retval_msg is retarded.</span></div><div class="line" id="file-index-php-LC245">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_NETWORK</span><span class="p">][</span><span class="s1">&#39;failed_corp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$get_ret</span> <span class="o">==</span> <span class="mi">70</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;The email you entered did not match any of our supported networks. &#39;</span><span class="o">.</span><span class="s1">&#39;Click here to see our supported list. &#39;</span><span class="o">.</span><span class="s1">&#39;Go here to suggest your network for the future.&#39;</span> <span class="o">:</span> <span class="nx">affil_retval_msg</span><span class="p">(</span><span class="nv">$get_ret</span><span class="p">,</span> <span class="nv">$temp</span><span class="p">,</span> <span class="nv">$temp</span><span class="p">);</span></div><div class="line" id="file-index-php-LC246">    <span class="k">break</span><span class="p">;</span></div><div class="line" id="file-index-php-LC247">  <span class="p">}</span></div><div class="line" id="file-index-php-LC248">&nbsp;</div><div class="line" id="file-index-php-LC249">  <span class="c1">// photo upload error</span></div><div class="line" id="file-index-php-LC250">  <span class="k">if</span> <span class="p">(</span><span class="nv">$get_error</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC251">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_PROFILE</span><span class="p">]][</span><span class="s1">&#39;upload_error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">pic_get_error_text</span><span class="p">(</span><span class="nv">$get_error</span><span class="p">);</span></div><div class="line" id="file-index-php-LC252">  <span class="p">}</span></div><div class="line" id="file-index-php-LC253">  <span class="c1">// photo upload success</span></div><div class="line" id="file-index-php-LC254">  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$get_success</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC255">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_PROFILE</span><span class="p">]][</span><span class="s1">&#39;uploaded_pic&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC256">    <span class="c1">// join network success</span></div><div class="line" id="file-index-php-LC257">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$get_jn</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC258">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_NETWORK</span><span class="p">]][</span><span class="s1">&#39;joined&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$get_jn</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">network_get_name</span><span class="p">(</span><span class="nv">$get_jn</span><span class="p">));</span></div><div class="line" id="file-index-php-LC259">    <span class="c1">// network join pending</span></div><div class="line" id="file-index-php-LC260">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$get_np</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC261">&nbsp;</div><div class="line" id="file-index-php-LC262">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_NETWORK</span><span class="p">]][</span><span class="s1">&#39;join_pending&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$get_np</span><span class="p">,</span> <span class="s1">&#39;email&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">get_affil_email_conf</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$get_np</span><span class="p">),</span> <span class="s1">&#39;network&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">network_get_name</span><span class="p">(</span><span class="nv">$get_np</span><span class="p">));</span></div><div class="line" id="file-index-php-LC263">    <span class="c1">// just imported friend confirmation</span></div><div class="line" id="file-index-php-LC264">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nv">$get_jif</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC265">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_NETWORK</span><span class="p">]][</span><span class="s1">&#39;just_imported_friends&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC266">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_NETWORK</span><span class="p">]][</span><span class="s1">&#39;domain&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$get_ied</span><span class="p">;</span></div><div class="line" id="file-index-php-LC267">  <span class="p">}</span></div><div class="line" id="file-index-php-LC268">&nbsp;</div><div class="line" id="file-index-php-LC269">  <span class="c1">// Mobile web API params</span></div><div class="line" id="file-index-php-LC270">  <span class="k">if</span> <span class="p">(</span><span class="nv">$get_mobile</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC271">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_MOBILE</span><span class="p">]][</span><span class="s1">&#39;sent_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC272">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_MOBILE</span><span class="p">]][</span><span class="s1">&#39;view&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;confirm&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC273">  <span class="p">}</span></div><div class="line" id="file-index-php-LC274">  <span class="k">if</span> <span class="p">(</span><span class="nv">$get_verified</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC275">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_MOBILE</span><span class="p">]][</span><span class="s1">&#39;verified&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC276">  <span class="p">}</span></div><div class="line" id="file-index-php-LC277">  <span class="k">if</span> <span class="p">(</span><span class="nv">$get_me</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC278">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_MOBILE</span><span class="p">]][</span><span class="s1">&#39;error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$get_me</span><span class="p">;</span></div><div class="line" id="file-index-php-LC279">  <span class="p">}</span></div><div class="line" id="file-index-php-LC280">  <span class="k">if</span> <span class="p">(</span><span class="nv">$get_mr</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC281">    <span class="nv">$stories</span><span class="p">[</span><span class="nv">$ORIENTATION_ORDER</span><span class="p">[</span><span class="nv">$ORIENTATION_MOBILE</span><span class="p">]][</span><span class="s1">&#39;view&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;register&#39;</span><span class="p">;</span></div><div class="line" id="file-index-php-LC282">  <span class="p">}</span></div><div class="line" id="file-index-php-LC283">&nbsp;</div><div class="line" id="file-index-php-LC284">  <span class="k">if</span> <span class="p">(</span><span class="nx">orientation_eligible_exit</span><span class="p">(</span><span class="nv">$orientation</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC285">    <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;orientation_show_exit&#39;</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span></div><div class="line" id="file-index-php-LC286">  <span class="p">}</span></div><div class="line" id="file-index-php-LC287">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;orientation_stories&#39;</span><span class="p">,</span> <span class="nv">$stories</span><span class="p">);</span></div><div class="line" id="file-index-php-LC288">&nbsp;</div><div class="line" id="file-index-php-LC289">  <span class="c1">//if in orientation, we hide all feed intros (all 1&#39;s in bitmask)</span></div><div class="line" id="file-index-php-LC290">  <span class="nv">$intro_settings</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span></div><div class="line" id="file-index-php-LC291">&nbsp;</div><div class="line" id="file-index-php-LC292"><span class="p">}</span></div><div class="line" id="file-index-php-LC293"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;orientation&#39;</span><span class="p">,</span> <span class="nv">$orientation</span><span class="p">);</span></div><div class="line" id="file-index-php-LC294">&nbsp;</div><div class="line" id="file-index-php-LC295"><span class="c1">// Rooster Stories</span></div><div class="line" id="file-index-php-LC296"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$orientation</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;ROOSTER_ENABLED&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;ROOSTER_DEV_ENABLED&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC297">  <span class="nv">$rooster_story_count</span> <span class="o">=</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;ROOSTER_STORY_COUNT&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC298">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$rooster_story_count</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC299">    <span class="c1">// Set default if something is wrong with the sitevar</span></div><div class="line" id="file-index-php-LC300">    <span class="nv">$rooster_story_count</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span></div><div class="line" id="file-index-php-LC301">  <span class="p">}</span></div><div class="line" id="file-index-php-LC302">  <span class="nv">$rooster_stories</span> <span class="o">=</span> <span class="nx">rooster_get_stories</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$rooster_story_count</span><span class="p">,</span> <span class="nv">$log_omissions</span> <span class="o">=</span> <span class="k">true</span><span class="p">);</span></div><div class="line" id="file-index-php-LC303">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$rooster_stories</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$rooster_stories</span><span class="p">[</span><span class="s1">&#39;stories&#39;</span><span class="p">]))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC304">    <span class="c1">// Do page-view level logging here</span></div><div class="line" id="file-index-php-LC305">    <span class="k">foreach</span><span class="p">(</span><span class="nv">$rooster_stories</span><span class="p">[</span><span class="s1">&#39;stories&#39;</span><span class="p">]</span> <span class="k">as</span> <span class="nv">$story</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC306">      <span class="nx">rooster_log_action</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$story</span><span class="p">,</span> <span class="nx">ROOSTER_LOG_ACTION_VIEW</span><span class="p">);</span></div><div class="line" id="file-index-php-LC307">    <span class="p">}</span></div><div class="line" id="file-index-php-LC308">    <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;rooster_stories&#39;</span><span class="p">,</span> <span class="nv">$rooster_stories</span><span class="p">);</span></div><div class="line" id="file-index-php-LC309">  <span class="p">}</span></div><div class="line" id="file-index-php-LC310"><span class="p">}</span></div><div class="line" id="file-index-php-LC311">&nbsp;</div><div class="line" id="file-index-php-LC312"><span class="c1">// set the variables for the home announcement code</span></div><div class="line" id="file-index-php-LC313"><span class="nv">$hide_announcement_tpl</span> <span class="o">=</span> <span class="p">(</span><span class="nv">$intro_settings</span> <span class="o">|</span> <span class="nv">$HIDE_INTRO_BITMASK</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nv">$HIDE_ANNOUNCEMENT_BIT</span><span class="p">;</span></div><div class="line" id="file-index-php-LC314"><span class="c1">// if on qa/dev site, special rules</span></div><div class="line" id="file-index-php-LC315"><span class="nv">$HIDE_INTRO_ON_DEV</span> <span class="o">=</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;HIDE_INTRO_ON_DEV&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC316"><span class="k">if</span> <span class="p">((</span><span class="nx">IS_QA_SITE</span> <span class="o">||</span> <span class="nx">IS_DEV_SITE</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nv">$HIDE_INTRO_ON_DEV</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC317">  <span class="nv">$hide_announcement_tpl</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></div><div class="line" id="file-index-php-LC318"><span class="p">}</span></div><div class="line" id="file-index-php-LC319">&nbsp;</div><div class="line" id="file-index-php-LC320"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;hide_announcement&#39;</span><span class="p">,</span> <span class="nv">$hide_announcement_tpl</span><span class="p">);</span></div><div class="line" id="file-index-php-LC321"><span class="k">if</span> <span class="p">(</span><span class="nv">$is_candidate</span> <span class="o">=</span> <span class="nx">is_candidate_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC322">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;hide_announcement&#39;</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span></div><div class="line" id="file-index-php-LC323"><span class="p">}</span></div><div class="line" id="file-index-php-LC324"><span class="nv">$home_announcement_tpl</span> <span class="o">=</span> <span class="o">!</span><span class="nv">$hide_announcement_tpl</span> <span class="o">||</span> <span class="nv">$is_candidate</span> <span class="o">?</span> <span class="nx">home_get_announcement_info</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span></div><div class="line" id="file-index-php-LC325"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;home_announcement&#39;</span><span class="p">,</span> <span class="nv">$home_announcement_tpl</span><span class="p">);</span></div><div class="line" id="file-index-php-LC326"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;hide_announcement_bit&#39;</span><span class="p">,</span> <span class="nv">$HIDE_ANNOUNCEMENT_BIT</span><span class="p">);</span></div><div class="line" id="file-index-php-LC327">&nbsp;</div><div class="line" id="file-index-php-LC328"><span class="nv">$show_friend_finder</span> <span class="o">=</span> <span class="o">!</span><span class="nv">$orientation</span> <span class="o">&amp;&amp;</span> <span class="nx">contact_importer_enabled</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">user_get_hiding_pref</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;home_friend_finder&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC329"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;show_friend_finder&#39;</span><span class="p">,</span> <span class="nv">$show_friend_finder</span><span class="p">);</span></div><div class="line" id="file-index-php-LC330"><span class="k">if</span> <span class="p">(</span><span class="nv">$show_friend_finder</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">user_get_friend_count</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC331">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;friend_finder_hide_options&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;text&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="s1">&#39;onclick&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="s2">&quot;return clearFriendFinder()&quot;</span><span class="p">));</span></div><div class="line" id="file-index-php-LC332"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC333">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;friend_finder_hide_options&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">);</span></div><div class="line" id="file-index-php-LC334"><span class="p">}</span></div><div class="line" id="file-index-php-LC335">&nbsp;</div><div class="line" id="file-index-php-LC336"><span class="nv">$account_info</span> <span class="o">=</span> <span class="nx">user_get_account_info</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC337"><span class="nv">$account_create_time</span> <span class="o">=</span> <span class="nv">$account_info</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">];</span></div><div class="line" id="file-index-php-LC338">&nbsp;</div><div class="line" id="file-index-php-LC339"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;show_friend_finder_top&#39;</span><span class="p">,</span> <span class="o">!</span><span class="nv">$used_friend_finder</span><span class="p">);</span></div><div class="line" id="file-index-php-LC340">&nbsp;</div><div class="line" id="file-index-php-LC341"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC342">&nbsp;</div><div class="line" id="file-index-php-LC343">&nbsp;</div><div class="line" id="file-index-php-LC344"><span class="c1">// MONETIZATION BOX</span></div><div class="line" id="file-index-php-LC345"><span class="nv">$minimize_monetization_box</span> <span class="o">=</span> <span class="nx">user_get_hiding_pref</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;home_monetization&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC346"><span class="nv">$show_monetization_box</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nv">$orientation</span> <span class="o">&amp;&amp;</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;HOMEPAGE_MONETIZATION_BOX&#39;</span><span class="p">));</span></div><div class="line" id="file-index-php-LC347"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;show_monetization_box&#39;</span><span class="p">,</span> <span class="nv">$show_monetization_box</span><span class="p">);</span></div><div class="line" id="file-index-php-LC348"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;minimize_monetization_box&#39;</span><span class="p">,</span> <span class="nv">$minimize_monetization_box</span><span class="p">);</span></div><div class="line" id="file-index-php-LC349">&nbsp;</div><div class="line" id="file-index-php-LC350"><span class="k">if</span> <span class="p">(</span><span class="nv">$show_monetization_box</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC351">  <span class="nv">$monetization_box_data</span> <span class="o">=</span> <span class="nx">monetization_box_user_get_data</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC352">  <span class="nx">txt_set</span><span class="p">(</span><span class="s1">&#39;monetization_box_data&#39;</span><span class="p">,</span> <span class="nv">$monetization_box_data</span><span class="p">);</span></div><div class="line" id="file-index-php-LC353"><span class="p">}</span></div><div class="line" id="file-index-php-LC354">&nbsp;</div><div class="line" id="file-index-php-LC355">&nbsp;</div><div class="line" id="file-index-php-LC356"><span class="c1">// ORIENTATION</span></div><div class="line" id="file-index-php-LC357"><span class="k">if</span> <span class="p">(</span><span class="nv">$orientation</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC358">  <span class="nv">$network_ids</span> <span class="o">=</span> <span class="nx">id_get_networks</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC359">  <span class="nv">$network_names</span> <span class="o">=</span> <span class="nx">multiget_network_name</span><span class="p">(</span><span class="nv">$network_ids</span><span class="p">);</span></div><div class="line" id="file-index-php-LC360">  <span class="nv">$in_corp_network</span> <span class="o">=</span> <span class="nb">in_array</span><span class="p">(</span><span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;TYPE_CORP&#39;</span><span class="p">],</span> <span class="nb">array_map</span><span class="p">(</span><span class="s1">&#39;extract_network_type&#39;</span><span class="p">,</span> <span class="nv">$network_ids</span><span class="p">));</span></div><div class="line" id="file-index-php-LC361">  <span class="nv">$show_corp_search</span> <span class="o">=</span> <span class="nv">$in_corp_network</span> <span class="o">||</span> <span class="nx">get_age</span><span class="p">(</span><span class="nx">user_get_basic_info_attr</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;birthday&#39;</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="mi">21</span><span class="p">;</span></div><div class="line" id="file-index-php-LC362">  <span class="nv">$pending_hs</span> <span class="o">=</span> <span class="nx">is_hs_pending_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC363">  <span class="nv">$hs_id</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></div><div class="line" id="file-index-php-LC364">  <span class="nv">$hs_name</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></div><div class="line" id="file-index-php-LC365">  <span class="k">if</span> <span class="p">(</span><span class="nv">$pending_hs</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC366">    <span class="k">foreach</span><span class="p">(</span><span class="nx">id_get_pending_networks</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$network</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC367">      <span class="k">if</span> <span class="p">(</span><span class="nx">extract_network_type</span><span class="p">(</span><span class="nv">$network</span><span class="p">[</span><span class="s1">&#39;network_key&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;TYPE_HS&#39;</span><span class="p">])</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC368">        <span class="nv">$hs_id</span> <span class="o">=</span> <span class="nv">$network</span><span class="p">[</span><span class="s1">&#39;network_key&#39;</span><span class="p">];</span></div><div class="line" id="file-index-php-LC369">        <span class="nv">$hs_name</span> <span class="o">=</span> <span class="nx">network_get_name</span><span class="p">(</span><span class="nv">$hs_id</span><span class="p">);</span></div><div class="line" id="file-index-php-LC370">        <span class="k">break</span><span class="p">;</span></div><div class="line" id="file-index-php-LC371">      <span class="p">}</span></div><div class="line" id="file-index-php-LC372">    <span class="p">}</span></div><div class="line" id="file-index-php-LC373">  <span class="p">}</span></div><div class="line" id="file-index-php-LC374">  <span class="c1">//$orientation_people = orientation_get_friend_and_inviter_ids($user);</span></div><div class="line" id="file-index-php-LC375">  <span class="nv">$orientation_people</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;friends&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nx">user_get_all_friends</span><span class="p">(</span><span class="nv">$user</span><span class="p">),</span> <span class="s1">&#39;pending&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nx">user_get_friend_requests</span><span class="p">(</span><span class="nv">$user</span><span class="p">)),</span> <span class="s1">&#39;inviters&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="k">array</span><span class="p">(),</span> <span class="c1">// wc: don&#39;t show inviters for now</span></div><div class="line" id="file-index-php-LC376">  <span class="p">);</span></div><div class="line" id="file-index-php-LC377">  <span class="nv">$orientation_info</span> <span class="o">=</span> <span class="nb">array_merge</span><span class="p">(</span><span class="nv">$orientation_people</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;network_names&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$network_names</span><span class="p">,</span> <span class="s1">&#39;show_corp_search&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$show_corp_search</span><span class="p">,</span> <span class="s1">&#39;pending_hs&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;hs_id&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$hs_id</span><span class="p">,</span> <span class="s1">&#39;hs_name&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$hs_name</span><span class="p">),</span> <span class="s1">&#39;user&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$user</span><span class="p">,</span> <span class="p">));</span></div><div class="line" id="file-index-php-LC378">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;orientation_info&#39;</span><span class="p">,</span> <span class="nv">$orientation_info</span><span class="p">);</span></div><div class="line" id="file-index-php-LC379">&nbsp;</div><div class="line" id="file-index-php-LC380">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;simple_orientation_first_login&#39;</span><span class="p">,</span> <span class="nv">$get_o</span><span class="p">);</span> <span class="c1">// unused right now</span></div><div class="line" id="file-index-php-LC381"><span class="p">}</span></div><div class="line" id="file-index-php-LC382">&nbsp;</div><div class="line" id="file-index-php-LC383">&nbsp;</div><div class="line" id="file-index-php-LC384"><span class="c1">// Roughly determine page length for ads</span></div><div class="line" id="file-index-php-LC385"><span class="c1">// first, try page length using right-hand panel</span></div><div class="line" id="file-index-php-LC386"><span class="nv">$ads_page_length_data</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="c1">// 3 for profile pic + next step</span></div><div class="line" id="file-index-php-LC387"><span class="p">(</span><span class="nv">$show_friend_finder</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nv">$show_status</span> <span class="o">?</span> <span class="p">(</span><span class="nv">$status_custom</span> <span class="o">?</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$friends_status</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nv">$show_monetization_box</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nv">$show_birthdays</span> <span class="o">?</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$birthdays</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$new_pokes</span><span class="p">);</span></div><div class="line" id="file-index-php-LC388">&nbsp;</div><div class="line" id="file-index-php-LC389"><span class="c1">// page length using feed stories</span></div><div class="line" id="file-index-php-LC390"><span class="k">if</span> <span class="p">(</span><span class="nv">$orientation</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC391">  <span class="nv">$ads_page_length_data</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nv">$ads_page_length_data</span><span class="p">,</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$stories</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="p">);</span></div><div class="line" id="file-index-php-LC392"><span class="p">}</span></div><div class="line" id="file-index-php-LC393"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;ads_page_length_data&#39;</span><span class="p">,</span> <span class="nv">$ads_page_length_data</span><span class="p">);</span></div><div class="line" id="file-index-php-LC394">&nbsp;</div><div class="line" id="file-index-php-LC395"><span class="nv">$feed_stories</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></div><div class="line" id="file-index-php-LC396"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$orientation</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// if they&#39;re not in orientation they get other cool stuff</span></div><div class="line" id="file-index-php-LC397">  <span class="c1">// ad_insert: the ad type to try to insert for the user</span></div><div class="line" id="file-index-php-LC398">  <span class="c1">// (0 if we don&#39;t want to try an insert) </span></div><div class="line" id="file-index-php-LC399">  <span class="nv">$ad_insert</span> <span class="o">=</span> <span class="nx">get_site_variable</span><span class="p">(</span><span class="s1">&#39;FEED_ADS_ENABLE_INSERTS&#39;</span><span class="p">);</span></div><div class="line" id="file-index-php-LC400">&nbsp;</div><div class="line" id="file-index-php-LC401">  <span class="nv">$feed_off</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span></div><div class="line" id="file-index-php-LC402">&nbsp;</div><div class="line" id="file-index-php-LC403">  <span class="k">if</span> <span class="p">(</span><span class="nx">check_super</span><span class="p">(</span><span class="nv">$user</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$get_feeduser</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC404">    <span class="nv">$feed_stories</span> <span class="o">=</span> <span class="nx">user_get_displayable_stories</span><span class="p">(</span><span class="nv">$get_feeduser</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$ad_insert</span><span class="p">);</span></div><div class="line" id="file-index-php-LC405">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">can_see</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$user</span><span class="p">,</span> <span class="s1">&#39;feed&#39;</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC406">    <span class="nv">$feed_stories</span> <span class="o">=</span> <span class="nx">user_get_displayable_stories</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$ad_insert</span><span class="p">);</span></div><div class="line" id="file-index-php-LC407">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC408">    <span class="nv">$feed_off</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span></div><div class="line" id="file-index-php-LC409">  <span class="p">}</span></div><div class="line" id="file-index-php-LC410">&nbsp;</div><div class="line" id="file-index-php-LC411">  <span class="c1">// Friend&#39;s Feed Selector - Requires dev.php constant</span></div><div class="line" id="file-index-php-LC412">  <span class="k">if</span> <span class="p">(</span><span class="nx">is_friendfeed_user</span><span class="p">(</span><span class="nv">$user</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-index-php-LC413">    <span class="nv">$friendfeed</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span></div><div class="line" id="file-index-php-LC414">    <span class="nv">$friendfeed</span><span class="p">[</span><span class="s1">&#39;feeduser&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$get_feeduser</span><span class="p">;</span></div><div class="line" id="file-index-php-LC415">    <span class="nv">$friendfeed</span><span class="p">[</span><span class="s1">&#39;feeduser_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">user_get_name</span><span class="p">(</span><span class="nv">$get_feeduser</span><span class="p">);</span></div><div class="line" id="file-index-php-LC416">    <span class="nv">$friendfeed</span><span class="p">[</span><span class="s1">&#39;friends&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">user_get_all_friends</span><span class="p">(</span><span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-index-php-LC417">    <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;friendfeed&#39;</span><span class="p">,</span> <span class="nv">$friendfeed</span><span class="p">);</span></div><div class="line" id="file-index-php-LC418">  <span class="p">}</span></div><div class="line" id="file-index-php-LC419">&nbsp;</div><div class="line" id="file-index-php-LC420">  <span class="nv">$feed_stories</span> <span class="o">=</span> <span class="nx">feed_adjust_timezone</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$feed_stories</span><span class="p">);</span></div><div class="line" id="file-index-php-LC421">&nbsp;</div><div class="line" id="file-index-php-LC422">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;feed_off&#39;</span><span class="p">,</span> <span class="nv">$feed_off</span> <span class="o">?</span> <span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;privacy.php?view=feeds&#39;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">false</span><span class="p">)</span> <span class="o">:</span> <span class="k">false</span><span class="p">);</span></div><div class="line" id="file-index-php-LC423"><span class="p">}</span></div><div class="line" id="file-index-php-LC424"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;feed_stories&#39;</span><span class="p">,</span> <span class="nv">$feed_stories</span><span class="p">);</span></div><div class="line" id="file-index-php-LC425">&nbsp;</div><div class="line" id="file-index-php-LC426"><span class="nx">render_template</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/html/home.phpt&#39;</span><span class="p">);</span></div></pre>
          </td>
        </tr>
      </table>
    </div>

  </div>
</div>

            <div id="file-search-php" class="file ">
    <a href="/nikcub/3833406" class="link-overlay">
    <span class="link">View <strong>README.md</strong> <span class="octicon octicon-arrow-right"></span></span>
  </a>
  <div class="meta clearfix">
    <div class="info file-name">
      <span class="icon">
        <b class="octicon octicon-gist"></b>
      </span>
      <a aria-label="Permalink" href="#file-search-php" class="tooltipped tooltipped-s permalink"><strong class="file-name js-selectable-text">search.php</strong></a>
    </div>
    <div class="actions">
      <div class="button-group">
        <a aria-label="View Raw"
          href="/nikcub/3833406/raw/b800b7c71c8b7b5e14c5d7e2e0070dec99092876/search.php"
          data-skip-pjax class="minibutton raw-url js-view-raw">Raw</a>
      </div>
    </div>
  </div>
  <div class="suppressed">
    <a class="js-show-suppressed-file">File suppressed. Click to show.</a>
  </div>
  <div class="blob-wrapper data type-php js-blob-data">
    



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tr>
          <td class="line-numbers">
            <span class="line-number" id="file-search-php-L1" rel="file-search-php-L1">1</span>
            <span class="line-number" id="file-search-php-L2" rel="file-search-php-L2">2</span>
            <span class="line-number" id="file-search-php-L3" rel="file-search-php-L3">3</span>
            <span class="line-number" id="file-search-php-L4" rel="file-search-php-L4">4</span>
            <span class="line-number" id="file-search-php-L5" rel="file-search-php-L5">5</span>
            <span class="line-number" id="file-search-php-L6" rel="file-search-php-L6">6</span>
            <span class="line-number" id="file-search-php-L7" rel="file-search-php-L7">7</span>
            <span class="line-number" id="file-search-php-L8" rel="file-search-php-L8">8</span>
            <span class="line-number" id="file-search-php-L9" rel="file-search-php-L9">9</span>
            <span class="line-number" id="file-search-php-L10" rel="file-search-php-L10">10</span>
            <span class="line-number" id="file-search-php-L11" rel="file-search-php-L11">11</span>
            <span class="line-number" id="file-search-php-L12" rel="file-search-php-L12">12</span>
            <span class="line-number" id="file-search-php-L13" rel="file-search-php-L13">13</span>
            <span class="line-number" id="file-search-php-L14" rel="file-search-php-L14">14</span>
            <span class="line-number" id="file-search-php-L15" rel="file-search-php-L15">15</span>
            <span class="line-number" id="file-search-php-L16" rel="file-search-php-L16">16</span>
            <span class="line-number" id="file-search-php-L17" rel="file-search-php-L17">17</span>
            <span class="line-number" id="file-search-php-L18" rel="file-search-php-L18">18</span>
            <span class="line-number" id="file-search-php-L19" rel="file-search-php-L19">19</span>
            <span class="line-number" id="file-search-php-L20" rel="file-search-php-L20">20</span>
            <span class="line-number" id="file-search-php-L21" rel="file-search-php-L21">21</span>
            <span class="line-number" id="file-search-php-L22" rel="file-search-php-L22">22</span>
            <span class="line-number" id="file-search-php-L23" rel="file-search-php-L23">23</span>
            <span class="line-number" id="file-search-php-L24" rel="file-search-php-L24">24</span>
            <span class="line-number" id="file-search-php-L25" rel="file-search-php-L25">25</span>
            <span class="line-number" id="file-search-php-L26" rel="file-search-php-L26">26</span>
            <span class="line-number" id="file-search-php-L27" rel="file-search-php-L27">27</span>
            <span class="line-number" id="file-search-php-L28" rel="file-search-php-L28">28</span>
            <span class="line-number" id="file-search-php-L29" rel="file-search-php-L29">29</span>
            <span class="line-number" id="file-search-php-L30" rel="file-search-php-L30">30</span>
            <span class="line-number" id="file-search-php-L31" rel="file-search-php-L31">31</span>
            <span class="line-number" id="file-search-php-L32" rel="file-search-php-L32">32</span>
            <span class="line-number" id="file-search-php-L33" rel="file-search-php-L33">33</span>
            <span class="line-number" id="file-search-php-L34" rel="file-search-php-L34">34</span>
            <span class="line-number" id="file-search-php-L35" rel="file-search-php-L35">35</span>
            <span class="line-number" id="file-search-php-L36" rel="file-search-php-L36">36</span>
            <span class="line-number" id="file-search-php-L37" rel="file-search-php-L37">37</span>
            <span class="line-number" id="file-search-php-L38" rel="file-search-php-L38">38</span>
            <span class="line-number" id="file-search-php-L39" rel="file-search-php-L39">39</span>
            <span class="line-number" id="file-search-php-L40" rel="file-search-php-L40">40</span>
            <span class="line-number" id="file-search-php-L41" rel="file-search-php-L41">41</span>
            <span class="line-number" id="file-search-php-L42" rel="file-search-php-L42">42</span>
            <span class="line-number" id="file-search-php-L43" rel="file-search-php-L43">43</span>
            <span class="line-number" id="file-search-php-L44" rel="file-search-php-L44">44</span>
            <span class="line-number" id="file-search-php-L45" rel="file-search-php-L45">45</span>
            <span class="line-number" id="file-search-php-L46" rel="file-search-php-L46">46</span>
            <span class="line-number" id="file-search-php-L47" rel="file-search-php-L47">47</span>
            <span class="line-number" id="file-search-php-L48" rel="file-search-php-L48">48</span>
            <span class="line-number" id="file-search-php-L49" rel="file-search-php-L49">49</span>
            <span class="line-number" id="file-search-php-L50" rel="file-search-php-L50">50</span>
            <span class="line-number" id="file-search-php-L51" rel="file-search-php-L51">51</span>
            <span class="line-number" id="file-search-php-L52" rel="file-search-php-L52">52</span>
            <span class="line-number" id="file-search-php-L53" rel="file-search-php-L53">53</span>
            <span class="line-number" id="file-search-php-L54" rel="file-search-php-L54">54</span>
            <span class="line-number" id="file-search-php-L55" rel="file-search-php-L55">55</span>
            <span class="line-number" id="file-search-php-L56" rel="file-search-php-L56">56</span>
            <span class="line-number" id="file-search-php-L57" rel="file-search-php-L57">57</span>
            <span class="line-number" id="file-search-php-L58" rel="file-search-php-L58">58</span>
            <span class="line-number" id="file-search-php-L59" rel="file-search-php-L59">59</span>
            <span class="line-number" id="file-search-php-L60" rel="file-search-php-L60">60</span>
            <span class="line-number" id="file-search-php-L61" rel="file-search-php-L61">61</span>
            <span class="line-number" id="file-search-php-L62" rel="file-search-php-L62">62</span>
            <span class="line-number" id="file-search-php-L63" rel="file-search-php-L63">63</span>
            <span class="line-number" id="file-search-php-L64" rel="file-search-php-L64">64</span>
            <span class="line-number" id="file-search-php-L65" rel="file-search-php-L65">65</span>
            <span class="line-number" id="file-search-php-L66" rel="file-search-php-L66">66</span>
            <span class="line-number" id="file-search-php-L67" rel="file-search-php-L67">67</span>
            <span class="line-number" id="file-search-php-L68" rel="file-search-php-L68">68</span>
            <span class="line-number" id="file-search-php-L69" rel="file-search-php-L69">69</span>
            <span class="line-number" id="file-search-php-L70" rel="file-search-php-L70">70</span>
            <span class="line-number" id="file-search-php-L71" rel="file-search-php-L71">71</span>
            <span class="line-number" id="file-search-php-L72" rel="file-search-php-L72">72</span>
            <span class="line-number" id="file-search-php-L73" rel="file-search-php-L73">73</span>
            <span class="line-number" id="file-search-php-L74" rel="file-search-php-L74">74</span>
            <span class="line-number" id="file-search-php-L75" rel="file-search-php-L75">75</span>
            <span class="line-number" id="file-search-php-L76" rel="file-search-php-L76">76</span>
            <span class="line-number" id="file-search-php-L77" rel="file-search-php-L77">77</span>
            <span class="line-number" id="file-search-php-L78" rel="file-search-php-L78">78</span>
            <span class="line-number" id="file-search-php-L79" rel="file-search-php-L79">79</span>
            <span class="line-number" id="file-search-php-L80" rel="file-search-php-L80">80</span>
            <span class="line-number" id="file-search-php-L81" rel="file-search-php-L81">81</span>
            <span class="line-number" id="file-search-php-L82" rel="file-search-php-L82">82</span>
            <span class="line-number" id="file-search-php-L83" rel="file-search-php-L83">83</span>
            <span class="line-number" id="file-search-php-L84" rel="file-search-php-L84">84</span>
            <span class="line-number" id="file-search-php-L85" rel="file-search-php-L85">85</span>
            <span class="line-number" id="file-search-php-L86" rel="file-search-php-L86">86</span>
            <span class="line-number" id="file-search-php-L87" rel="file-search-php-L87">87</span>
            <span class="line-number" id="file-search-php-L88" rel="file-search-php-L88">88</span>
            <span class="line-number" id="file-search-php-L89" rel="file-search-php-L89">89</span>
            <span class="line-number" id="file-search-php-L90" rel="file-search-php-L90">90</span>
            <span class="line-number" id="file-search-php-L91" rel="file-search-php-L91">91</span>
            <span class="line-number" id="file-search-php-L92" rel="file-search-php-L92">92</span>
            <span class="line-number" id="file-search-php-L93" rel="file-search-php-L93">93</span>
            <span class="line-number" id="file-search-php-L94" rel="file-search-php-L94">94</span>
            <span class="line-number" id="file-search-php-L95" rel="file-search-php-L95">95</span>
            <span class="line-number" id="file-search-php-L96" rel="file-search-php-L96">96</span>
            <span class="line-number" id="file-search-php-L97" rel="file-search-php-L97">97</span>
            <span class="line-number" id="file-search-php-L98" rel="file-search-php-L98">98</span>
            <span class="line-number" id="file-search-php-L99" rel="file-search-php-L99">99</span>
            <span class="line-number" id="file-search-php-L100" rel="file-search-php-L100">100</span>
            <span class="line-number" id="file-search-php-L101" rel="file-search-php-L101">101</span>
            <span class="line-number" id="file-search-php-L102" rel="file-search-php-L102">102</span>
            <span class="line-number" id="file-search-php-L103" rel="file-search-php-L103">103</span>
            <span class="line-number" id="file-search-php-L104" rel="file-search-php-L104">104</span>
            <span class="line-number" id="file-search-php-L105" rel="file-search-php-L105">105</span>
            <span class="line-number" id="file-search-php-L106" rel="file-search-php-L106">106</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-search-php-LC1"><span class="cp">&lt;?php</span></div><div class="line" id="file-search-php-LC2"><span class="cm">/*</span></div><div class="line" id="file-search-php-LC3"><span class="cm">* @author Mark Slee</span></div><div class="line" id="file-search-php-LC4"><span class="cm">*</span></div><div class="line" id="file-search-php-LC5"><span class="cm">* @package ubersearch</span></div><div class="line" id="file-search-php-LC6"><span class="cm">*/</span></div><div class="line" id="file-search-php-LC7">&nbsp;</div><div class="line" id="file-search-php-LC8"><span class="nb">ini_set</span><span class="p">(</span><span class="s1">&#39;memory_limit&#39;</span><span class="p">,</span> <span class="s1">&#39;100M&#39;</span><span class="p">);</span> <span class="c1">// to be safe we are increasing the memory limit for search</span></div><div class="line" id="file-search-php-LC9">&nbsp;</div><div class="line" id="file-search-php-LC10"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/html/init.php&#39;</span><span class="p">;</span> <span class="c1">// final lib include</span></div><div class="line" id="file-search-php-LC11"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/s.php&#39;</span><span class="p">;</span></div><div class="line" id="file-search-php-LC12"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/browse.php&#39;</span><span class="p">;</span></div><div class="line" id="file-search-php-LC13"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/events.php&#39;</span><span class="p">;</span></div><div class="line" id="file-search-php-LC14"><span class="k">include_once</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/lib/websearch_classifier/websearch_classifier.php&#39;</span><span class="p">;</span></div><div class="line" id="file-search-php-LC15">&nbsp;</div><div class="line" id="file-search-php-LC16"><span class="nx">flag_allow_guest</span><span class="p">();</span></div><div class="line" id="file-search-php-LC17"><span class="nv">$user</span> <span class="o">=</span> <span class="nx">search_require_login</span><span class="p">();</span></div><div class="line" id="file-search-php-LC18">&nbsp;</div><div class="line" id="file-search-php-LC19"><span class="k">if</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC20">  <span class="nv">$arr</span> <span class="o">=</span> <span class="nx">us_flatten_checkboxes</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;ii&#39;</span><span class="p">));</span></div><div class="line" id="file-search-php-LC21">  <span class="nv">$qs</span> <span class="o">=</span> <span class="s1">&#39;?&#39;</span><span class="p">;</span></div><div class="line" id="file-search-php-LC22">  <span class="k">foreach</span><span class="p">(</span><span class="nv">$arr</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC23">    <span class="nv">$qs</span><span class="o">.</span> <span class="o">=</span> <span class="nv">$key</span><span class="o">.</span><span class="s1">&#39;=&#39;</span><span class="o">.</span><span class="nb">urlencode</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;&amp;&#39;</span><span class="p">;</span></div><div class="line" id="file-search-php-LC24">  <span class="p">}</span></div><div class="line" id="file-search-php-LC25">  <span class="nv">$qs</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$qs</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$qs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span></div><div class="line" id="file-search-php-LC26">  <span class="nx">redirect</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_SELF&#39;</span><span class="p">]</span><span class="o">.</span><span class="nv">$qs</span><span class="p">);</span></div><div class="line" id="file-search-php-LC27"><span class="p">}</span></div><div class="line" id="file-search-php-LC28">&nbsp;</div><div class="line" id="file-search-php-LC29"><span class="c1">// If they performed a classmates search, these values are</span></div><div class="line" id="file-search-php-LC30"><span class="c1">// needed to pre-populate dropdowns</span></div><div class="line" id="file-search-php-LC31"><span class="nx">param_get_slashed</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;hy&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_STRING</span><span class="p">,</span> <span class="s1">&#39;hs&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="s1">&#39;adv&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="s1">&#39;events&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="s1">&#39;groups&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="s1">&#39;classmate&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">,</span> <span class="s1">&#39;coworker&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_EXISTS</span><span class="p">));</span></div><div class="line" id="file-search-php-LC32"><span class="nv">$pos</span> <span class="o">=</span> <span class="nb">strpos</span><span class="p">(</span><span class="nv">$get_hy</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">);</span></div><div class="line" id="file-search-php-LC33"><span class="k">if</span> <span class="p">(</span><span class="nv">$pos</span> <span class="o">!==</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC34">  <span class="nv">$hsid</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$get_hy</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$pos</span><span class="p">));</span></div><div class="line" id="file-search-php-LC35">  <span class="nv">$hsyear</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nb">substr</span><span class="p">(</span><span class="nv">$get_hy</span><span class="p">,</span> <span class="nv">$pos</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span></div><div class="line" id="file-search-php-LC36"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC37">  <span class="nv">$hsid</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$get_hs</span><span class="p">);</span></div><div class="line" id="file-search-php-LC38">  <span class="nv">$hsyear</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></div><div class="line" id="file-search-php-LC39"><span class="p">}</span></div><div class="line" id="file-search-php-LC40">&nbsp;</div><div class="line" id="file-search-php-LC41"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;hs_id&#39;</span><span class="p">,</span> <span class="nv">$hsid</span><span class="p">);</span></div><div class="line" id="file-search-php-LC42"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;hs_name&#39;</span><span class="p">,</span> <span class="nx">get_high_school</span><span class="p">(</span><span class="nv">$hsid</span><span class="p">));</span></div><div class="line" id="file-search-php-LC43"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;hs_year&#39;</span><span class="p">,</span> <span class="nv">$hsyear</span><span class="p">);</span></div><div class="line" id="file-search-php-LC44"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;is_advanced_search&#39;</span><span class="p">,</span> <span class="nv">$get_adv</span><span class="p">);</span></div><div class="line" id="file-search-php-LC45"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$user</span><span class="p">);</span></div><div class="line" id="file-search-php-LC46"><span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;count_total&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// pre-set count_total for the sake of ads page length</span></div><div class="line" id="file-search-php-LC47">&nbsp;</div><div class="line" id="file-search-php-LC48"><span class="c1">// Events search calendar data</span></div><div class="line" id="file-search-php-LC49"><span class="nx">param_get</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;k&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_HEX</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_SINT</span><span class="p">));</span></div><div class="line" id="file-search-php-LC50">&nbsp;</div><div class="line" id="file-search-php-LC51"><span class="k">if</span> <span class="p">((</span><span class="nv">$get_k</span> <span class="o">==</span> <span class="nx">search_module</span><span class="o">::</span><span class="na">get_key</span><span class="p">(</span><span class="nx">SEARCH_MOD_EVENT</span><span class="p">,</span> <span class="nx">SEARCH_TYPE_AS</span><span class="p">)))</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC52">&nbsp;</div><div class="line" id="file-search-php-LC53">  <span class="nv">$EVENTS_CAL_DAYS_AHEAD</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span></div><div class="line" id="file-search-php-LC54">  <span class="nv">$events_begin</span> <span class="o">=</span> <span class="nb">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m01&quot;</span><span class="p">);</span> <span class="c1">// first of the month</span></div><div class="line" id="file-search-php-LC55">  <span class="nv">$events_end</span> <span class="o">=</span> <span class="nb">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m%d&quot;</span><span class="p">,</span> <span class="nb">strtotime</span><span class="p">(</span><span class="nb">strftime</span><span class="p">(</span><span class="s2">&quot;%m/01/%Y&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="mi">86400</span> <span class="o">*</span> <span class="nv">$EVENTS_CAL_DAYS_AHEAD</span><span class="p">));</span></div><div class="line" id="file-search-php-LC56">  <span class="nv">$events_params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;dy1&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$events_begin</span><span class="p">,</span> <span class="s1">&#39;dy2&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$events_end</span><span class="p">);</span></div><div class="line" id="file-search-php-LC57">&nbsp;</div><div class="line" id="file-search-php-LC58">  <span class="nx">param_get</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;c1&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$PARAM_INT</span><span class="p">),</span> <span class="s1">&#39;evt_&#39;</span><span class="p">);</span></div><div class="line" id="file-search-php-LC59">  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$evt_c1</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC60">    <span class="nv">$events_params</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$evt_c1</span><span class="p">;</span></div><div class="line" id="file-search-php-LC61">  <span class="p">}</span></div><div class="line" id="file-search-php-LC62">  <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$evt_c2</span><span class="p">))</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC63">    <span class="nv">$events_params</span><span class="p">[</span><span class="s1">&#39;c2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$evt_c2</span><span class="p">;</span></div><div class="line" id="file-search-php-LC64">  <span class="p">}</span></div><div class="line" id="file-search-php-LC65">  <span class="nv">$results</span> <span class="o">=</span> <span class="nx">events_get_calendar</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$get_n</span><span class="p">,</span> <span class="nv">$events_params</span><span class="p">);</span></div><div class="line" id="file-search-php-LC66">  <span class="nx">tpl_set</span><span class="p">(</span><span class="s1">&#39;events_date&#39;</span><span class="p">,</span> <span class="nv">$results</span><span class="p">[</span><span class="s1">&#39;events_date&#39;</span><span class="p">]);</span></div><div class="line" id="file-search-php-LC67"><span class="p">}</span></div><div class="line" id="file-search-php-LC68">&nbsp;</div><div class="line" id="file-search-php-LC69">&nbsp;</div><div class="line" id="file-search-php-LC70">&nbsp;</div><div class="line" id="file-search-php-LC71">&nbsp;</div><div class="line" id="file-search-php-LC72"><span class="c1">// Holy shit, is this the cleanest fucking frontend file you&#39;ve ever seen?!</span></div><div class="line" id="file-search-php-LC73"><span class="nx">ubersearch</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">,</span> <span class="nv">$embedded</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span> <span class="nv">$template</span> <span class="o">=</span> <span class="k">true</span><span class="p">);</span></div><div class="line" id="file-search-php-LC74">&nbsp;</div><div class="line" id="file-search-php-LC75"><span class="c1">// Render it</span></div><div class="line" id="file-search-php-LC76"><span class="nx">render_template</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;PHP_ROOT&#39;</span><span class="p">]</span><span class="o">.</span><span class="s1">&#39;/html/s.phpt&#39;</span><span class="p">);</span></div><div class="line" id="file-search-php-LC77">&nbsp;</div><div class="line" id="file-search-php-LC78"><span class="sd">/**</span></div><div class="line" id="file-search-php-LC79"><span class="sd"> * login function for s.php</span></div><div class="line" id="file-search-php-LC80"><span class="sd"> *</span></div><div class="line" id="file-search-php-LC81"><span class="sd"> * @author Philip Fung</span></div><div class="line" id="file-search-php-LC82"><span class="sd"> */</span></div><div class="line" id="file-search-php-LC83">&nbsp;</div><div class="line" id="file-search-php-LC84"><span class="k">function</span> <span class="nf">search_require_login</span><span class="p">()</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC85">&nbsp;</div><div class="line" id="file-search-php-LC86">  <span class="c1">//check if user is logged in</span></div><div class="line" id="file-search-php-LC87">  <span class="nv">$user</span> <span class="o">=</span> <span class="nx">require_login</span><span class="p">(</span><span class="k">true</span><span class="p">);</span></div><div class="line" id="file-search-php-LC88">&nbsp;</div><div class="line" id="file-search-php-LC89">  <span class="k">if</span><span class="p">(</span><span class="nv">$user</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">is_unregistered</span><span class="p">(</span><span class="nv">$user</span><span class="p">))</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$user</span><span class="p">;</span> <span class="p">}</span></div><div class="line" id="file-search-php-LC90">&nbsp;</div><div class="line" id="file-search-php-LC91">  <span class="c1">// this is an unregistered user</span></div><div class="line" id="file-search-php-LC92">  <span class="nx">param_get</span><span class="p">(</span></div><div class="line" id="file-search-php-LC93">    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;k&#39;</span> <span class="o">=</span> <span class="o">&gt;</span> <span class="nv">$GLOBALS</span><span class="p">[</span><span class="s1">&#39;PARAM_HEX&#39;</span><span class="p">],</span> <span class="c1">// search key (used by rest of ubersearch code)</span></div><div class="line" id="file-search-php-LC94">  <span class="p">));</span></div><div class="line" id="file-search-php-LC95">&nbsp;</div><div class="line" id="file-search-php-LC96">  <span class="k">global</span> <span class="nv">$get_k</span><span class="p">;</span></div><div class="line" id="file-search-php-LC97">  <span class="nv">$search_key</span> <span class="o">=</span> <span class="nv">$get_k</span><span class="p">;</span></div><div class="line" id="file-search-php-LC98">&nbsp;</div><div class="line" id="file-search-php-LC99">  <span class="c1">//Let user see event or group search if criteria are obeyed</span></div><div class="line" id="file-search-php-LC100">  <span class="k">if</span> <span class="p">(</span><span class="nv">$search_key</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">search_module</span><span class="o">::</span><span class="na">get_key_type</span><span class="p">(</span><span class="nv">$search_key</span><span class="p">)</span> <span class="o">==</span> <span class="nx">SEARCH_MOD_EVENT</span> <span class="o">||</span> <span class="nx">search_module</span><span class="o">::</span><span class="na">get_key_type</span><span class="p">(</span><span class="nv">$search_key</span><span class="p">)</span> <span class="o">==</span> <span class="nx">SEARCH_MOD_GROUP</span><span class="p">)</span> <span class="c1">//event or group search</span></div><div class="line" id="file-search-php-LC101">  <span class="p">)</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC102">    <span class="k">return</span> <span class="nv">$user</span><span class="p">;</span></div><div class="line" id="file-search-php-LC103">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></div><div class="line" id="file-search-php-LC104">    <span class="nx">go_home</span><span class="p">();</span></div><div class="line" id="file-search-php-LC105">  <span class="p">}</span></div><div class="line" id="file-search-php-LC106"><span class="p">}</span></div></pre>
          </td>
        </tr>
      </table>
    </div>

  </div>
</div>


        <div class="discussion-timeline js-quote-selection-container">

          <div class="js-discussion">
            
<div class="timeline-comment-wrapper js-comment-container">
  <a href="/visionmedia"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/25254?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927633" class="comment js-comment js-task-list-container" data-body-version="cd911d9900a0e0eb03974ede76b7d048">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/visionmedia">visionmedia</a>
          </strong>

          commented

            <a href="#comment-927633" class="timestamp"><time datetime="2013-10-12T12:08:04Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>ah I remember this :) I happened to refresh the page juuust as it was exposed</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Mparaiso"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/1152066?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927636" class="comment js-comment js-task-list-container" data-body-version="2e93662f57f0dad720d0ceaef4d4437c">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Mparaiso">Mparaiso</a>
          </strong>

          commented

            <a href="#comment-927636" class="timestamp"><time datetime="2013-10-12T12:19:13Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>see, what you can achieve with a bunch of spaghetti code? the hell with these JEE design patterns !!!<br>
PHP for fun and profit.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/sergiotapia"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/686715?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927639" class="comment js-comment js-task-list-container" data-body-version="178f94dff72ca016a4b824823c2d9561">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/sergiotapia">sergiotapia</a>
          </strong>

          commented

            <a href="#comment-927639" class="timestamp"><time datetime="2013-10-12T12:27:12Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Absolutely disgusting! Imagine having to maintain this beast!</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/antonmaju"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/1287278?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927640" class="comment js-comment js-task-list-container" data-body-version="e8f31b7241f2f5fb2f3a7b03243f3011">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/antonmaju">antonmaju</a>
          </strong>

          commented

            <a href="#comment-927640" class="timestamp"><time datetime="2013-10-12T12:27:48Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>My eyes hurt ...</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Hengjie"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/261870?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927641" class="comment js-comment js-task-list-container" data-body-version="3b606b5f04e91f32183e6596db2b9a4a">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Hengjie">Hengjie</a>
          </strong>

          commented

            <a href="#comment-927641" class="timestamp"><time datetime="2013-10-12T12:32:18Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I feel sorry for Facebook engineers</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/michaelmcmillan"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/147197?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927642" class="comment js-comment js-task-list-container" data-body-version="298a9be86b41fcb56fc6b192153c1ee7">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/michaelmcmillan">michaelmcmillan</a>
          </strong>

          commented

            <a href="#comment-927642" class="timestamp"><time datetime="2013-10-12T12:35:56Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>You just gotta love PHP.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/vierbergenlars"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/1194648?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927643" class="comment js-comment js-task-list-container" data-body-version="3b02ac13f584cf96baf79f31fcffa5d9">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/vierbergenlars">vierbergenlars</a>
          </strong>

          commented

            <a href="#comment-927643" class="timestamp"><time datetime="2013-10-12T12:36:35Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Does that even compile? What's going on there <a href="https://gist.github.com/nikcub/3833406#file-search-php-L89" rel="noreferrer">search.php:89</a></p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/scravy"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/295504?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927645" class="comment js-comment js-task-list-container" data-body-version="363469ed7c9a4d4a8c8da741ffe945a0">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/scravy">scravy</a>
          </strong>

          commented

            <a href="#comment-927645" class="timestamp"><time datetime="2013-10-12T12:38:44Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I think that's far from spaghetti code.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/andy-morris"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/469943?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927651" class="comment js-comment js-task-list-container" data-body-version="9ac7495db3dd4cbf128811bb2eebbfe0">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/andy-morris">andy-morris</a>
          </strong>

          commented

            <a href="#comment-927651" class="timestamp"><time datetime="2013-10-12T13:19:29Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@vierbergenlars I think there must have been something before the <code>0</code>, before some messed up reformatting attempt or something; all the <code>=&gt;</code>s have turned into <code>= &gt;</code> as well for some reason.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/davycheung"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/4220987?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927654" class="comment js-comment js-task-list-container" data-body-version="7b6d28759746a5585574e3013764df68">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/davycheung">davycheung</a>
          </strong>

          commented

            <a href="#comment-927654" class="timestamp"><time datetime="2013-10-12T13:29:38Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Honestly it's not that bad. At least they were using templates.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/kdauzickas"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/1934472?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927655" class="comment js-comment js-task-list-container" data-body-version="0e6bc7c41250e8e20408bb4e7e3c333c">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/kdauzickas">kdauzickas</a>
          </strong>

          commented

            <a href="#comment-927655" class="timestamp"><time datetime="2013-10-12T13:31:18Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>To all the 'spaghetti' screamers: you have no context and a bunch of lines that have evolved into what you see to serve billions of requests. Just because you do not understand what and why is something happening you do not get to declare that the code is spaghetti.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/bhaisaab"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/95203?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927656" class="comment js-comment js-task-list-container" data-body-version="914e60acb83c4f3907869b17bd3d7ca4">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/bhaisaab">bhaisaab</a>
          </strong>

          commented

            <a href="#comment-927656" class="timestamp"><time datetime="2013-10-12T13:31:31Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Wasn't that fake?</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/umarana"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/347494?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927657" class="comment js-comment js-task-list-container" data-body-version="64895618f81005f19312199cb3f7ed9e">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/umarana">umarana</a>
          </strong>

          commented

            <a href="#comment-927657" class="timestamp"><time datetime="2013-10-12T13:34:47Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>painful</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Mooty13"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/3109820?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927659" class="comment js-comment js-task-list-container" data-body-version="adc93bdf172073d110b6ccfdbb0b12fb">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Mooty13">Mooty13</a>
          </strong>

          commented

            <a href="#comment-927659" class="timestamp"><time datetime="2013-10-12T13:39:04Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Well it's just 7 years ago PHP, Object was less implemented, now it couldn't be that way.<br>
It's a bit of MVC, that's not so horrible, just a primitive controller (search.php).</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/mbjordan"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/331754?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927663" class="comment js-comment js-task-list-container" data-body-version="8f78b71d2c73ab371e83031305c3bcce">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/mbjordan">mbjordan</a>
          </strong>

          commented

            <a href="#comment-927663" class="timestamp"><time datetime="2013-10-12T14:00:28Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I think its important to note the many syntactical errors throughout the file...</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/mafellows"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/3155690?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927676" class="comment js-comment js-task-list-container" data-body-version="0c7e445cf23c20c3f90958bbcdeaf266">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/mafellows">mafellows</a>
          </strong>

          commented

            <a href="#comment-927676" class="timestamp"><time datetime="2013-10-12T15:08:03Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>// Holy shit, is this the cleanest fucking frontend file you've ever seen?!</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/jeremysmitherman"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/908207?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927688" class="comment js-comment js-task-list-container" data-body-version="2c2672e952a9d8ad8eb6c52cfd17488b">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/jeremysmitherman">jeremysmitherman</a>
          </strong>

          commented

            <a href="#comment-927688" class="timestamp"><time datetime="2013-10-12T15:49:00Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>So many edgy comments here.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/tubbo"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/113026?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927691" class="comment js-comment js-task-list-container" data-body-version="ad95b0b9a2b4486c18d076e911ff2f79">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/tubbo">tubbo</a>
          </strong>

          commented

            <a href="#comment-927691" class="timestamp"><time datetime="2013-10-12T15:53:52Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Meh. Nothin special.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/awdng"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/618852?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927695" class="comment js-comment js-task-list-container" data-body-version="bcace33717cfd2a6529fc80bfd84d442">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/awdng">awdng</a>
          </strong>

          commented

            <a href="#comment-927695" class="timestamp"><time datetime="2013-10-12T16:06:29Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>given the fact its 6-7 years old, its not that bad...thats one giant controller though</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/chrisabrams"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/527740?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927697" class="comment js-comment js-task-list-container" data-body-version="9b4627035a2593ea23bfc6b63ca545be">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/chrisabrams">chrisabrams</a>
          </strong>

          commented

            <a href="#comment-927697" class="timestamp"><time datetime="2013-10-12T16:25:39Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I should have saved the profile page when this happened..</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/integricho"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/1327327?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927700" class="comment js-comment js-task-list-container" data-body-version="df48fb735eec1aa48f30e0f4d4592b8f">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/integricho">integricho</a>
          </strong>

          commented

            <a href="#comment-927700" class="timestamp"><time datetime="2013-10-12T16:31:12Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I've never seen nice looking php code.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/riston"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/782237?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927708" class="comment js-comment js-task-list-container" data-body-version="135daf0992ad048996155b0bc8679cb8">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/riston">riston</a>
          </strong>

          commented

            <a href="#comment-927708" class="timestamp"><time datetime="2013-10-12T16:52:58Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>All love php spaghetti code :)</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/piksel"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/807383?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927712" class="comment js-comment js-task-list-container" data-body-version="74b7043b9b4fd27589755eb6aaeee6c5">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/piksel">piksel</a>
          </strong>

          commented

            <a href="#comment-927712" class="timestamp"><time datetime="2013-10-12T16:59:42Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@alexreidy, yes, and syntax errors is an important part of return statements.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Syerram"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/1010698?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927717" class="comment js-comment js-task-list-container" data-body-version="4d09a5058eaf77a22ef0e6d9a493fd02">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Syerram">Syerram</a>
          </strong>

          commented

            <a href="#comment-927717" class="timestamp"><time datetime="2013-10-12T17:17:36Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@kdauzickas the concern is maintainability not performance. Its apples and oranges. I could cache the shit outta hit, which I presume they did, and get good performance without hitting any DB. But it doesn't mean the code should be written in one giant controller. </p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/joakimberg"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/355274?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927718" class="comment js-comment js-task-list-container" data-body-version="a9925a8e02968680461cc39651bb3a5d">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/joakimberg">joakimberg</a>
          </strong>

          commented

            <a href="#comment-927718" class="timestamp"><time datetime="2013-10-12T17:22:50Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Hmm from what I remember, this didn't happen because Facebook was hacked, but because of sysadmins who failed to install PHP correctly and so the files were exposed as-is.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/mpoplin"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/2783101?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927720" class="comment js-comment js-task-list-container" data-body-version="27377487a9d5a31e24eeb983c78f4efb">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/mpoplin">mpoplin</a>
          </strong>

          commented

            <a href="#comment-927720" class="timestamp"><time datetime="2013-10-12T17:40:17Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I'd be interested to see how many of the armchair engineers in this thread could get a job writing code at Facebook. </p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/panique"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/156321?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927731" class="comment js-comment js-task-list-container" data-body-version="ecda69757f291b04447ac2b0358ac0e5">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/panique">panique</a>
          </strong>

          commented

            <a href="#comment-927731" class="timestamp"><time datetime="2013-10-12T18:27:06Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p><strong>Has Facebook confirmed this in any way ?</strong> Facebook was always one of the most intense and cutting-edge applications in the world, they had big influence on extremely modern PHP things (like pre-compiling etc.); they even use software and hardware that is totally experimental, so it's hard to believe that they DO NOT write extremely modern, clean and maintainable code.</p>

<p>By the way, if you want to bash, then bash WORDPRESS. It is open-source but still has horrible code, even after years. Wordpress's code does not fit ANY modern coding standards.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/jpalawaga"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/461402?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927732" class="comment js-comment js-task-list-container" data-body-version="ca530801e0df9d3f7c12d18cf3f25feb">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/jpalawaga">jpalawaga</a>
          </strong>

          commented

            <a href="#comment-927732" class="timestamp"><time datetime="2013-10-12T18:42:08Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@panique no, but this is also allegedly from 2007. </p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/akira28"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/996257?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927751" class="comment js-comment js-task-list-container" data-body-version="c3a9541c7adec23ac33ebe4a1f5d7ff0">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/akira28">akira28</a>
          </strong>

          commented

            <a href="#comment-927751" class="timestamp"><time datetime="2013-10-12T19:45:15Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>It's not odd for some php code from 2007 to be procedural and "spaghetti". Keep in mind that symfony (born in 2007) and zend framework (born in 2006) became mainstream just recently. Anyway I've seen much much worse code in companies larger than facebook in 2007</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/modsrm"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/793954?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927752" class="comment js-comment js-task-list-container" data-body-version="40893dbf486b77fbb8a2b90c781eec18">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/modsrm">modsrm</a>
          </strong>

          commented

            <a href="#comment-927752" class="timestamp"><time datetime="2013-10-12T19:46:44Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Always interesting to have a peak at what something worth billions look like...<br>
Not sure why there is a lot of harsh comments here...Someone's even feeling sorry about facebook's engineers...Sorry about what, the millions who wrote this code now has in his bank account?</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/monokrome"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/242997?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927754" class="comment js-comment js-task-list-container" data-body-version="0f90a9a4e57a4d7da4c0bc7d6742b596">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/monokrome">monokrome</a>
          </strong>

          commented

            <a href="#comment-927754" class="timestamp"><time datetime="2013-10-12T19:54:18Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@modsrm You must be confused. Let me help: Some people actually care about code as opposed to only the money that producing it provides.</p>

<p>I hope that is understandable.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/bsandrow"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/72231?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927769" class="comment js-comment js-task-list-container" data-body-version="ac01f1c57461433982963d5192060971">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/bsandrow">bsandrow</a>
          </strong>

          commented

            <a href="#comment-927769" class="timestamp"><time datetime="2013-10-12T21:04:10Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@modsrm Are you under the impression that <em>every</em> Facebook engineer that ever has/had to deal with this code is a millionaire? This seems like a false premise.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/chrisahhh"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/3271823?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927782" class="comment js-comment js-task-list-container" data-body-version="b6c7afb865ee4da7840ccb91f859ffe4">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/chrisahhh">chrisahhh</a>
          </strong>

          commented

            <a href="#comment-927782" class="timestamp"><time datetime="2013-10-12T22:28:14Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>If this is written in 2007 it probably wasn't written with the current size of facebook in mind. No doubt this is long outdated and it isn't that horrible either</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Link-"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/568794?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927789" class="comment js-comment js-task-list-container" data-body-version="093709f1f842e62248ff7debb35182d1">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Link-">Link-</a>
          </strong>

          commented

            <a href="#comment-927789" class="timestamp"><time datetime="2013-10-12T23:02:25Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>It's actually cleaner than I expected!</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/georg78sf"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/1332187?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927791" class="comment js-comment js-task-list-container" data-body-version="999743492177996a568252c476446e50">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/georg78sf">georg78sf</a>
          </strong>

          commented

            <a href="#comment-927791" class="timestamp"><time datetime="2013-10-12T23:20:30Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>this is not bad code</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/nikcub"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/441766?s=140" width="48" height="48"></a>
  <div class="timeline-comment owner-comment">
    <div id="comment-927794" class="comment js-comment js-task-list-container" data-body-version="cd280554b6aec2f38aca3238b7b427e7">
      <div class="timeline-comment-header">

          <span class="timeline-comment-label">Owner</span>


        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/nikcub">nikcub</a>
          </strong>

          commented

            <a href="#comment-927794" class="timestamp"><time datetime="2013-10-12T23:34:32Z" is="relative-time">October 12, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@panique yes they confirmed it to me at the time that a server was misconfigured and the two files were real.</p>

<p>for a good few years you could access the entire facebook source just by iterating .svn directories, since they were exposed (svn checkout vs svn export) </p>

<p>and I actually don't think the code is that bad, considering when it is from and that almost everybody at Facebook in those days learned PHP on the job (they didn't hire PHP developers, they hired compsci and other smart people - Dustin Moskovitz was an econ grad who learned PHP on the job).</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/joshribakoff"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/4021306?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927798" class="comment js-comment js-task-list-container" data-body-version="235a74be7a7501bff94d25ae145c86de">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/joshribakoff">joshribakoff</a>
          </strong>

          commented

            <a href="#comment-927798" class="timestamp"><time datetime="2013-10-13T00:15:39Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Horrible code. PHP not having objects is an excuse? Nope. They still could have used functions, instead of declaring variables in the global scope. This gives PHP a bad name. There is in fact good PHP code out there</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/zhyq0826"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/1224344?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927813" class="comment js-comment js-task-list-container" data-body-version="814c4c7965e0f9a7b8ce86933f85f002">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/zhyq0826">zhyq0826</a>
          </strong>

          commented

            <a href="#comment-927813" class="timestamp"><time datetime="2013-10-13T01:58:51Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>哈哈，看这些人吐槽真逗</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/xingrz"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/288288?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927814" class="comment js-comment js-task-list-container" data-body-version="c255d8e6309aab8b6f63efee574c41eb">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/xingrz">xingrz</a>
          </strong>

          commented

            <a href="#comment-927814" class="timestamp"><time datetime="2013-10-13T02:08:30Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>亮瞎我的狗眼。。。</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/wjason"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/3262360?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927816" class="comment js-comment js-task-list-container" data-body-version="7da2fc8666c02538be2591753e91dab3">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/wjason">wjason</a>
          </strong>

          commented

            <a href="#comment-927816" class="timestamp"><time datetime="2013-10-13T02:21:58Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>被亮瞎了</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/YouCanCc"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/3078413?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927817" class="comment js-comment js-task-list-container" data-body-version="a6fd61b5f72532ec44191f97f9258b33">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/YouCanCc">YouCanCc</a>
          </strong>

          commented

            <a href="#comment-927817" class="timestamp"><time datetime="2013-10-13T02:29:58Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>oh,搜刮....</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/autodidacticon"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/1553014?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927821" class="comment js-comment js-task-list-container" data-body-version="65d9b2529894dc175caf2b90e8a5b25c">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/autodidacticon">autodidacticon</a>
          </strong>

          commented

            <a href="#comment-927821" class="timestamp"><time datetime="2013-10-13T03:43:35Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I certainly wouldn't want to write unit tests for this.</p>

<p>This code should inspire anyone who is alone with an idea; <strong><em>code it and just make it work</em></strong>. Maintainability can be addressed after you've scaled up your team.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/mpoplin"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/2783101?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927824" class="comment js-comment js-task-list-container" data-body-version="5ac85672827b3cae01a29357f77e69ad">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/mpoplin">mpoplin</a>
          </strong>

          commented

            <a href="#comment-927824" class="timestamp"><time datetime="2013-10-13T03:57:14Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@bsandrow </p>

<p>I would imagine most engineers in 2007 had stock in the company and are indeed millionaires thanks to the IPO.</p>

<p>Anyways, PHP as we all know and love didn't really come to any form of maturation until 2009 when version 5.3 was released and thanks largely to namespaces, type hinting/casting and mediocre support for some functional programming techniques, we're now able to replicate workflows similar to that of Java or .NET without too much hassle (re: Symfony2). Before that though, a typical front controller for any high-volume site running PHP probably looked very similar to this one so keep that in mind before dragging out your college CS books to comb the code for "underengineering". You're smart and innovative too, congrats! Isn't your golden ticket to economic affluence enough for your ego yet or must you belittle people that are likely more successful than you could hope to be?</p>

<p>Moving away from procedural logic and primitive objects over to a full framework is/was obviously the right direction for web applications but I think it tends to be abused a good bit and applied to situations that could get away with far less complexity.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/mpoplin"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/2783101?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927827" class="comment js-comment js-task-list-container" data-body-version="92127e7eab4f40b64fa2b24d95555b0a">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/mpoplin">mpoplin</a>
          </strong>

          commented

            <a href="#comment-927827" class="timestamp"><time datetime="2013-10-13T04:05:23Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>@autodidacticon</p>

<p>Me neither! With the tools available to PHP developers in 2007, writing unit tests would be quite tedious. For reasons that I'm uncertain of (not claiming they aren't public knowledge), Facebook went with PHP at a time when there certainly seemed to be better choices. In fact, I wouldn't be surprised if their adoption of the language helped shape it to become what it is today on more than just a philosophic level... money, bugfixes, heavy testing.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/darasion"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/234933?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927829" class="comment js-comment js-task-list-container" data-body-version="97b106bc0a1e3298aa0ec45bfd5d15fd">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/darasion">darasion</a>
          </strong>

          commented

            <a href="#comment-927829" class="timestamp"><time datetime="2013-10-13T04:13:16Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>居然有人说代码糟糕，你们见过真正糟糕的代码么？</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/bredfern"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/512314?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927848" class="comment js-comment js-task-list-container" data-body-version="cd3f6fd474e1729e51f99c6c1c03d7c5">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/bredfern">bredfern</a>
          </strong>

          commented

            <a href="#comment-927848" class="timestamp"><time datetime="2013-10-13T06:43:51Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Now you know why MVC frameworks took off in popularity, this is similar to working with the media wiki codebase, that's a typical "bootstrap" pattern used in PHP. Now that we have nodejs running rings around php/apache/mysql this code seems very quaint lol.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/ah26"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/3442245?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927849" class="comment js-comment js-task-list-container" data-body-version="73da954c683bf404951d8043b9e3eaf9">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/ah26">ah26</a>
          </strong>

          commented

            <a href="#comment-927849" class="timestamp"><time datetime="2013-10-13T06:44:19Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>You guys are clueless if you think this code isn't clean. Don't hate on php. It works. When developing, you go with what you know, build, ship. Love how github users are telling FB how to write code. Too funny. </p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/idning"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/1301031?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927870" class="comment js-comment js-task-list-container" data-body-version="5aa0f6c69467af410706fc1b27850f1c">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/idning">idning</a>
          </strong>

          commented

            <a href="#comment-927870" class="timestamp"><time datetime="2013-10-13T08:33:29Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>木有面向对象 啊</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/lukaseder"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/734593?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927901" class="comment js-comment js-task-list-container" data-body-version="b8a2e1ee398a453061da5423cffb7b8b">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/lukaseder">lukaseder</a>
          </strong>

          commented

            <a href="#comment-927901" class="timestamp"><time datetime="2013-10-13T10:29:10Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Well, this seems quite alright compared to what stubbornella claims to have fixed in Facebook's early CSS code. Talk about 500 shades / distinct hexcodes of Facebook blue!</p>

<p><a href="http://www.stubbornella.org/content/2010/07/01/top-5-mistakes-of-massive-css/" rel="noreferrer">http://www.stubbornella.org/content/2010/07/01/top-5-mistakes-of-massive-css/</a></p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/eriksank"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/528489?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927902" class="comment js-comment js-task-list-container" data-body-version="604345cbe8c7c9b128b732d2af4667fc">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/eriksank">eriksank</a>
          </strong>

          commented

            <a href="#comment-927902" class="timestamp"><time datetime="2013-10-13T10:33:41Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>This code definitely looks easy enough to debug with a few echo and die() statements here and there. Furthermore, their approach also looks consistent all across. (Inherited) code is not bad just because it is not buzzword-heavy, but because it would be difficult to debug and test ...</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/gamehelp16"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/1947694?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927912" class="comment js-comment js-task-list-container" data-body-version="6a8fc58188959da3cb4aa710bbd6e520">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/gamehelp16">gamehelp16</a>
          </strong>

          commented

            <a href="#comment-927912" class="timestamp"><time datetime="2013-10-13T11:03:20Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>if (is_sponsor_user()) {<br>
redirect('bizhome.php', 'www');<br>
}</p>

<p>hmmm....</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/hemanth"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/18315?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-927922" class="comment js-comment js-task-list-container" data-body-version="220953fe9f5569666e918d9cf5163778">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/hemanth">hemanth</a>
          </strong>

          commented

            <a href="#comment-927922" class="timestamp"><time datetime="2013-10-13T11:32:18Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p><strong>Roughly determine page length for ads</strong> <a href="https://gist.github.com/nikcub/3833406#file-index-php-L384" rel="noreferrer">L384</a><br>
<a href="https://camo.githubusercontent.com/3640367beb063c62160b9020dfd3e657e8502ea3/687474703a2f2f7777772e7265616374696f6e676966732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031322f31312f6361745f676574735f69742e676966" target="_blank" rel="noreferrer"><img src="https://camo.githubusercontent.com/3640367beb063c62160b9020dfd3e657e8502ea3/687474703a2f2f7777772e7265616374696f6e676966732e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031322f31312f6361745f676574735f69742e676966" alt="cry" data-canonical-src="http://www.reactiongifs.com/wp-content/uploads/2012/11/cat_gets_it.gif" style="max-width:100%;"></a></p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Deloz"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/685167?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928076" class="comment js-comment js-task-list-container" data-body-version="2f462240f56e50c2363baeb82b22bfea">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Deloz">Deloz</a>
          </strong>

          commented

            <a href="#comment-928076" class="timestamp"><time datetime="2013-10-13T14:04:49Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>not too bad.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/jkobus"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/1527096?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928274" class="comment js-comment js-task-list-container" data-body-version="de6d1eb2818d9d6174afc6fa9879153d">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/jkobus">jkobus</a>
          </strong>

          commented

            <a href="#comment-928274" class="timestamp"><time datetime="2013-10-13T17:41:54Z" is="relative-time">October 13, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>this is the worst-written and the most-worth code i've ever seen.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/gotomypc"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/988550?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928422" class="comment js-comment js-task-list-container" data-body-version="77cde26d9ca8fbd982e9834bd6647357">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/gotomypc">gotomypc</a>
          </strong>

          commented

            <a href="#comment-928422" class="timestamp"><time datetime="2013-10-14T02:04:50Z" is="relative-time">October 14, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>mvc generally, tpl_set to set variables, render_template at last.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/qinshou"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/1736244?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928473" class="comment js-comment js-task-list-container" data-body-version="7e11c585eb2dcbcf08394d90b80da1dc">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/qinshou">qinshou</a>
          </strong>

          commented

            <a href="#comment-928473" class="timestamp"><time datetime="2013-10-14T06:26:31Z" is="relative-time">October 14, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>果然是简单粗暴最有效</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Morawski"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/509497?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928493" class="comment js-comment js-task-list-container" data-body-version="655779255a702b182f4cbc3c8056d7d4">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Morawski">Morawski</a>
          </strong>

          commented

            <a href="#comment-928493" class="timestamp"><time datetime="2013-10-14T07:28:48Z" is="relative-time">October 14, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Cpt. Obvious commenting style for life</p>

<blockquote>
<p>// redirects<br>
if (is_sponsor_user()) {<br>
 redirect('bizhome.php', 'www');<br>
}</p>
</blockquote>

<p>So it redirects, you don't say</p>

<blockquote>
<p>// orientation<br>
if ($orientation) {</p>
</blockquote>

<p>Ah it concerns orientation, yup I think I follow</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/ArkeologeN"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/1951266?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928523" class="comment js-comment js-task-list-container" data-body-version="22d068d994040291583e9b1ca5d9f264">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/ArkeologeN">ArkeologeN</a>
          </strong>

          commented

            <a href="#comment-928523" class="timestamp"><time datetime="2013-10-14T09:37:47Z" is="relative-time">October 14, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>RIP PHP!</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/lightningspirit"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/1651876?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928533" class="comment js-comment js-task-list-container" data-body-version="17583fc776b6e6f4051df541d49976b7">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/lightningspirit">lightningspirit</a>
          </strong>

          commented

            <a href="#comment-928533" class="timestamp"><time datetime="2013-10-14T09:52:46Z" is="relative-time">October 14, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Unfortunately, this is very common in proprietary software...</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/nathilen"><img class="timeline-comment-avatar" src="https://avatars3.githubusercontent.com/u/2110044?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-928579" class="comment js-comment js-task-list-container" data-body-version="3da6c4ccae17a572915851cb4650ce8a">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/nathilen">nathilen</a>
          </strong>

          commented

            <a href="#comment-928579" class="timestamp"><time datetime="2013-10-14T12:19:40Z" is="relative-time">October 14, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Guessing the comments are supposed to make the code easier to follow</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/cbergau"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/2446617?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-929011" class="comment js-comment js-task-list-container" data-body-version="c05a809cc1193979a27f03db14aa14b6">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/cbergau">cbergau</a>
          </strong>

          commented

            <a href="#comment-929011" class="timestamp"><time datetime="2013-10-15T06:42:39Z" is="relative-time">October 15, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Which programmar did not start like that? Hey, at least, the variable names and method names are understandable ;D you could almost write unit tests for that code too!</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/adityamenon"><img class="timeline-comment-avatar" src="https://avatars1.githubusercontent.com/u/640815?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-933150" class="comment js-comment js-task-list-container" data-body-version="b3e60fb53d0948918d53eb27c758c3ef">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/adityamenon">adityamenon</a>
          </strong>

          commented

            <a href="#comment-933150" class="timestamp"><time datetime="2013-10-20T08:20:00Z" is="relative-time">October 20, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Considering this stuff was written by 1 guy and maybe a couple interns, giddy with excitement and under the heady rush of fast success - it's not that bad. Once they could afford people with a passion for Clean Code, I'm sure a lot of it changed. I'm pretty damn sure today they've probably got one of the best PHP frameworks they only use internally - something as clean as Laravel but having lots more power thanks to their evolved DSL.</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/philfreo"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/97612?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-941534" class="comment js-comment js-task-list-container" data-body-version="db122128372bb931f13edda34251d084">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/philfreo">philfreo</a>
          </strong>

          commented

            <a href="#comment-941534" class="timestamp"><time datetime="2013-10-31T22:04:58Z" is="relative-time">October 31, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I posted some additional source code I got from thefacebook.com in 2005: <a href="https://gist.github.com/philfreo/7257723" rel="noreferrer">https://gist.github.com/philfreo/7257723</a></p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/starsea"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/1731135?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-950642" class="comment js-comment js-task-list-container" data-body-version="f3273a7eedc0dcaff9b10cc8e0e381cd">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/starsea">starsea</a>
          </strong>

          commented

            <a href="#comment-950642" class="timestamp"><time datetime="2013-11-15T07:40:00Z" is="relative-time">November 15, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>钛合金狗眼....</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/lazyphp"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/4962281?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-951691" class="comment js-comment js-task-list-container" data-body-version="9475a32ff7f3c5da0694cff2738f9381">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/lazyphp">lazyphp</a>
          </strong>

          commented

            <a href="#comment-951691" class="timestamp"><time datetime="2013-11-17T05:16:05Z" is="relative-time">November 17, 2013</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>onlookers</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/qaisjp"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/923242?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-987869" class="comment js-comment js-task-list-container" data-body-version="498cd063dfcfc2dd6986e6cd3e8a24b0">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/qaisjp">qaisjp</a>
          </strong>

          commented

            <a href="#comment-987869" class="timestamp"><time datetime="2014-01-16T14:21:44Z" is="relative-time">January 16, 2014</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>I'm more interested in <a href="https://gist.github.com/nikcub/3833406#file-index-php-L42" rel="noreferrer">https://gist.github.com/nikcub/3833406#file-index-php-L42</a></p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/mazeltov7"><img class="timeline-comment-avatar" src="https://avatars2.githubusercontent.com/u/1737216?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-1180204" class="comment js-comment js-task-list-container" data-body-version="17da1dcbaf7e318c02a546ee87a50c56">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/mazeltov7">mazeltov7</a>
          </strong>

          commented

            <a href="#comment-1180204" class="timestamp"><time datetime="2014-02-26T05:47:21Z" is="relative-time">February 26, 2014</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>ふぉふぉふぉふぉ</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Zeokat"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/1313154?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-1182788" class="comment js-comment js-task-list-container" data-body-version="e41ce9317b50f7284e1aee52a30333cc">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Zeokat">Zeokat</a>
          </strong>

          commented

            <a href="#comment-1182788" class="timestamp"><time datetime="2014-03-01T22:07:14Z" is="relative-time">March 01, 2014</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p><a href="https://github.com/Zeokat/" rel="noreferrer">Zeokat</a> says, a piece of internet history here ;)</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

<div class="timeline-comment-wrapper js-comment-container">
  <a href="/Jahak"><img class="timeline-comment-avatar" src="https://avatars0.githubusercontent.com/u/4891608?s=140" width="48" height="48"></a>
  <div class="timeline-comment ">
    <div id="comment-1190100" class="comment js-comment js-task-list-container" data-body-version="5ff049c2e83f8e113eaf85e4985bccb0">
      <div class="timeline-comment-header">



        <div class="timeline-comment-header-text">
          <strong>
            <a class="author" href="/Jahak">Jahak</a>
          </strong>

          commented

            <a href="#comment-1190100" class="timestamp"><time datetime="2014-03-13T16:28:24Z" is="relative-time">March 13, 2014</time></a>
        </div>
      </div>

    <div class="comment-content">

      <div class="edit-comment-hide">
        <div class="comment-body markdown-body  js-comment-body">
            <p>Probably already copied code</p>
        </div>
      </div>

    </div>
  </div>
  </div>
  </div>

          </div>

          <div class="discussion-timeline-actions">
              <div class="signed-out-comment">
	<a class="button primary" href="https://github.com/signup?return_to=gist" rel="nofollow">Sign up for free</a>
	<strong>to join this conversation on GitHub</strong>.
	Already have an account?
  <a href="https://gist.github.com/login?return_to=%2Fnikcub%2F3833406" rel="nofollow">Sign in to comment</a>
</div>


          </div>
        </div><!-- /.discussion-timeline -->
      </div><!-- /.gist-content -->
    </div>
  </div>
</div><!-- /.container -->

  <div class="context-overlay"></div>
</div>

    </div>
    <div class="slow-loading-overlay"></div>
  </div>

  <div id="ajax-error-message" class="flash flash-error">
    <div class="container">
      <span class="octicon octicon-alert"></span>
      Something went wrong with that request. Please try again.
      <a href="#" class="octicon octicon-x ajax-error-dismiss"></a>
    </div>
  </div>


  <footer>
    <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="https://github.com/blog">Blog</a></li>
      <li><a href="https://github.com/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github" title="GitHub "></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2014 <span title="0.22769s from github-fe102-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy">Privacy</a></li>
        <li><a href="https://github.com/security">Security</a></li>
        <li><a href="https://github.com/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->

  </footer>

  <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
        <div class="suggester-container">
            <div class="suggester fullscreen-suggester js-navigation-container" id="fullscreen_suggester"
                data-url="/nikcub/3833406/suggestions">
            </div>
        </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>


</body>
</html>
