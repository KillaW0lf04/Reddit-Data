<html dir="ltr">

<head>
	<title>Dabeaz: Drunk Tweeting in Chicago</title>
	<style type="text/css" media="screen">
		h1 {border-bottom:dotted 1px #000000;margin-bottom:0px;}
		h2 {margin-bottom:0px;}
		h2#archives { padding-top:10px;margin-top:40px;border-top:dotted 1px #999999;}
		h3 {padding-top:30px;color:#555555;padding-bottom:0px;margin-bottom:0px;}
		body {font-family:Georgia,Serif;font-size:1em;margin:3%;padding:0px;background:#ffffff;color:#000000;}
		div.blogPost {padding-left:5%;padding-right:10%;}
		div.byline {color:#555555;}
		p#bloggerBug {padding-top:20px;}
		.blogComments {padding-top:30px;color:#555555;padding-bottom:0px;margin-bottom:0px;font-weight:bold}
		.blogComments .byline {font-size:1em;font-weight:normal;color:#555555;margin-right:10px;display:inline}
		.blogComment {font-size:1em;margin:3%;color:#000000;font-weight:normal}
        .deleted-comment {font-style:italic;color:gray;}
        #blogfeeds { }
        #postfeeds { }
    .paging-control-container {
      float: right;
      margin: 0px 6px 0px 0px;
      font-size: 80%;
    }
    .unneeded-paging-control {
      visibility: hidden;
    }
	</style>
  <script type="text/javascript">(function() { var b=window,f="chrome",g="tick",k="jstiming";(function(){function d(a){this.t={};this.tick=function(a,d,c){var e=void 0!=c?c:(new Date).getTime();this.t[a]=[e,d];if(void 0==c)try{b.console.timeStamp("CSI/"+a)}catch(h){}};this[g]("start",null,a)}var a;b.performance&&(a=b.performance.timing);var n=a?new d(a.responseStart):new d;b.jstiming={Timer:d,load:n};if(a){var c=a.navigationStart,h=a.responseStart;0<c&&h>=c&&(b[k].srt=h-c)}if(a){var e=b[k].load;0<c&&h>=c&&(e[g]("_wtsrt",void 0,c),e[g]("wtsrt_","_wtsrt",h),e[g]("tbsd_","wtsrt_"))}try{a=null,
b[f]&&b[f].csi&&(a=Math.floor(b[f].csi().pageT),e&&0<c&&(e[g]("_tbnd",void 0,b[f].csi().startE),e[g]("tbnd_","_tbnd",c))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,e&&0<c&&(e[g]("_tbnd",void 0,b.external.startE),e[g]("tbnd_","_tbnd",c))),a&&(b[k].pt=a)}catch(p){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[k].load[g]("aft")};var l=!1;function m(){l||(l=!0,b[k].load[g]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",m,!1):b.attachEvent("onscroll",m);
 })();</script><script type="text/javascript">var a="indexOf",b="&m=1",e="(^|&)m=",f="?",g="?m=1";function h(){var c=window.location.href,d=c.split(f);switch(d.length){case 1:return c+g;case 2:return 0<=d[1].search(e)?null:c+b;default:return null}}var k=navigator.userAgent;if(-1!=k[a]("Mobile")&&-1!=k[a]("WebKit")&&-1==k[a]("iPad")||-1!=k[a]("Opera Mini")||-1!=k[a]("IEMobile")){var l=h();l&&window.location.replace(l)};
</script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Blogger" />
<link rel="icon" type="image/vnd.microsoft.icon" href="http://www.blogger.com/favicon.ico"/>
<link rel="alternate" type="application/atom+xml" title="Dabeaz - Atom" href="http://dabeaz.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Dabeaz - RSS" href="http://dabeaz.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Dabeaz - Atom" href="http://www.blogger.com/feeds/36456651/posts/default" />
<link rel="alternate" type="application/atom+xml" title="Dabeaz - Atom" href="http://dabeaz.blogspot.com/feeds/1178596837625720513/comments/default" />
<link rel="stylesheet" type="text/css" href="https://www.blogger.com/static/v1/v-css/50269083-blog_controls.css"/>
<link rel="stylesheet" type="text/css" href="http://www.blogger.com/dyn-css/authorization.css?targetBlogID=36456651&zx=5d25d5cd-aa41-415f-af51-c79d6509d279"/>

<!-- --><style type="text/css">@import url(https://www.blogger.com/static/v1/v-css/navbar/3334278262-classic.css);
div.b-mobile {display:none;}
</style>

</head>

<body><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
        gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
          if (gapi.iframes && gapi.iframes.getContext) {
            gapi.iframes.getContext().openChild({
                url: 'https://www.blogger.com/navbar.g?targetBlogID\07536456651\46blogName\75Dabeaz\46publishMode\75PUBLISH_MODE_BLOGSPOT\46navbarType\75LIGHT\46layoutType\75CLASSIC\46searchRoot\75http://dabeaz.blogspot.com/search\46blogLocale\75en_US\46v\0752\46homepageUrl\75http://dabeaz.blogspot.com/\46vt\75-8150795519019506501',
                where: document.getElementById("navbar-iframe-container"),
                id: "navbar-iframe"
            });
          }
        });
      </script>

<!-- To aid with the Blogger NavBar -->
<div id="wrap4">

<!-- Header -->
<h1>Dabeaz</h1>

Dave Beazley's  mondo computer blog. [ <a href="http://www.dabeaz.com">homepage</a> | <a href="http://www.dabeaz.com/blog.html">archive</a> ]


<!-- Blog Posts -->

     
          <h3>Tuesday, January 31, 2012</h3>
     
     <a name="1178596837625720513">&nbsp;</a>
     <h2>
      Drunk Tweeting in Chicago</h2>

		<div class="blogPost">
          <div style="clear:both;"></div><p>
Lately, I've been messing around with the <a href="http://pypi.python.org/pypi/requests">requests</a> and <a href="http://pypi.python.org/pypi/regex">regex</a> libraries for Python.  They are awesome.  So, without any further explanation, I present this short script that uses both in an attempt to identify people drunk-tweeting in Chicago.  Enjoy.</p>

<blockquote>
<pre>
# drunktweet.py
'''
Print out possible drunk tweets from the city of Chicago.
'''

import regex
import requests
import json

# Terms for being "wasted"
terms = { 'drunk','wasted','buzzed','hammered','plastered' }

# A fuzzy regex for people who can't type
pat = regex.compile(r"(?:\L&lt;terms>){i,d,s,e&lt;=2}$", regex.I, terms=terms)

# Connect to the Twitter streaming API
url   = "https://stream.twitter.com/1/statuses/filter.json"
parms = {
    'locations' : "-87.94,41.644,-87.523,42.023"    # Chicago
    }
auth  = ('username','password')
r = requests.post(url, data=parms, auth=auth)

# Print possible candidates
for line in r.iter_lines():
    if line:
        tweet = json.loads(line)
        status = tweet.get('text',u'')
        words = status.split()
        if any(pat.match(word) for word in words):
           print(tweet['user']['screen_name'], status)
</pre>
</blockquote>

<p>
It's left as an exercise to reader to filter out false-positives and have the script call a cab.  By the way, you should check out some of my <a href="http://www.dabeaz.com/chicago/index.html">Python Classes in Chicago</a>.</p><div style="clear:both; padding-bottom:0.25em"></div><br />
          <div class="byline">posted by Dave Beazley&nbsp;&nbsp;# <a href="http://dabeaz.blogspot.co.uk/2012/01/drunk-tweeting-in-chicago.html" title="permanent link">5:10 AM</a> <span class="item-control blog-admin pid-42898562"><a style="border:none;" href="http://www.blogger.com/post-edit.g?blogID=36456651&postID=1178596837625720513&from=pencil" title="Edit Post"><img class="icon-action" alt="" src="http://img2.blogblog.com/img/icon18_edit_allbkg.gif" height="18" width="18"></a></span> </div>
		</div>
 
  <div class="blogComments">

	<a name="comments"></a>
			Comments:
      
			
			<div class="blogComment">
				<a name="c5962198295468185827"></a> 				too funny, <br />if i could figure out how to fork blogspot i would have added this version.<br /><br />although it would also be interesting to add a time constraint to your chicago script and grab the pycon@night for similar twitter.drunk.very <br /><br /># nerdalert.py<br />&#39;&#39;&#39;<br />Print out (very)possible tweets from this years PyCon.<br />&#39;&#39;&#39;<br /><br />import regex<br />import requests<br />import json<br /><br /># Terms for being &quot;py.clever&quot;<br />terms = { &#39;pypy&#39;,&#39;gil&#39;,&#39;damn!!!&#39;,&#39;elegant&#39;,&#39;magic&#39;,&#39;sweet&#39;,&#39;powerboard&#39;,&#39;beer?&#39;,&#39;tshirt&#39;,&#39;airplane commit&#39;,&#39;sprint&#39;,&#39;coffee&#39; }<br /><br /># A fuzzy regex for people who can&#39;t type<br />pat = regex.compile(r&quot;(?:\L){i,d,s,e&lt;=2}$&quot;, regex.I, terms=terms)<br /><br /># Connect to the Twitter streaming API<br />url   = &quot;https://stream.twitter.com/1/statuses/filter.json&quot;<br />params = {<br />    &#39;locations&#39; : &quot;-121.91,37.431,-122.018,37.301&quot;    # Santa Clara<br />    }<br />auth  = (&#39;username&#39;,&#39;password&#39;)<br />r = requests.post(url, data=params, auth=auth)<br /><br /># Print possible candidates<br />for line in r.iter_lines():<br />    if line:<br />        tweet = json.loads(line)<br />        status = tweet.get(&#39;text&#39;,u&#39;&#39;)<br />        words = status.split()<br />        if any(pat.match(word) for word in words):<br />           print(tweet[&#39;user&#39;][&#39;screen_name&#39;], status)<br />
				<div class="byline"><a href="http://dabeaz.blogspot.com/2012/01/drunk-tweeting-in-chicago.html?showComment=1328050663983#c5962198295468185827" title="permanent link">#</a> posted by <span style="line-height:16px" class="comment-icon blogger-comment-icon"><img src="http://img2.blogblog.com/img/b16-rounded.gif" alt="Blogger" style="display:inline;" /></span>&nbsp;<a href="http://www.blogger.com/profile/06152859271569858691" rel="nofollow">Cyphers</a> : 2:57 PM</div>

				<span class="item-control blog-admin pid-1476558923"><a style="border:none;" href="http://www.blogger.com/delete-comment.g?blogID=36456651&postID=5962198295468185827" title="Delete Comment" ><span class="delete-comment-icon">&nbsp;</span></a></span>
			</div>
			
      
			<a class="comment-link" href="http://www.blogger.com/comment.g?blogID=36456651&postID=1178596837625720513">Post a Comment</a>
            <p id="postfeeds">Subscribe to Post Comments [<a target="_blank" href="http://dabeaz.blogspot.com/feeds/1178596837625720513/comments/default" type="application/atom+xml">Atom</a>]</p>
	  
        <br /> <br />
        

	<br /> <br />
	<a href="http://dabeaz.blogspot.co.uk/">&lt;&lt; Home</a>
    </div>




<!-- Archive Links -->
<h2 id="archives">Archives</h2>

<p>
<a href="http://www.dabeaz.com/blog.html">Prior Posts by Topic</a>
</p>

<p>
	<a href="http://dabeaz.blogspot.co.uk/2009_08_01_archive.html">08/01/2009 - 09/01/2009</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2009_09_01_archive.html">09/01/2009 - 10/01/2009</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2009_10_01_archive.html">10/01/2009 - 11/01/2009</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2009_11_01_archive.html">11/01/2009 - 12/01/2009</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2009_12_01_archive.html">12/01/2009 - 01/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_01_01_archive.html">01/01/2010 - 02/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_02_01_archive.html">02/01/2010 - 03/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_04_01_archive.html">04/01/2010 - 05/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_05_01_archive.html">05/01/2010 - 06/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_07_01_archive.html">07/01/2010 - 08/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_08_01_archive.html">08/01/2010 - 09/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_09_01_archive.html">09/01/2010 - 10/01/2010</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2010_12_01_archive.html">12/01/2010 - 01/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_01_01_archive.html">01/01/2011 - 02/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_02_01_archive.html">02/01/2011 - 03/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_03_01_archive.html">03/01/2011 - 04/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_04_01_archive.html">04/01/2011 - 05/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_05_01_archive.html">05/01/2011 - 06/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_08_01_archive.html">08/01/2011 - 09/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_09_01_archive.html">09/01/2011 - 10/01/2011</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2011_12_01_archive.html">12/01/2011 - 01/01/2012</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2012_01_01_archive.html">01/01/2012 - 02/01/2012</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2012_02_01_archive.html">02/01/2012 - 03/01/2012</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2012_03_01_archive.html">03/01/2012 - 04/01/2012</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2012_07_01_archive.html">07/01/2012 - 08/01/2012</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2013_01_01_archive.html">01/01/2013 - 02/01/2013</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2013_03_01_archive.html">03/01/2013 - 04/01/2013</a>&nbsp;&nbsp;

	<a href="http://dabeaz.blogspot.co.uk/2014_06_01_archive.html">06/01/2014 - 07/01/2014</a>&nbsp;&nbsp;

			<script type="text/javascript" language="Javascript">if (location.href.indexOf("archive")!=-1) document.write("<strong><a href=\"http://dabeaz.blogspot.co.uk/\">Current Posts</a></strong>");</script></p>


<!-- 	In accordance to the Blogger terms of service, please leave this button somewhere on your blogger-powered page. Thanks! -->
<p id="bloggerBug"><a href="http://www.blogger.com"><img width="88" height="31" src="http://buttons.blogger.com/bloggerbutton1.gif" border="0" alt="This page is powered by Blogger. Isn't yours?" /></a></p>
<p id="blogfeeds">Subscribe to Posts [<a target="_blank" href="http://dabeaz.blogspot.com/feeds/posts/default" type="application/atom+xml">Atom</a>]</p>

</div>
<script type="text/javascript" src="https://www.blogger.com/static/v1/common/js/4174905999-csitail.js"></script>
<script type="text/javascript">BLOG_initCsi('classic_blogspot');</script></body>
</html>