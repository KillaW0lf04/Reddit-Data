




<!DOCTYPE html>
<html class="   ">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    
    <title>muellermichel/Hybrid-Fortran Â· GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <meta property="fb:app_id" content="1401488693436528"/>

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="muellermichel/Hybrid-Fortran" name="twitter:title" /><meta content="Hybrid-Fortran - Productive, Flexible and Performant GPGPU Computing for Your Physical Packages" name="twitter:description" /><meta content="https://avatars2.githubusercontent.com/u/3378634?s=400" name="twitter:image:src" />
<meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars2.githubusercontent.com/u/3378634?s=400" property="og:image" /><meta content="muellermichel/Hybrid-Fortran" property="og:title" /><meta content="https://github.com/muellermichel/Hybrid-Fortran" property="og:url" /><meta content="Hybrid-Fortran - Productive, Flexible and Performant GPGPU Computing for Your Physical Packages" property="og:description" />

    <link rel="assets" href="https://assets-cdn.github.com/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_source" data-pjax-transient />
      <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="1FDCC814:6FEB:8FA2A1:53B2AF02" name="octolytics-dimension-request_id" />
    

    
    
    <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico" />


    <meta content="authenticity_token" name="csrf-param" />
<meta content="pAoCtXeN5vHvd+uERidtZ5n0pXlilXff5BKWrPKZph+Z7JByOPtjyt824iOpG4imqgtraC3FJYJjIQvPJt9uPQ==" name="csrf-token" />

    <link href="https://assets-cdn.github.com/assets/github-e4f37cab1c29752bc6394f9e4325b746e81eb85c.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://assets-cdn.github.com/assets/github2-225e9d18e05462895d978cd03faa57f48b2c2b9a.css" media="all" rel="stylesheet" type="text/css" />
    


    <meta http-equiv="x-pjax-version" content="aef9f06dd841463bca482037d298f215">

      
  <meta name="description" content="Hybrid-Fortran - Productive, Flexible and Performant GPGPU Computing for Your Physical Packages" />


  <meta content="3378634" name="octolytics-dimension-user_id" /><meta content="muellermichel" name="octolytics-dimension-user_login" /><meta content="9001111" name="octolytics-dimension-repository_id" /><meta content="muellermichel/Hybrid-Fortran" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="9001111" name="octolytics-dimension-repository_network_root_id" /><meta content="muellermichel/Hybrid-Fortran" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/muellermichel/Hybrid-Fortran/commits/master.atom" rel="alternate" title="Recent Commits to Hybrid-Fortran:master" type="application/atom+xml" />

  </head>


  <body class="logged_out  env-production  vis-public">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      
      


      
      <div class="header header-logged-out">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions">
        <a class="button primary" href="/join">Sign up</a>
      <a class="button signin" href="/login?return_to=%2Fmuellermichel%2Fhybrid-fortran">Sign in</a>
    </div>

    <div class="command-bar js-command-bar  in-repository">

      <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
          <li class="features"><a href="/features">Features</a></li>
          <li class="enterprise"><a href="https://enterprise.github.com/">Enterprise</a></li>
          <li class="blog"><a href="/blog">Blog</a></li>
      </ul>
        <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<div class="commandbar">
  <span class="message"></span>
  <input type="text" data-hotkey="s, /" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    
      data-repo="muellermichel/Hybrid-Fortran"
      data-branch="master"
      data-sha="c1536811c5c4533adc856a3424cada345c8174c7"
  >
  <div class="display hidden"></div>
</div>

    <input type="hidden" name="nwo" value="muellermichel/Hybrid-Fortran" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target" role="button" aria-haspopup="true">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container" aria-hidden="true">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="help tooltipped tooltipped-s" aria-label="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
    </div>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">


  <li>
      <a href="/login?return_to=%2Fmuellermichel%2FHybrid-Fortran"
    class="minibutton with-count star-button tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="/muellermichel/Hybrid-Fortran/stargazers">
      12
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fmuellermichel%2FHybrid-Fortran"
        class="minibutton with-count js-toggler-target fork-button tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="/muellermichel/Hybrid-Fortran/network" class="social-count">
        0
      </a>
    </li>
</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author"><a href="/muellermichel" class="url fn" itemprop="url" rel="author"><span itemprop="title">muellermichel</span></a></span><!--
       --><span class="path-divider">/</span><!--
       --><strong><a href="/muellermichel/Hybrid-Fortran" class="js-current-repository js-repo-home-link">Hybrid-Fortran</a></strong>

          <span class="page-context-loader">
            <img alt="" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline js-new-discussion-timeline with-full-navigation ">
        <div class="repository-sidebar clearfix">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped tooltipped-w" aria-label="Code">
        <a href="/muellermichel/Hybrid-Fortran" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /muellermichel/Hybrid-Fortran">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

        <li class="tooltipped tooltipped-w" aria-label="Issues">
          <a href="/muellermichel/hybrid-fortran/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-hotkey="g i" data-selected-links="repo_issues /muellermichel/hybrid-fortran/issues">
            <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
            <span class='counter'>9</span>
            <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>        </li>

      <li class="tooltipped tooltipped-w" aria-label="Pull Requests">
        <a href="/muellermichel/hybrid-fortran/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-hotkey="g p" data-selected-links="repo_pulls /muellermichel/hybrid-fortran/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>0</span>
            <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped tooltipped-w" aria-label="Pulse">
        <a href="/muellermichel/Hybrid-Fortran/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /muellermichel/Hybrid-Fortran/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Graphs">
        <a href="/muellermichel/Hybrid-Fortran/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /muellermichel/Hybrid-Fortran/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped tooltipped-w" aria-label="Network">
        <a href="/muellermichel/Hybrid-Fortran/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /muellermichel/Hybrid-Fortran/network">
          <span class="octicon octicon-repo-forked"></span> <span class="full-word">Network</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

              <div class="only-with-full-nav">
                

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/muellermichel/Hybrid-Fortran.git" readonly="readonly">
    <span class="url-box-clippy">
    <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="https://github.com/muellermichel/Hybrid-Fortran.git" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/muellermichel/Hybrid-Fortran" readonly="readonly">
    <span class="url-box-clippy">
    <button aria-label="Copy to clipboard" class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="https://github.com/muellermichel/Hybrid-Fortran" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
    <span class="octicon octicon-question"></span>
  </a>
</p>



                <a href="/muellermichel/Hybrid-Fortran/archive/master.zip"
                   class="minibutton sidebar-button"
                   aria-label="Download muellermichel/Hybrid-Fortran as a zip file"
                   title="Download muellermichel/Hybrid-Fortran as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          

<span id="js-show-full-navigation"></span>

<div class="repository-meta js-details-container ">
    <div class="repository-description js-details-show">
      <p>Productive, Flexible and Performant GPGPU Computing for Your Physical Packages</p>
    </div>

    <div class="repository-website js-details-show">
      <p><a href="http://typhooncomputing.com" rel="nofollow">http://typhooncomputing.com</a></p>
    </div>


</div>

<div class="capped-box overall-summary ">

  <div class="stats-switcher-viewport js-stats-switcher-viewport">
    <div class="stats-switcher-wrapper">
    <ul class="numbers-summary">
      <li class="commits">
        <a data-pjax href="/muellermichel/Hybrid-Fortran/commits/master">
            <span class="num">
              <span class="octicon octicon-history"></span>
              65
            </span>
            commits
        </a>
      </li>
      <li>
        <a data-pjax href="/muellermichel/Hybrid-Fortran/branches">
          <span class="num">
            <span class="octicon octicon-git-branch"></span>
            1
          </span>
          branch
        </a>
      </li>

      <li>
        <a data-pjax href="/muellermichel/Hybrid-Fortran/releases">
          <span class="num">
            <span class="octicon octicon-tag"></span>
            3
          </span>
          releases
        </a>
      </li>

      <li>
        
          <a href="/muellermichel/Hybrid-Fortran/graphs/contributors" class="js-deferred-content" data-url="/muellermichel/Hybrid-Fortran/contributors_size">
            <span class="num">
              <span class="octicon octicon-organization"></span>
            </span>
            Fetching contributors
          </a>
      </li>
    </ul>

      <div class="repository-lang-stats">
        <ol class="repository-lang-stats-numbers">
          <li>
              <a href="/muellermichel/Hybrid-Fortran/search?l=python">
                <span class="color-block language-color" style="background-color:#3581ba;"></span>
                <span class="lang">Python</span>
                <span class="percent">63.4%</span>
              </a>
          </li>
          <li>
              <a href="/muellermichel/Hybrid-Fortran/search?l=fortran">
                <span class="color-block language-color" style="background-color:#4d41b1;"></span>
                <span class="lang">FORTRAN</span>
                <span class="percent">24.2%</span>
              </a>
          </li>
          <li>
              <a href="/muellermichel/Hybrid-Fortran/search?l=c">
                <span class="color-block language-color" style="background-color:#555;"></span>
                <span class="lang">C</span>
                <span class="percent">6.5%</span>
              </a>
          </li>
          <li>
              <a href="/muellermichel/Hybrid-Fortran/search?l=shell">
                <span class="color-block language-color" style="background-color:#5861ce;"></span>
                <span class="lang">Shell</span>
                <span class="percent">3.0%</span>
              </a>
          </li>
          <li>
              <a href="/muellermichel/Hybrid-Fortran/search?l=cuda">
                <span class="color-block language-color" style="background-color:;"></span>
                <span class="lang">Cuda</span>
                <span class="percent">2.9%</span>
              </a>
          </li>
        </ol>
      </div>
    </div>
  </div>

</div>

  <div class="tooltipped tooltipped-s" aria-label="Show language statistics">
    <a href="#"
     class="repository-lang-stats-graph js-toggle-lang-stats"
     style="background-color:">
  <span class="language-color" style="width:63.4%; background-color:#3581ba;" itemprop="keywords">Python</span><span class="language-color" style="width:24.2%; background-color:#4d41b1;" itemprop="keywords">FORTRAN</span><span class="language-color" style="width:6.5%; background-color:#555;" itemprop="keywords">C</span><span class="language-color" style="width:3.0%; background-color:#5861ce;" itemprop="keywords">Shell</span><span class="language-color" style="width:2.9%; background-color:;" itemprop="keywords">Cuda</span>
    </a>
  </div>



<div class="file-navigation in-mid-page">
  <a href="/muellermichel/Hybrid-Fortran/find/master"
        class="js-show-file-finder minibutton empty-icon tooltipped tooltipped-s right"
        data-pjax
        data-hotkey="t"
        aria-label="Quickly jump between files">
    <span class="octicon octicon-list-unordered"></span>
  </a>
    <a href="/muellermichel/Hybrid-Fortran/compare" aria-label="Compare, review, create a pull request" class="minibutton compact primary tooltipped tooltipped-s" aria-label="Compare &amp; review" data-pjax>
      <span class="octicon octicon-git-compare"></span>
    </a>

  

<div class="select-menu js-menu-container js-select-menu" >
  <span class="minibutton select-menu-button js-menu-target css-truncate" data-hotkey="w"
    data-master-branch="master"
    data-ref="master"
    title="master"
    role="button" aria-label="Switch branches or tags" tabindex="0" aria-haspopup="true">
    <span class="octicon octicon-git-branch"></span>
    <i>branch:</i>
    <span class="js-select-button css-truncate-target">master</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax aria-hidden="true">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-x js-menu-close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item selected">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/muellermichel/hybrid-fortran/tree/master"
                 data-name="master"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="master">master</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/muellermichel/Hybrid-Fortran/tree/v0.90"
                 data-name="v0.90"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="v0.90">v0.90</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/muellermichel/Hybrid-Fortran/tree/v0.85"
                 data-name="v0.85"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="v0.85">v0.85</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/muellermichel/Hybrid-Fortran/tree/v0.81"
                 data-name="v0.81"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text css-truncate-target"
                 title="v0.81">v0.81</a>
            </div> <!-- /.select-menu-item -->
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->



  <div class="breadcrumb"><span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/muellermichel/Hybrid-Fortran" data-branch="master" data-direction="back" data-pjax="true" itemscope="url"><span itemprop="title">Hybrid-Fortran</span></a></span></span><span class="separator"> / </span><form action="/login?return_to=%2Fmuellermichel%2FHybrid-Fortran" aria-label="Sign in to make or propose changes" class="js-new-blob-form tooltipped tooltipped-e new-file-link" method="post"><span aria-label="Sign in to make or propose changes" class="js-new-blob-submit octicon octicon-plus" data-test-id="create-new-git-file" role="button"></span></form></div>
</div>




  
  <div class="commit commit-tease js-details-container" >
    <p class="commit-title ">
        <a href="/muellermichel/Hybrid-Fortran/commit/22f6a0837efd4dd654352517c38b315226d79def" class="message" data-pjax="true" title="small typo.">small typo.</a>
        
    </p>
    <div class="commit-meta">
      <button aria-label="Copy SHA" class="js-zeroclipboard zeroclipboard-link" data-clipboard-text="22f6a0837efd4dd654352517c38b315226d79def" data-copied-hint="copied!" type="button"><span class="octicon octicon-clippy"></span></button>
      <a href="/muellermichel/Hybrid-Fortran/commit/22f6a0837efd4dd654352517c38b315226d79def" class="sha-block" data-pjax>latest commit <span class="sha">22f6a0837e</span></a>

      <div class="authorship">
        <img alt="Michel MÃ¼ller" class="gravatar js-avatar" data-user="3378634" height="20" src="https://avatars1.githubusercontent.com/u/3378634?s=140" width="20" />
        <span class="author-name"><a href="/muellermichel" rel="author">muellermichel</a></span>
        authored <time class="updated" datetime="2014-06-24T23:29:20+09:00" is="relative-time">June 24, 2014</time>

      </div>
    </div>
  </div>

  <div class="file-wrap">
    <table class="files" data-pjax>

      
<tbody class=""
  data-url="/muellermichel/Hybrid-Fortran/file-list/master"
  data-deferred-content-error="Failed to load latest commit information.">

    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/tree/master/doc" class="js-directory-link" id="9a09b4dfda82e3e665e31092d1c3ec8d-744524778e783fd9d0ca255c16c2dcf7ec16f304" title="doc">doc</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/b620d2a9b155bfb86affc1625d9f63f6b80bc13a" class="message" data-pjax="true" title="added ScreencastThumbnail">added ScreencastThumbnail</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2014-06-24T08:23:02Z" is="time-ago">June 24, 2014</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/tree/master/examples" class="js-directory-link" id="bfebe34154a0dfd9fc7b447fc9ed74e9-23641c83c49d688651c82bc5ff244241d1483283" title="examples">examples</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/b18c76269690c77573c5e4d6b244eb384ca8b707" class="message" data-pjax="true" title="added Dr. Hysing&#39;s poisson solver example">added Dr. Hysing's poisson solver example</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2014-06-24T07:06:17Z" is="time-ago">June 24, 2014</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/tree/master/hf_bin" class="js-directory-link" id="62047619491854ad5d98f0ca7a396145-806912038e13a118efca2481c7e114f06c1a8b58" title="hf_bin">hf_bin</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/37b11bdab6fe7b8f907215e8299b3d87675c2ebd" class="message" data-pjax="true" title="some bugfixes in the new framework integration, integration of pre and post script sources for accuracy tests">some bugfixes in the new framework integration, integration of pre anâ¦</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2014-06-12T07:11:19Z" is="time-ago">June 12, 2014</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/tree/master/hf_lib" class="js-directory-link" id="20537b7420693e1efc62624b32a0468b-68178a6973b1d9d55be76024f070dcd949b727c3" title="hf_lib">hf_lib</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/b99fcf187bfaaa3e6fc681c9c6921a7a862cc08c" class="message" data-pjax="true" title="Release version 0.85. New features: 1) Automated validation and valgrind test system. 2) Automatic packing and unpacking of real scalars into arrays for passing into kernels (circumvents a potential PGI problem with kernels that have large argument lists). Documentation updated to reflect the latest features. Also, several bugfixes in the parser. Updated copyright statements.">Release version 0.85. New features: 1) Automated validation and valgrâ¦</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2013-05-03T04:45:52Z" is="time-ago">May 03, 2013</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-directory"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/tree/master/hf_processor" class="js-directory-link" id="03357ade4982dbc5cdbf47b352e2d2a2-7d9342b4f3b0b061d71cf45ca240fb5587c582dd" title="hf_processor">hf_processor</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/4a8f9fa8fbc2e15b9b1d8dba95a7370098064244" class="message" data-pjax="true" title="updated documentation, fixed a bug in build system that would break emulated mode">updated documentation, fixed a bug in build system that would break eâ¦</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2014-06-23T10:00:07Z" is="time-ago">June 23, 2014</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/blob/master/COPYING" class="js-directory-link" id="7116ef0705885343c9e1b2171a06be0e-94a9ed024d3859793618152ea559a168bbcbb5e2" title="COPYING">COPYING</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/b9b9bdc2bf10f0fb008db2537e43935ff85323df" class="message" data-pjax="true" title="initial commit">initial commit</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2013-03-25T07:31:11Z" is="time-ago">March 25, 2013</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/blob/master/COPYING.LESSER" class="js-directory-link" id="fd723c692b15ce2fc5f6e38ea58ec075-65c5ca88a67c30becee01c5a8816d964b03862f9" title="COPYING.LESSER">COPYING.LESSER</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/b9b9bdc2bf10f0fb008db2537e43935ff85323df" class="message" data-pjax="true" title="initial commit">initial commit</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2013-03-25T07:31:11Z" is="time-ago">March 25, 2013</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/blob/master/Makefile" class="js-directory-link" id="b67911656ef5d18c4ae36cb6741b7965-532768265e3647d53c455f5a52283e67059bddd0" title="Makefile">Makefile</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/74e51b352492935eb38046b61284a01d8223a983" class="message" data-pjax="true" title="added ability to move projects out of the hybrid directory, improved example">added ability to move projects out of the hybrid directory, improved â¦</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2014-05-27T09:14:26Z" is="time-ago">May 27, 2014</time></span>
      </td>
    </tr>
    <tr>
      <td class="icon">
        <span class="octicon octicon-file-text"></span>
        <img alt="" class="spinner" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
      </td>
      <td class="content">
        <span class="css-truncate css-truncate-target"><a href="/muellermichel/Hybrid-Fortran/blob/master/README.md" class="js-directory-link" id="04c6e90faac2675aa89e2176d2eec7d8-5c5a163ad351229db661f03661f23348fb61a182" title="README.md">README.md</a></span>
      </td>
      <td class="message">
        <span class="css-truncate css-truncate-target ">
          <a href="/muellermichel/Hybrid-Fortran/commit/22f6a0837efd4dd654352517c38b315226d79def" class="message" data-pjax="true" title="small typo.">small typo.</a>
        </span>
      </td>
      <td class="age">
        <span class="css-truncate css-truncate-target"><time datetime="2014-06-24T14:29:20Z" is="time-ago">June 24, 2014</time></span>
      </td>
    </tr>
</tbody>

    </table>
  </div>


  <div id="readme" class="clearfix announce instapaper_body md">
    <span class="name">
      <span class="octicon octicon-book"></span>
      README.md
    </span>

    <article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-hybrid-fortran-v090" class="anchor" href="#hybrid-fortran-v090" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hybrid Fortran v0.90</h1>

<h4>
<a name="user-content-performance-portable-parallel-programming---target-cuda-and-openmp-in-a-unified-codebase" class="anchor" href="#performance-portable-parallel-programming---target-cuda-and-openmp-in-a-unified-codebase" aria-hidden="true"><span class="octicon octicon-link"></span></a>Performance Portable Parallel Programming - Target CUDA and OpenMP in a Unified Codebase</h4>

<p>Hybrid Fortran is ..</p>

<ul class="task-list">
<li>.. a directive based extension for the Fortran language.</li>
<li>.. a way for you to keep writing your Fortran code like you're used to - only now with GPGPU support.</li>
<li>.. a preprocessor for your code - its input are Fortran files (with Hybrid Fortran extensions), its output is CUDA Fortran or OpenMP Fortran code (or whatever else you'd like to have as a backend).</li>
<li>.. a build system that handles building two separate versions (CPU / GPU) of your codebase automatically, including all the preprocessing.</li>
<li>.. a test system that handles verification of your outputs automatically after setup.</li>
<li>.. a framework for you to build your own parallel code implementations (OpenCL, ARM, FPGA, Hamster Wheel.. as long as it has some parallel Fortran support you're good) while keeping the same source files.</li>
</ul><p><a href="http://www.youtube.com/watch?v=3Of4kFQQRi4"><img src="/muellermichel/Hybrid-Fortran/raw/master/doc/ScreencastThumbnail.png" alt="Screencast: Writing a Unified Stencil Code" style="max-width:100%;"></a></p>

<p>Hybrid Fortran has been successfully used for porting the Physical Core of Japan's national next generation weather prediction model to GPGPU. We're currently planning to port the internationally used Open Source weather model WRF to Hybrid Fortran as well.</p>

<p>Hybrid Fortran has been developed since 2012 by Michel MÃ¼ller, MSc ETH Zurich, as a guest at Prof. Aoki's Gordon Bell award winning <a href="http://www.sim.gsic.titech.ac.jp/index-e.html">laboratory</a> at the Tokyo Institute of Technology, as well as during a temporary stay with Prof. Maruyama at the <a href="http://www.aics.riken.jp/en/">RIKEN Advanced Institute for Computational Science</a> in Kobe, Japan.</p>

<h2>
<a name="user-content-table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of Contents</h2>

<ul class="task-list">
<li><a href="#version-history">Version History</a></li>
<li><a href="#why-hybrid-fortran">Why Hybrid Fortran?</a></li>
<li><a href="#license">License</a></li>
<li><a href="#example">Example</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#current-restrictions">Current Restrictions</a></li>
<li><a href="#commercial-support-and-consulting">Commercial Support and Consulting</a></li>
<li><a href="#documentation-and-results">Documentation and Results</a></li>
<li><a href="#credits">Credits</a></li>
<li><a href="#contact-information">Contact Information</a></li>
</ul><h2>
<a name="user-content-version-history" class="anchor" href="#version-history" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version History</h2>

<table>
<tr>
<th>Version</th>
        <th>Release Date</th>
        <th>Comment</th>
    </tr>
<tr>
<td>v0.90</td>
        <td>2013-6-24</td>
        <td>Hybrid Fortran is now compatible and tested with arbitrary Stencil computations. The test system is now compatible with NetCDF files. The build system now allows additional framework directories to be copied in and your own Makefiles to be called after the hybrid sources have been compiled. 'appliesTo' attribute is now optional for parallel regions that encompass all architectures. New example case 'Diffusion3D'.Documentation updated. Bugfixes in the Parser.</td>
    </tr>
<tr>
<td>v0.85</td>
        <td>2013-5-3</td>
        <td>New features: 1) Automated validation and valgrind test system. 2) Automatic packing and unpacking of real scalars into arrays for passing into kernels (circumvents a potential PGI problem with kernels that have large argument lists). Documentation updated to reflect the latest features. Also, several bugfixes in the parser.</td>
    </tr>
<tr>
<td>v0.81</td>
        <td>2013-4-2</td>
        <td>First release of full Hybrid Fortran documentation. Added test scripts. Improvements in the build system for building multiple executables.</td>
    </tr>
<tr>
<td>v0.8</td>
        <td>2013-3-24</td>
        <td>First public release. Intended for physical packages with data dependencies orthogonal to parallelized data dimensions (i.e. no halo regions).</td>
    </tr>
</table><h2>
<a name="user-content-why-hybrid-fortran" class="anchor" href="#why-hybrid-fortran" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why Hybrid Fortran?</h2>

<p>Experiences with <a href="http://www.openacc-standard.org/">OpenACC</a> have shown that it is not well suited to port a so called 'physical core' as defined in [1]. The main issue is a decrease in CPU performance because of increased cache misses when using loop structures suitable for GPGPU back on the CPU. Additionally, storage order abstraction is a big missing feature in the OpenACC standard, thus creating lots of additional code when trying to keep it performant on both CPU and GPU (since these architectures often need different storage orders to be efficient). For this reason, Hybrid Fortran supports multiple loop structures (abstracted using the <code>@parallelRegion</code> directive) as well as multiple storage orders (defined once per symbol and subroutine using the <code>@domainDependant</code> directive - your computational code can be left alone). Additionally, compiler based approaches make debugging typically rather difficult. Hybrid Fortran uses a 1-to-1 mapping of your codebase to Fortran 90 code, i.e. it only inserts some code necessary to run your code on GPU and adjusts your array accesses - this enables you to debug in a familiar language and with code looking very close to what you've written yourself. Hybrid Fortran also provides very helpful debug modes that automatically insert print statements after kernels have been called, or even an emulated mode for printing within kernels. Emulated mode is also compatible with the Allinea DDT parallel debugger.</p>

<p>[1]: 'Physical core' here means code for high performance computations where the data access dependencies are orthogonal to the parallelized dimensions, resulting in 'loose loops' being optimal on the CPU - as opposed to dynamical packages with general stencil dependencies and tight loops being used on all architectures.</p>

<h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Hybrid Fortran is available under GNU Lesser Public License (LGPL).</p>

<h2>
<a name="user-content-example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>

<p>The following sample code shows a wrapper subroutine and an add subroutine. Please note that storage order inefficiencies are ignored in this example (this would create an implicit copy of the z-dimension in arrays a, b, c).</p>

<div class="highlight highlight-Fortran"><pre><span class="k">module </span><span class="nv">example</span>
<span class="k">contains</span>
<span class="k">subroutine </span><span class="nv">wrapper</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span><span class="p">)</span>
    <span class="kt">real</span><span class="p">,</span> <span class="k">intent</span><span class="p">(</span><span class="nv">in</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NX</span><span class="p">,</span> <span class="nv">NY</span><span class="p">,</span> <span class="nv">NZ</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span>
    <span class="kt">real</span><span class="p">,</span> <span class="k">intent</span><span class="p">(</span><span class="nv">out</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NX</span><span class="p">,</span> <span class="nv">NY</span><span class="p">,</span> <span class="nv">NZ</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">c</span>
    <span class="kt">integer</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">x</span><span class="p">,</span> <span class="nv">y</span>
    <span class="k">do </span><span class="nv">y</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nv">NY</span>
      <span class="k">do </span><span class="nv">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nv">NX</span>
        <span class="k">call </span><span class="nv">add</span><span class="p">(</span><span class="nv">a</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">,:),</span> <span class="nv">b</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">,:),</span> <span class="nv">c</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">,:))</span>
      <span class="k">end do</span>
<span class="k">    end do</span>
<span class="k">end subroutine</span>

<span class="k">subroutine </span><span class="nv">add</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span><span class="p">)</span>
    <span class="kt">real</span><span class="p">,</span> <span class="k">intent</span><span class="p">(</span><span class="nv">in</span><span class="p">),</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NZ</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span>
    <span class="kt">integer</span> <span class="kd">::</span> <span class="nv">z</span>
    <span class="k">do </span><span class="nv">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nv">NZ</span>
        <span class="nv">c</span><span class="p">(</span><span class="nv">z</span><span class="p">)</span> <span class="o">=</span> <span class="nv">a</span><span class="p">(</span><span class="nv">z</span><span class="p">)</span> <span class="o">+</span> <span class="nv">b</span><span class="p">(</span><span class="nv">z</span><span class="p">)</span>
    <span class="k">end do</span>
<span class="k">end subroutine</span>
<span class="k">end module </span><span class="nv">example</span>
</pre></div>

<p>Here's what this code would look like in Hybrid Fortran, parallelizing the x and y dimensions on both CPU and GPU.</p>

<div class="highlight highlight-Fortran"><pre><span class="k">module </span><span class="nv">example</span> <span class="k">contains</span>
<span class="k">subroutine </span><span class="nv">wrapper</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span><span class="p">)</span>
  <span class="kt">real</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NZ</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="nv">in</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span>
  <span class="kt">real</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NZ</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="nv">out</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">c</span>
  <span class="err">@</span><span class="nv">domainDependant</span><span class="err">{</span><span class="nv">domName</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">),</span> <span class="nv">domSize</span><span class="p">(</span><span class="nv">NX</span><span class="p">,</span><span class="nv">NY</span><span class="p">),</span> <span class="nv">attribute</span><span class="p">(</span><span class="nv">autoDom</span><span class="p">)</span><span class="err">}</span>
  <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span>
  <span class="err">@</span><span class="k">end </span><span class="nv">domainDependant</span>
  <span class="err">@</span><span class="nv">parallelRegion</span><span class="err">{</span><span class="nv">appliesTo</span><span class="p">(</span><span class="nv">CPU</span><span class="p">),</span> <span class="nv">domName</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">),</span> <span class="nv">domSize</span><span class="p">(</span><span class="nv">NX</span><span class="p">,</span> <span class="nv">NY</span><span class="p">)</span><span class="err">}</span>
  <span class="k">call </span><span class="nv">add</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span><span class="p">)</span>
  <span class="err">@</span><span class="k">end </span><span class="nv">parallelRegion</span>
<span class="k">end subroutine</span>

<span class="k">subroutine </span><span class="nv">add</span><span class="p">(</span><span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span><span class="p">)</span>
  <span class="kt">real</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NZ</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="nv">in</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span>
  <span class="kt">real</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">NZ</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="nv">out</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">c</span>
  <span class="kt">integer</span> <span class="kd">::</span> <span class="nv">z</span>
  <span class="err">@</span><span class="nv">domainDependant</span><span class="err">{</span><span class="nv">domName</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">),</span> <span class="nv">domSize</span><span class="p">(</span><span class="nv">NX</span><span class="p">,</span><span class="nv">NY</span><span class="p">),</span> <span class="nv">attribute</span><span class="p">(</span><span class="nv">autoDom</span><span class="p">)</span><span class="err">}</span>
  <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">,</span> <span class="nv">c</span>
  <span class="err">@</span><span class="k">end </span><span class="nv">domainDependant</span>
  <span class="err">@</span><span class="nv">parallelRegion</span><span class="err">{</span><span class="nv">appliesTo</span><span class="p">(</span><span class="nv">GPU</span><span class="p">),</span> <span class="nv">domName</span><span class="p">(</span><span class="nv">x</span><span class="p">,</span><span class="nv">y</span><span class="p">),</span> <span class="nv">domSize</span><span class="p">(</span><span class="nv">NX</span><span class="p">,</span> <span class="nv">NY</span><span class="p">)</span><span class="err">}</span>
  <span class="k">do </span><span class="nv">z</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nv">NZ</span>
      <span class="nv">c</span><span class="p">(</span><span class="nv">z</span><span class="p">)</span> <span class="o">=</span> <span class="nv">a</span><span class="p">(</span><span class="nv">z</span><span class="p">)</span> <span class="o">+</span> <span class="nv">b</span><span class="p">(</span><span class="nv">z</span><span class="p">)</span>
  <span class="k">end do</span>
  <span class="err">@</span><span class="k">end </span><span class="nv">parallelRegion</span>
<span class="k">end subroutine</span>
<span class="k">end module </span><span class="nv">example</span>
</pre></div>

<p>Please note the following:</p>

<ul class="task-list">
<li><p>The x and y dimensions have been abstracted away, even in the wrapper. We don't need to privatize the add subroutine in x and y as we would need to in CUDA or OpenACC. The actual computational code in the add subroutine has been left untouched.</p></li>
<li><p>We now have two parallelizations: For the CPU the program is parallelized at the wrapper level using OpenMP. For GPU the program is parallelized using CUDA Fortran at the callgraph leaf level. In between the two can be an arbitrarily deep callgraph, containing arbitrarily many parallel regions (with some restrictions, see below). The data copying from and to the device as well as the privatization in 3D is all handled by the Hybrid Fortran preprocessor framework.</p></li>
</ul><h2>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul class="task-list">
<li><p>Separate parallel regions for CPU and GPU at multiple points in the callgraph (if needed). This allows high performance for both CPU and GPU implementations.</p></li>
<li><p>Compile-time defined storage order with different orders for CPU and GPU - all defined in one handy place, the storage_order F90 file. Multiple storage orders are supported through attributes in the Hybrid Fortran directives.</p></li>
<li><p>Automatic compile time array reformatting - Hybrid Fortran reformats your data with respect to privatization and storage order at compile time. This means you can leave existing Fortran code as is, only the setup using the two Hybrid Fortran directives is needed.</p></li>
<li><p>Temporary automatic arrays, module scalars and imported scalars within GPU kernels (aka subroutines containing a GPU <code>@parallelRegion</code>) - this functionality is provided in addition to CUDA Fortran's device syntax features.</p></li>
<li><p>Seperate build directories for the automatically created CPU and GPU codes, showing you the created F90 files. Get a clear view of what happens in the back end without cluttering up your source directories.</p></li>
<li><p>Use any x86 Fortran compiler for the CPU code (PGI and Intel Fortran have been tested).</p></li>
<li><p>Highly human readable intermediate F90 source files. The callgraph, including subroutine names, remains the same as in the user code you specify. The code in the intermediate source files is auto indented for additional reading comfort.</p></li>
<li><p>All the flexibility you need in order to get the full performance out of your GPUs. Hybrid Fortran both gives you more time to concentrate on the relevant kernels and makes it easy to reason about performance improvements.</p></li>
<li><p>Macro support for your codebase - a separate preprocessor stage is applied even before the hybrid fortran preprocessor comes in, in order to facilitate the DRY principle.</p></li>
<li><p>Automatic creation of your callgraph as a graphviz image, facilitating your code reasoning. Simply type <code>make graphs</code> in the command line in your project directory.</p></li>
<li><p>Automatic testing together with your builds - after an initial setup you can run validation tests as well as valgrind automatically after every build (or by running <code>make tests</code>). Wouldn't <em>you</em> like the compiler to tell you that there is a calculation error in array X at point i=10,j=5,k=3? That's what Hybrid Fortran does for you.</p></li>
<li><p>Automatic 'printf' based device debugging mode. Prints all input arrays, output arrays and temporary arrays at the end of each kernel run at a compile-time specified point in a nicely readable format. This output can then be manually validated against the CPU version (which should already produce correct results at that point). Please note: Since PGI's CUDA Fortran does not yet support real device debugging, Hybrid Fortran cannot support that either at this point. However, since the code runs on CPU as well, the class of bugs that are affected by this restriction is rather small (since computational code can be validated on the CPU first) and the current debug mode has been proven to be sufficient for the time being.</p></li>
<li><p>Automatic linking and installing of executables. Simply specify the executable names in the <code>MakesettingsGeneral</code> configuration file and use corresponding filenames for the main files (which can be placed anywhere in your source tree). The Hybrid Fortran build system will automatically generate the executables (each in CPU and GPU version) and install them in subdirectories of your test directory. The test directories are persistant, such that you can put your initialization files, validation scripts and performance test scripts there. All this happens simply through running <code>make; make install</code> in your project directory.</p></li>
</ul><h2>
<a name="user-content-dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul class="task-list">
<li>PGI CUDA Fortran compatible compiler, available in <a href="http://www.pgroup.com/support/download_pgi2013.php?view=current">PGI Accelerator Fortran products</a>.</li>
<li>x86 Fortran compiler (you can use PGI here as well).</li>
<li>Python v2.6 or compatible.</li>
<li>GNU Make 3.81 or compatible.</li>
<li>A POSIX compatible operating system.</li>
<li>(optional) <code>valgrind</code> if you would like to use the test system shipped with this framework (accessible through <code>make tests</code>).</li>
<li>(optional) Allinea DDT if you need parallel debugging in device emulated mode.</li>
<li>(optional) The <code>pydot</code> python package as well as the <a href="http://www.graphviz.org/Download..php">Graphviz software</a> in case you'd like to use the automatic visual representation of your callgraph.</li>
<li>(optional) NetCDF4-Python in case you'd like to use Hybrid Fortran's automated testing together with NetCDF Output.</li>
<li>(optional) numpy in case you'd like to use Hybrid Fortran's automated testing together with NetCDF Output.</li>
</ul><h2>
<a name="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<ol class="task-list">
<li>Clone this git to your computer used for development. Make sure your system meets the dependencies specified above.</li>
<li>Set the <code>HF_DIR</code> environment variable to point to your Hybrid Fortran directory.</li>
<li>
<code>cd</code> into the Hybrid Fortran directory you've now installed on your computer. It should contain this README file as well as the GPL licence texts.</li>
<li>Run <code>make example</code>. This creates a new project directory named <code>example</code>.</li>
<li>Run <code>cd example</code>.</li>
<li>Run <code>make; make install</code>. If everything worked you should now have a test subdirectory containing the example subdirectory containing two executables, one for CPU and one for GPU execution.</li>
<li>Run <code>./test/example/example_cpu; ./test/example/example_gpu</code>. This should execute and validate both versions.</li>
<li>Review the example source files located in <code>./source</code> and get a feel for the Hybrid Fortran directive syntax. Notice the storage_order.F90 file which is used as a central point for specifying the data storage orders. Please refer to the documentation for details.</li>
<li>Review the preprocessed source files located in <code>./build/cpu/source</code> and <code>./build/gpu/source</code>. Notice the OpenMP and CUDA code that has been inserted into the example codebase. These files are important for debugging as well as when you want to do manual performance optimizations (but you should usually never change anything there, since it will get overwritten with the next preprocessor run).</li>
<li>Review the config files located in <code>./config</code>. The most important file for integrating your own codebase will be <code>./config/Makefile</code>. This file specifies the dependency tree for your source files. Please note that <code>vpath</code>'s are not necessary, the Hybrid Fortran build system will find your source files automatically, as long as you use the source directory specified in <code>./config/MakesettingsGeneral</code> as the root of your sources (i.e. you may place your sources in an arbitrarily deep subdirectory structure). The <code>MakesettingsCPU</code> and <code>MakesettingsGPU</code> are used to define the compilers and compiler flags. You may use any CPU compiler, however only <code>pgf90</code> is currently supported for CUDA compilation.</li>
<li>Run <code>make clean; make DEBUG=1; make install</code> in your example project directory. This replaces the previously compiled executables with debug mode executables. The CPU version can be debugged with a compatible debugger.</li>
<li>Run <code>./test/example/example_gpu</code> and notice how this executable now prints debug information for every input and output at a specific data point after every kernel run. You can change the data point in <code>storage_order.F90</code>.</li>
<li>Rename the example project directory to your project name and start integrating your codebase. You can move it to any directory you'd like.</li>
</ol><p>Please see the documentation for more details and best practices for porting your codebase.</p>

<h2>
<a name="user-content-current-restrictions" class="anchor" href="#current-restrictions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Current Restrictions</h2>

<ul class="task-list">
<li><p>Hybrid Fortran has only been tested using Fortran 90 syntax and its GNU Make based build system only supports Fortran 90 files (f90 / F90). Since the Hybrid Fortran preprocessor only operates on subroutines (i.e. it is not affected by OOP specific syntax), this restriction can be lifted soon. Please let me know whether you would like to use Hybrid Fortran for more recent Fortran versions, such that I can prioritize these changes.</p></li>
<li>
<p>Hybrid Fortran maps your subroutines directly to CUDA Fortran subroutines, which leads to certain restrictions for subroutines calling, containing, or being called within GPU parallel regions:</p>

<ul class="task-list">
<li>Subroutines being called within GPU parallel regions must reside in the same h90/H90 file as their caller.</li>
<li>Subroutines containing or being called within GPU parallel regions must not contain <code>DATA</code>, <code>SAVE</code>, <code>RECURSIVE</code>, <code>PURE</code> or <code>ELEMENTAL</code> statements and must not be recursive.</li>
<li>Subroutines may only contain one GPU parallel region.</li>
<li>Subroutines containing or being called within GPU parallel regions may not call other subroutines containing parallel regions. This restriction, however, may soon be lifted because of recent improvements in CUDA 5.</li>
</ul>
</li>
<li><p>Arrays that are declared as domain dependant using <code>@domainDependant</code> directives must be of integer or real type (however any byte length within the Fortran specification is allowed).</p></li>
<li><p>All source files (h90, H90, f90 and F90) need to have distinctive filenames since they will be copied into flat build directories by the build system.</p></li>
<li><p><code>@domainDependant</code> directives are required for all arrays in all subroutines called within parallel regions (the preprocessor operates only on local symbol information within each subroutine).</p></li>
<li><p>Currently, only Fortran Subroutines are supported by the Hybrid Fortran preprocessor (e.g. no Functions).</p></li>
</ul><p>For more details please refer to the documentation.</p>

<h2>
<a name="user-content-commercial-support-and-consulting" class="anchor" href="#commercial-support-and-consulting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Commercial Support and Consulting</h2>

<p>Commercial support as well as Consulting is available through <a href="http://typhooncomputing.com">Typhoon Computing</a> on a per-call basis. Please contact me if you're interested in this offering.</p>

<h2>
<a name="user-content-documentation-and-results" class="anchor" href="#documentation-and-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation and Results</h2>

<p>Detailed Documentation is available <a href="https://github.com/muellermichel/Hybrid-Fortran/raw/master/doc/Documentation.pdf">here</a>.</p>

<p>The poster shown at GTC 2013 is available <a href="http://on-demand.gputechconf.com/gtc/2013/poster/pdf/P0199_MichelMueller.pdf">here</a>.</p>

<p>The slides shown in Michel's talk at GTC 2013 are available <a href="https://github.com/muellermichel/Hybrid-Fortran/raw/master/doc/Slides_GTC2013.pdf">here</a>. You can also watch the recording <a href="http://nvidia.fullviewmedia.com/gtc2013/0320-211B-S3326.html">here</a>.</p>

<p>If you'd like to get the background story (why would I do such a thing), you can read my <a href="https://github.com/muellermichel/Hybrid-Fortran/raw/master/doc/Thesis_updated_2013-3.pdf">Master Thesis from 2012 (slightly updated)</a>. I plan on doing a blog post, explaining the background story of this project soon.</p>



<h2>
<a name="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul class="task-list">
<li>'Kracken' module for parsing Fortran program arguments by John S. Urban</li>
<li>3D Diffusion example based on original code by Prof. Takayuki Aoki, Tokyo Institute of Technology</li>
<li>2D Poisson FEM Solver example by Dr. Johan Hysing, Tokyo Institute of Technology</li>
<li>Everything else in this repository by Michel MÃ¼ller, written at Tokyo Institute of Technology (Aoki Laboratory) and RIKEN Advanced Institute for Computational Science, Kobe</li>
</ul><h2>
<a name="user-content-contact-information" class="anchor" href="#contact-information" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact Information</h2>

<p>Michel MÃ¼ller is the maintainer of this project. You can reach him here:</p>

<p><a href="http://typhooncomputing.com">http://typhooncomputing.com</a> <br>
BinzmÃ¼hlestrasse 56 <br>
CH-8050 ZÃ¼rich <br>
Switzerland <br>
+41 44 586 56 27</p></article>
  </div>


        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2014 <span title="0.03774s from github-fe123-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-87e1861095e3a50a45990ef150813264dab0ab52.js" type="text/javascript"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-b51fdb562e7e2290ce4e74928029e96bacd58bcd.js" type="text/javascript"></script>
      
      
        <script async src="https://www.google-analytics.com/analytics.js"></script>
  </body>
</html>

