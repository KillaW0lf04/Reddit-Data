
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Why is Python more fun than Java? - Brizzled</title>
  <meta name="author" content="Brian Clapper">

  
  <meta name="description" content="Intro For nearly nine years, I worked almost exclusively in Java. For me,
Java was a productivity enhancer, over C and C++, and I greatly enjoyed &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://brizzled.clapper.org/blog/2008/07/28/why-is-python-more-fun-than-java">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/feed.atom" rel="alternate" title="Brizzled" type="application/atom+xml">
  <!-- RSS autodiscovery tag -->
<link rel="alternate" type="application/atom+xml" title="Atom feed for Brizzled" href="/feed.atom"/>
<!-- Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Crimson+Text:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
<link href="http://fonts.googleapis.com/css?family=Rock+Salt" rel="stylesheet" type="text/css">
<link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css">



<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
  jQuery.noConflict();
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script src="/javascripts/generate-toc.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tableofcontents.min.js" type="text/javascript"></script>
<link href="/css/jquery-ui-theme/jquery-ui-1.8.17.custom.css" media="screen" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div class="header">
    <h1 class="blog-title"><a href="/">Brizzled</a></h1>
    
      <h2 class="blog-subtitle">... wherein I bloviate discursively</h2>
    
  </div>

  <div class="print author">
    <span class="author-name">Brian Clapper</span>,
    <span class="author-email">bmc@clapper.org</span>
  </div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed.atom" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:brizzled.clapper.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a id="about-link">About</span></li>
</ul>

<div id="about-dialog" style="display: none">
<div class="about-text">
  <div style="float: right">
  <img src="/images/bmc-2011-05-09.jpg" width="90" height="105">
  </div>

  <h2>Brian Clapper</h2>

  <p>I am a professional software developer with nearly
  <a href="http://www.ardentex.com/who.html" target="ardentex">30 years' experience</a>,
  developing software in a various languages across many problem domains. I have
  been a member of the
  <a href="http://www.acm.org/" target="acm">Association for Computing Machinery</a>
  since 1983. Even after all this time, writing software is still one of my
  favorite things to do.</p>

  <p>I am President and Principal Consultant of
  <a href="http://www.ardentex.com/" target="ardentex">ArdenTex, Inc.</a>,
  the company through which I do independent software consulting.</p>
</div>

</div>

<script type="text/javascript">

jQuery(document).ready(function() {

    jQuery("#about-dialog").hide();
    jQuery("#about-dialog").dialog({
        autoOpen:    false,
        modal:       true,
        draggable:   false,
        show:        'slide',
        hide:        'slide',
        minWidth:    400,
        minHeight:   400,
        title:       "About Me",
    });

    jQuery("#about-link").click(function() {
        jQuery("#about-dialog").dialog('open');
    });
});

</script>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Why is Python more fun than Java?</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-28T00:00:00-04:00" pubdate data-updated="true">28 July, 2008</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h1>Intro</h1>

<p>For nearly nine years, I worked almost exclusively in <a href="http://java.sun.com/">Java</a>. For me,
Java was a productivity enhancer, over C and C++, and I greatly enjoyed
working in it. Lately, however, I&#8217;ve been programming in <a href="http://www.python.org/">Python</a> almost
exclusively, and I&#8217;m having so much fun with it that I have little desire
to go back to programming in Java.</p>

<p>Given that I developed code quite happily in Java for a long time,
this is an interesting, though not unprecedented, turn of events.</p>

<p>I&#8217;ve been mulling over why I find programming in Python to be so
much more fun . In this article, I am going to capture and explore
some of those thoughts.</p>

<!-- more -->


<p>But first, a few caveats and disclaimers:</p>

<ul>
<li>These comments are <em>entirely</em> subjective. I am not attempting a rational,
scientific, rigorous analysis of these two languages; nor do I claim to
be making a comprehensive comparison of Java and Python. I&#8217;m only sharing
some musings.</li>
<li>I do <em>not</em> suddenly hate Java. If you&#8217;re a Java enthusiast and this
article makes you want to yank out the <a href="http://en.wikipedia.org/wiki/Napalm">napalm</a>, realize that (a) I&#8217;m
not bashing Java, and (b) I&#8217;m wearing my <a href="http://www.catb.org/jargon/html/A/asbestos-longjohns.html">asbestos longjohns</a>. I&#8217;ve
been a Java programmer for a long time, and I bear no ill will toward a
language I happily used for many years. I&#8217;m just trying to capture why I
find Python to be more fun.</li>
<li>I am ignoring architectural reasons to favor one platform over the other.
In a real system, these considerations must be taken into account. I&#8217;m
ignoring them here because I am <em>only</em> trying to figure out why the
Python programming language seems to be more fun to program than Java
does (to me).</li>
<li>I&#8217;m not a mindless Python fanboy. I was honestly surprised by how much
fun I found Python programming to be, and I&#8217;ve been mentally exploring
<em>why</em> I find it so much fun. This article is really little more than a
brain dump of those thoughts.</li>
<li>I&#8217;m sure Your Favorite Language is every bit as much fun as Python, but
I&#8217;m not programming in Your Favorite Language right now. I&#8217;m comparing
one language I used almost exclusively for nine years with another one
I&#8217;ve delved into very deeply in this last year.</li>
</ul>


<p>Having said all that, there will still be people who bash me and this
article because (a) they think I&#8217;m disrespecting their Java, (b) they think
I&#8217;ve left out some important stuff, (c) they&#8217;re annoyed that I didn&#8217;t
consider how much fun Groovy or Erlang or Ruby or &#8230; are, (d) view me as
some sort of Java <a href="http://en.wikipedia.org/wiki/Benedict_Arnold">Benedict Arnold</a> or (e) they just don&#8217;t like what I
have to say.</p>

<p>Oh, well.</p>

<p><em>adjusts longjohns</em></p>

<p>I&#8217;ve organized this article as a set of observations, with an
explanation of my thinking immediately following each observation.</p>

<h1>Observation 1: Python is a unique mixture of readability and brevity</h1>

<p>The first reaction nearly <em>everyone</em> has about Python is, &#8220;Indentation is
part of the language&#8217;s syntax? Yuck!&#8221; That was my first reaction, too. But,
as it turns out, that feature contributes greatly to Python&#8217;s readability.
Most people indent their code <em>anyway</em>, but most languages ignore
indentation; they rely, instead, on syntax elements (curly braces, <code>do</code> and
<code>end</code> keywords, etc.) to determine where code blocks begin and end.
Python&#8217;s awareness of indentation dispenses with the need for curly braces
or <code>do</code>/<code>end</code> keywords, leading to a brevity of syntax that still retains
its readability.</p>

<p>As an example, compare the following Java code and Python code snippets,
both of which do the same job.</p>

<p>Java:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
</span><span class='line'>     <span class="o">{</span>
</span><span class='line'>         <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;\\s+&quot;</span><span class="o">))</span>
</span><span class='line'>             <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>         <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Granted, the <code>System.exit(0)</code> doesn&#8217;t really need to be there; I got in the
habit of putting it in, though, when using versions of Java that wouldn&#8217;t
exit properly without such a call. But even if you remove that line, it&#8217;s
still more verbose than the Python version:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">sys</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
</span><span class='line'>    <span class="k">print</span> <span class="n">s</span>
</span></code></pre></td></tr></table></div></figure>


<p>Yes, I could make the Java example shorter by putting the braces on the
same line as the code, as most people do, but I actually find that to be
even <em>less</em> readable. (That&#8217; a personal stylistic preference. It has little
to do with the real point of this article.)</p>

<p>The point is, Python&#8217;s syntax is brief without being overly terse.</p>

<p>But it gets even more pronounced.</p>

<h1>Observation 2: No need for set/get methods in Python</h1>

<p>Python code doesn&#8217;t typically use the <code>get</code> and <code>set</code> methods so common in
Java. Normally, when writing Java code, you carefully protect your instance
variables by making the private, so callers can only interact with them via
getter and setter methods. Why? Well, consider this scenario. Suppose you
write a class called <code>Point</code> that looks something like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Point</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">Point</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pretty soon, all over the code base, people are writing code like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">point1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(...)</span>
</span><span class='line'><span class="n">point2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(...)</span>
</span><span class='line'><span class="n">point2</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">deltaX</span>
</span><span class='line'><span class="n">point2</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="na">y</span> <span class="o">-</span> <span class="n">deltaY</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s actually quite readable, but there&#8217;s a problem: Suppose your
requirements change, and now you have to ensure that all coordinates are
positive.</p>

<p>Crap.</p>

<p>Now you realize that you <em>should</em> have written your <code>Point</code> class like
this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Point</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">Point</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getX</span><span class="o">()</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">setX</span><span class="o">(</span><span class="kt">int</span> <span class="n">newX</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">newX</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getY</span><span class="o">()</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">setY</span><span class="o">(</span><span class="kt">int</span> <span class="n">newY</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">newY</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you&#8217;d written it <em>that</em> way, people would&#8217;ve had to use it like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">point1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(...)</span>
</span><span class='line'><span class="n">point2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Point</span><span class="o">(...)</span>
</span><span class='line'><span class="n">point2</span><span class="o">.</span><span class="na">setX</span><span class="o">(</span><span class="n">point1</span><span class="o">.</span><span class="na">getX</span><span class="o">()</span> <span class="o">-</span> <span class="n">deltaX</span><span class="o">)</span>
</span><span class='line'><span class="n">point2</span><span class="o">.</span><span class="na">setY</span><span class="o">(</span><span class="n">point1</span><span class="o">.</span><span class="na">getY</span><span class="o">()</span> <span class="o">-</span> <span class="n">deltaY</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>point2.setX(point1.getX() - deltaX)</code> isn&#8217;t anywhere near as intuitive or
nice-looking as <code>point2.x = point1.x - deltaX</code>, but it&#8217;s a lot safer. And
if you&#8217;d written it that way, you would only have to go into the <code>set()</code>
methods and add your constraint checks to ensure the arguments are
positive, without having to go change a whole bunch of calling code. For
instance:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kt">int</span> <span class="nf">setX</span><span class="o">(</span><span class="kt">int</span> <span class="n">newX</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">newX</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
</span><span class='line'>        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">&quot;Negative X value.&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">newX</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, why is Python&#8217;s solution to this problem more readable? Because
Python has a neat construct called a <em>property</em>. As Python&#8217;s inventor,
Guido van Rossum, puts it:</p>

<blockquote><p>Properties are a neat way to implement attributes whose usage
resembles attribute access, but whose implementation uses method
calls. These are sometimes known as &#8220;managed attributes&#8221;.</p></blockquote>

<p>Basically, a property is a way to make a function call look like an
instance variable reference, which allows one to write code that adheres
better to the <a href="http://en.wikipedia.org/wiki/Uniform_access_principal">Uniform Access Principal</a>. Let&#8217;s take our example, above,
and do it in Python. First, the <code>Point</code> class:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</span></code></pre></td></tr></table></div></figure>


<p>(You&#8217;ll note that it&#8217;s a tad shorter than the equivalent Java class, while
being just as readable.)</p>

<p>So, as before, people start using your <code>Point</code> class:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">point1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span class='line'><span class="n">point2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</span><span class='line'><span class="n">point2</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">delta_x</span>
</span><span class='line'><span class="n">point2</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">point1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">delta_y</span>
</span></code></pre></td></tr></table></div></figure>


<p>Okay, now along comes that pesky requirement that all coordinates must be
positive. Instead of going back and changing all the callers to use new
<code>set</code> methods, you can simply wrap access to <code>x</code> and <code>y</code> in functions, as
show below.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Point</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">x</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">__y</span> <span class="o">=</span> <span class="n">y</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">getx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__x</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">setx</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newx</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">newx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="s">&#39;Negative X value&#39;</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">newx</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">x</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">getx</span><span class="p">,</span> <span class="n">setx</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&#39;X coordinate&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">gety</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__y</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">sety</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newy</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">newy</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="s">&#39;Negative Y value&#39;</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">__y</span> <span class="o">=</span> <span class="n">newy</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">y</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">gety</span><span class="p">,</span> <span class="n">sety</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&#39;Y coordinate&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, whenever someone writes <code>point.x</code>, they&#8217;re really calling
<code>point.getx()</code>. Similarly, <code>point.x = 1</code> results in a call to the
<code>point.setx()</code> method.</p>

<p>You&#8217;ve added getters and setters, but the callers of your <code>Point</code> class
still get to use the original, simpler, easier-to-read syntax for accessing
the value. You get the best of both worlds: clean and simple client access
to your <code>Point</code> class, and protection and flexibility <em>within</em> the class.</p>

<p>Again, this tends to lead to more readable code.</p>

<h1>Observation 3: Python has useful constructs Java lacks</h1>

<p>Python has some features that both make it easier to code certain common
constructs and contribute to the resulting code&#8217;s readability. Here are a
few examples.</p>

<h2>Function Objects</h2>

<p>In Python, functions are first class objects. That is, you can define a
function pretty much anywhere you want, then call it or use a reference to
it. This is beneficial in many areas, but for illustration, I&#8217;ll focus on
just two:</p>

<ul>
<li>Callbacks</li>
<li>Factory methods</li>
</ul>


<div id="callbacks"></div>


<h3>Callbacks</h3>

<p>Between interfaces and inner classes, Java can accomplish a lot of
the things people use callback functions for, but functions are
more compact, more flexible, and easier to read.</p>

<p>For example, consider a function to traverse a data structure (a
tree, for instance) to find objects that match certain criteria.
The matching function is generic: It traverses the structure and
calls a caller-supplied matching function to match two objects. It
makes sense to have the tree class supply the matching logic (which
hides the details of efficiently traversing the tree), while
allowing the caller to specify the matching function.</p>

<p>Here&#8217;s how you might implement that logic in Java, using an interface.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Matcher</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">T</span> <span class="n">o</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyTree</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c1">// details omitted</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Collection</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">matches</span><span class="o">(</span><span class="n">Matcher</span> <span class="n">matcher</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="n">Collection</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="n">element</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="na">treeElements</span><span class="o">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(</span><span class="n">matcher</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="n">element</span><span class="o">))</span>
</span><span class='line'>                <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And here&#8217;s how a caller might use it, using an anonymous inner class:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">MyTree</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">keywords</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyTree</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Code that fills the tree goes here</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Now, get all keywords starting with &#39;a&#39;. (Yeah, it&#39;s contrived...)</span>
</span><span class='line'>
</span><span class='line'><span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">matches</span> <span class="o">=</span> <span class="n">keywords</span><span class="o">.</span><span class="na">matches</span>
</span><span class='line'>    <span class="o">(</span><span class="k">new</span> <span class="n">Matcher</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span>
</span><span class='line'>     <span class="o">{</span>
</span><span class='line'>         <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span>
</span><span class='line'>         <span class="o">{</span>
</span><span class='line'>             <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;a&quot;</span><span class="o">);</span>
</span><span class='line'>         <span class="o">}</span>
</span><span class='line'>     <span class="o">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now let&#8217;s look at the same thing in Python. First the class:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MyTree</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="c"># details omitted</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">match_func</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="p">[</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tree_elements</span> <span class="k">if</span> <span class="n">match_func</span><span class="p">(</span><span class="n">element</span><span class="p">)]</span>
</span></code></pre></td></tr></table></div></figure>


<p>And now the caller:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">keywords</span> <span class="o">=</span> <span class="n">MyTree</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Code that fills the tree goes here</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Now, get all keywords starting with &#39;a&#39;.</span>
</span><span class='line'>
</span><span class='line'><span class="n">matches</span> <span class="o">=</span> <span class="n">keywords</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="k">lambda</span> <span class="n">element</span><span class="p">:</span> <span class="n">element</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>It&#8217;s also possible to use a &#8220;real&#8221; function, rather than a <code>lambda</code>:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;a&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">matches</span> <span class="o">=</span> <span class="n">keywords</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="n">match</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>In simple cases like this, however, it&#8217;s easier and more straightforward to
use a lambda.</p>

<p>Once again, the Python code is simpler and (in my opinion) easier to read
and faster to code.</p>

<h3>Factories</h3>

<p>In Java, a factory is typically a static method that is called to
produce an object. Factories are used for a variety of reasons,
including:</p>

<ul>
<li>Construction of singletons.</li>
<li>Hiding instantiation of one of several possible underlying implementations.</li>
</ul>


<p>In Java, since methods cannot occur outside of a class, you are sometimes
forced to write a class just to provide a factory function. Here&#8217;s an
example. Consider a remote procedure call (RPC) layer that has many
different RPC implements (e.g., &#8220;XML-RPC&#8221;, &#8220;JSON-RPC&#8221;, &#8220;SOAP&#8221;, etc.) Each
implementation is encoded in a concrete class, and all classes adhere to a
specific interface:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">RPC</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">callRemote</span><span class="o">(</span><span class="n">String</span> <span class="n">function</span><span class="o">,</span> <span class="n">Object</span> <span class="o">...</span> <span class="n">args</span><span class="o">);</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">XMLRPC</span> <span class="kd">implements</span> <span class="n">RPC</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">callRemote</span><span class="o">(</span><span class="n">String</span> <span class="n">function</span><span class="o">,</span> <span class="n">Object</span> <span class="o">...</span> <span class="n">args</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="c1">// ...</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">JSONRPC</span> <span class="kd">implements</span> <span class="n">RPC</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">callRemote</span><span class="o">(</span><span class="n">String</span> <span class="n">function</span><span class="o">,</span> <span class="n">Object</span> <span class="o">...</span> <span class="n">args</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="c1">// ...</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// etc.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, suppose your application is going to support a configuration option
that allows the user to specify the desired RPC mechanism using a string,
and you want to map that string to an instance of the appropriate RPC
class. The easiest solution is a factory method. But where to you put that
method? You can&#8217;t hang it off the <code>RPC</code> interface, because that&#8217;s just an
interface. You have two choices:</p>

<ol>
<li>Convert the <code>RPC</code> interface to an abstract class, and put the method
there. Doing that, of course, means that RPC subclasses can&#8217;t extend any
other abstract classes, which may cause some implementation headaches
(or might not, depending).</li>
<li>Create a special <code>RPCFactory</code> class, which is clumsy, but is probably
the safest way to go.</li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RPCFactory</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">RPC</span> <span class="nf">getRPC</span><span class="o">(</span><span class="n">String</span> <span class="n">identifier</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">identifier</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;xmlrpc&quot;</span><span class="o">))</span>
</span><span class='line'>            <span class="k">return</span> <span class="k">new</span> <span class="nf">XMLRPC</span><span class="o">()</span>
</span><span class='line'>        <span class="o">...</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>With Python, it&#8217;s easier: Simply create a factory method right in your
module. To make things even simpler, you can use a hash table to look up
the implementing classes. (You can do that with Java, too, but you end up
having to use the Reflection API, which is clumsier than in Python. (See
<em>Observation 4: Introspection is easier in Python</em>, below.)</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">RPC_CLASSES</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;xmlrpc&#39;</span>  <span class="p">:</span> <span class="n">XMLRPC</span><span class="p">,</span>
</span><span class='line'>               <span class="s">&#39;jsonrpc&#39;</span> <span class="p">:</span> <span class="n">JSONRPC</span><span class="p">,</span>
</span><span class='line'>               <span class="o">...</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">get_rpc</span><span class="p">(</span><span class="n">identifier</span><span class="p">):</span>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">RPC_CLASSES</span><span class="p">[</span><span class="n">identifier</span><span class="p">]()</span>
</span><span class='line'>    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span class='line'>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="s">&#39;&quot;</span><span class="si">%s</span><span class="s">&quot; is an unknown RPC type&#39;</span> <span class="o">%</span> <span class="n">identifier</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Closures</h2>

<p>Python doesn&#8217;t have true closures, in the Ruby or LISP sense of the term,
but it&#8217;s a heck of a lot closer than Java. While there are proposals to add
(true) closures to Java (such as <a href="http://javac.info/">this one</a>), it doesn&#8217;t have them yet,
and it may be awhile until it does.</p>

<p>The closest thing Java has to a closure is an anonymous inner class, and it
isn&#8217;t really a closure. It&#8217;s also clumsy to use and can lead to less
readable code.</p>

<p>I&#8217;m not going to go into the differences between inner classes and
closures; there are plenty of discussions on that issue already. For
further reading, here are a few pointers:</p>

<ul>
<li><a href="http://fishbowl.pastiche.org/2003/05/16/closures_and_java_a_tutorial">Closures and Java: A Tutorial</a></li>
<li><a href="http://notdennisbyrne.blogspot.com/2008/06/yet-another-reason-for-why-java-needs.html">Yet another reason for why Java needs Closures</a></li>
</ul>


<p>Since I&#8217;m mostly concerned about &#8220;fun&#8221;, readability and productivity, let&#8217;s
look at one example. Closures are useful for a <em>lot</em> of things; this is
just one simple example. I&#8217;ve adapted this scenario from <a href="http://gafter.blogspot.com/">Neal Gafter</a>&#8217;s
<a href="http://gafter.blogspot.com/2006/08/use-cases-for-closures.html">Use cases for closures</a> blog entry.</p>

<p>The situation is simple: You have to provide a function that increments a
counter for a key; the counters are stored in a hash table-like object. If
the counter for a key isn&#8217;t present, then it must be created and
initialized to 1. The wrinkle is that the hash table-like object is in a
shared resource. (Perhaps it&#8217;s a file, or perhaps it&#8217;s shared memory; that
part doesn&#8217;t matter here.) Since the table is shared, it must be locked to
prevent corruption. You have to be sure to release the lock, even if an
error occurs.</p>

<p>The standard pattern for this approach (using Python, in this case) is
something like:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_table</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">counter_table</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>            <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">value</span>
</span><span class='line'>    <span class="k">finally</span><span class="p">:</span>
</span><span class='line'>        <span class="n">lock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are two problems with that code:</p>

<ol>
<li>You end up with that locking pattern all over your code. Wouldn&#8217;t it be
nice to hide it somewhere? Wouldn&#8217;t it <em>really</em> be nice if it were part
of the lock API?</li>
<li>The lock API cannot enforce that pattern. The requirement can be
documented it, and the documentation can wag its finger (as it were) at
the programmer, saying, &#8220;Always, always, <em>always</em> make sure you release
your locks!&#8221; But it cannot <em>enforce</em> the restriction programmatically.
And if someone forgets the <code>finally</code> block, he&#8217;ll introduce a bug&#8211;one
that&#8217;s often tricky to track down.</li>
</ol>


<p>Closures solve that problem. Using closures, you can augment the locking
API (or write a local front-end function) that looks like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">with_lock</span><span class="p">(</span><span class="n">lock</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">keyword_args</span><span class="p">):</span>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">lock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
</span><span class='line'>        <span class="n">action</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">keyword_args</span><span class="p">)</span>
</span><span class='line'>    <span class="k">finally</span><span class="p">:</span>
</span><span class='line'>        <span class="n">lock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now our function becomes much simpler:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
</span><span class='line'>    <span class="n">value</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">do_incr</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
</span><span class='line'>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_table</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">counter_table</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>            <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">with_lock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">,</span> <span class="n">do_incr</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Better yet, the locking semantics are enforced in one place: the
<code>with_lock()</code> function.</p>

<p>Note that the <code>do_incr()</code> function has access to, and can change, the
parent function&#8217;s <code>value</code> object. It <em>closes over</em> any objects already in
scope when it is declared, hence the term &#8220;closure&#8221;.</p>

<p>You cannot do the same thing in Java, even with an anonymous inner
class, because any objects your inner class closes over must be
<code>final</code>.</p>

<p>Newer versions of Python make it even easier by providing a <code>with</code>
statement (available in the <code>__future__</code> module). For complete details, see
<a href="http://www.python.org/dev/peps/pep-0343/">PEP 343</a>, but here&#8217;s the general idea.</p>

<p>First, the lock API can provide a <em>context manager</em> function, like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@contextmanger</span>
</span><span class='line'><span class="k">def</span> <span class="nf">lock</span><span class="p">(</span><span class="n">the_lock</span><span class="p">):</span>
</span><span class='line'>    <span class="n">the_lock</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="k">yield</span> <span class="n">the_lock</span>
</span><span class='line'>    <span class="k">finally</span><span class="p">:</span>
</span><span class='line'>            <span class="n">the_lock</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, the calling code becomes even more straightforward:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">with_statement</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
</span><span class='line'>    <span class="k">with</span> <span class="n">lock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">):</span>
</span><span class='line'>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter_table</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
</span><span class='line'>            <span class="bp">self</span><span class="o">.</span><span class="n">counter_table</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>                <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can&#8217;t do that in Java very cleanly right now, though the various
closures proposals, targeted at Java 7, attempt to address that problem.
Neal Gafter&#8217;s <a href="http://gafter.blogspot.com/2006/08/use-cases-for-closures.html">Use cases for closures</a> goes through his favored closure
proposal in detail. Using that approach, you&#8217;d do something like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;</span><span class="n">E</span> <span class="kd">extends</span> <span class="n">Exception</span><span class="o">&gt;</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">withLock</span><span class="o">(</span><span class="n">Lock</span> <span class="n">lock</span><span class="o">,</span> <span class="kt">void</span><span class="o">()</span><span class="kd">throws</span> <span class="n">E</span> <span class="n">block</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">E</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
</span><span class='line'>    <span class="k">try</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="n">block</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">finally</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That block of code defines the method that will run my code within a lock.
The Java closure proposal also adds some syntactic sugar that says,
basically, &#8220;if the passed block argument is the last argument in the list,
it can be specified <em>outside</em> the argument list&#8217;s final parenthesis.&#8221;</p>

<p>That means you can invoke <code>withLock()</code> like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">withLock</span><span class="o">(</span><span class="n">myLock</span><span class="o">)</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c1">// code (closure) that operates within the lock</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code between the curly braces is <em>really</em> the last argument to the
<code>withLock()</code> method. And it truly <em>is</em> a closure: Unlike an anonymous inner
class, the code block has read-write access to all the identifiers in the
parent block&#8217;s scope.</p>

<p>I heard about the closures-in-Java proposals while I was still programming
Java for my previous employer. I was very excited about the idea, since it
makes a lot of programming tasks easier and safer. However, while adding
closures to Java would be a good thing, they&#8217;re still not as simple as
closures are in other languages, such as Python.</p>

<h2>Array and String Support</h2>

<p>Both Java and Python have built-in support for strings and arrays,
but Python has a lot more syntactic sugar for both, leading to
simpler and more readable code. Here are some examples:</p>

<h3>String or Array Slicing</h3>

<p>In Java, to get a &#8220;slice&#8221; out of a string, you have to use methods
on the <code>java.lang.String</code> class, like so:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;foo and bar&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="n">s1</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span>           <span class="c1">// get the word &quot;and&quot;</span>
</span><span class='line'><span class="n">last</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>  <span class="c1">// get the last character in the string</span>
</span><span class='line'><span class="n">first</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>              <span class="c1">// get the first character in the string</span>
</span></code></pre></td></tr></table></div></figure>


<p>The same operations are simpler and more readable in Python:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">s</span> <span class="o">=</span> <span class="s">&#39;foo and bar&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">s1</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>       <span class="c"># get the word &#39;and&#39;</span>
</span><span class='line'><span class="n">last</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>      <span class="c"># get the last character in the string</span>
</span><span class='line'><span class="n">first</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>      <span class="c"># get the first character in the string</span>
</span></code></pre></td></tr></table></div></figure>


<p>Further, while Java allows strings to be concatenated via the &#8220;+&#8221;
operator, that usage is discouraged for building up strings, since
it can be inefficient. So, instead of the readable:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="n">message</span> <span class="o">=</span> <span class="s">&quot;I don&#39;t recognize the command \&quot;&quot;</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="s">&quot;\&quot;. Sorry.&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>you end up writing:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">buf</span> <span class="o">=</span> <span class="n">StringBuffer</span><span class="o">()</span>
</span><span class='line'><span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;I don&#39;t recognize the command \&quot;&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
</span><span class='line'><span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;\&quot; Sorry.&quot;</span><span class="o">);</span>
</span><span class='line'><span class="n">message</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Oh, joy.</p>

<p><strong>UPDATE</strong> In the <a href="http://www.reddit.com/">reddit.com</a> <a href="http://www.reddit.com/r/programming/">Programming</a> forum, someone pointed out
that using &#8220;+&#8221; for string concatenation isn&#8217;t really encouraged in Python,
either. The author of the comment suggests one of the following, instead:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">message</span> <span class="o">=</span> <span class="s">&#39;I don</span><span class="se">\&#39;</span><span class="s">t recognize the command &quot;</span><span class="si">%s</span><span class="s">&quot;. Sorry.&#39;</span> <span class="o">%</span> <span class="n">s</span>
</span><span class='line'><span class="n">message</span> <span class="o">=</span> <span class="s">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&#39;I don</span><span class="se">\&#39;</span><span class="s">t recognize the command &quot;&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="s">&#39;&quot;. Sorry.&#39;</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>Fair enough, but my point still holds: Both of those alternatives are more
readable and shorter than the Java alternative.</p>

<p>Python also permits slicing and concatenation via &#8220;+&#8221; on arrays and tuples,
not just strings. (Think of a tuple as a read-only array.) Again, this
means you write less code to accomplish an array operation, and the code
you do write tends to be more readable.</p>

<div id="dictionary_syntax"></div>


<h2>Dictionary Syntax</h2>

<p>Python has built-in support for dictionaries (also called &#8220;associative
arrays&#8221; in some languages and &#8220;hash tables&#8221; in others). In Java, you have a
variety of <code>Map</code> implementations that provide the same capability, and
they&#8217;re quite rich. The JDK&#8217;s <code>Map</code> interface is well-defined and
sufficiently abstract. I even wrote a <a href="http://software.clapper.org/java/util/javadocs/util/api/org/clapper/util/misc/FileHashMap.html">FileHashMap</a> class that looks like
a <code>Map</code>, but keeps its values in a file rather than in memory.</p>

<p>But Java does not have built-in syntax support for maps, so dealing with
them requires more code. Consider this simple example, a symbol table of
keywords. Let&#8217;s assume the existence of a <code>Symbol</code> class that captures
information about a symbol (the line where it&#8217;s defined, its type, etc.).</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SymbolTable</span>
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Symbol</span><span class="o">&gt;</span> <span class="n">symbols</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Symbol</span><span class="o">&gt;();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ...</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Symbol</span> <span class="nf">getSymbol</span><span class="o">(</span><span class="n">String</span> <span class="n">identifier</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="c1">// Get or create the symbol</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">Symbol</span> <span class="n">sym</span> <span class="o">=</span> <span class="n">symbols</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">identifier</span><span class="o">);</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">sym</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="n">sym</span> <span class="o">=</span> <span class="n">Symbol</span><span class="o">(</span><span class="n">identifier</span><span class="o">);</span>
</span><span class='line'>            <span class="n">symbols</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">identifier</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">sym</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here&#8217;s the equivalent Python code:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">SymbolTable</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">symbols</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">get_symbol</span><span class="p">(</span><span class="n">identifier</span><span class="p">):</span>
</span><span class='line'>        <span class="k">try</span><span class="p">:</span>
</span><span class='line'>            <span class="n">sym</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
</span><span class='line'>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
</span><span class='line'>            <span class="n">sym</span> <span class="o">=</span> <span class="n">Symbol</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
</span><span class='line'>            <span class="n">symbols</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">sym</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">sym</span>
</span></code></pre></td></tr></table></div></figure>


<p>It may seem like I&#8217;m nit-picking, but the Python approach just seems
simpler and more natural. (And believe me, I&#8217;ve used my share of Java <code>Map</code>
classes over the years.)</p>

<h1>Observation 4: Introspection is easier in Python</h1>

<p>This is a big one. Both Java and Python carry object information around at
run time, and you can query that information programmatically. But it&#8217;s a
pain in the ass in Java.</p>

<p>Let&#8217;s suppose you want to write a function that&#8217;ll take <em>any</em> object that
has a method with this signature:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kt">boolean</span> <span class="nf">compare</span><span class="o">(</span><span class="n">String</span> <span class="n">s1</span><span class="o">,</span> <span class="n">String</span> <span class="n">s2</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Further, you don&#8217;t want to constrain the objects to implementing a specific
interface. (Though this situation doesn&#8217;t sound likely, and isn&#8217;t something
you&#8217;d normally want to do, it <em>does</em> come up.)</p>

<p>To do that in Java requires resorting to the <a href="http://java.sun.com/docs/books/tutorial/reflect/index.html">Reflection API</a>. Here&#8217;s the
code you have to write to verify that the object has such a method, and
then to call that method with two strings:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">java.lang.reflect.Method</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="o">...</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">callCompare</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">,</span> <span class="n">String</span> <span class="n">s1</span><span class="o">,</span> <span class="n">String</span> <span class="n">s2</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>        <span class="n">Class</span> <span class="n">cls</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">try</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="n">Method</span> <span class="n">method</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="na">getMethod</span><span class="o">(</span><span class="s">&quot;compare&quot;</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">method</span><span class="o">.</span><span class="na">invoke</span><span class="o">(</span><span class="n">o</span><span class="o">,</span> <span class="n">s1</span><span class="o">,</span> <span class="n">s2</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">catch</span> <span class="o">(</span><span class="n">NoSuchMethodException</span> <span class="n">ex</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="o">...</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalAccessException</span> <span class="n">ex</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="o">...</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">catch</span> <span class="o">(</span><span class="n">IllegalArgumentException</span> <span class="n">ex</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="o">...</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">catch</span> <span class="o">(</span><span class="n">InvocationTargetException</span> <span class="n">ex</span><span class="o">)</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="o">...</span>
</span><span class='line'>        <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>That code is ugly for a few reasons. (It used to be worse, before Java 5
introduced variable arguments.)</p>

<ul>
<li>All those exceptions either have to be caught or propagated.</li>
<li>If the method itself throws an exception, it&#8217;ll be wrapped in an
<code>InvocationTargetException</code>, and you have to unwrap it if you want to
re-throw the real exception.</li>
<li>Does the above code look like it&#8217;s calling an object&#8217;s <code>compare()</code> method
to <em>you</em>?</li>
</ul>


<p>Here&#8217;s how you do the same thing in Python:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">o</span> <span class="o">=</span> <span class="o">...</span>
</span><span class='line'><span class="n">s1</span> <span class="o">=</span> <span class="o">...</span>
</span><span class='line'><span class="n">s2</span> <span class="o">=</span> <span class="o">...</span>
</span><span class='line'>
</span><span class='line'><span class="k">try</span><span class="p">:</span>
</span><span class='line'>    <span class="n">result</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</span><span class='line'><span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
</span><span class='line'>    <span class="c"># Doesn&#39;t have that method.</span>
</span><span class='line'>    <span class="o">...</span>
</span></code></pre></td></tr></table></div></figure>


<p>In addition to being short and to-the-point, the Python code actually
<em>looks</em> like what it&#8217;s doing.</p>

<h1>Observation 5: Python has an rich library</h1>

<p>I mention this one only because Java also has a rich library. Between the
JDK and the open source Java code out there, there&#8217;s lots of help building
Java applications.</p>

<p>When I started doing a lot of Python, I found the same thing to be true, so
I didn&#8217;t lose anything there.</p>

<p>There <em>is</em> this sense, though, that a lot of things are just easier in
Python. For instance, the <a href="http://www.djangoproject.com/">Django</a> web framework makes incrementally
building an application so easy, it&#8217;s ridiculous. It&#8217;s much easier to get
started with Django than with even a <em>simple</em> Java web container like
<a href="http://tomcat.apache.org/">Tomcat</a>. (Of course, this isn&#8217;t evidence; it&#8217;s an anecdote. You&#8217;re free
to draw your own conclusions.)</p>

<h1>Observation 6: Dynamic Typing (a mixed bag)</h1>

<p>I mention <a href="http://en.wikipedia.org/wiki/Type_system#Dynamic_typing">dynamic typing</a> because so many people either tout it as the
best thing since sliced luncheon meats or decry it as an evil feature
considered as harmful as the GOTO statement. Reality, of course, is
somewhere in between&#8211;as is my experience.</p>

<p>There <em>are</em> more carefully considered opinions, of course, but they tend to
get lost in the noise. See, for instance, an excellent paper entitled
<a href="http://pico.vub.ac.be/~wdmeuter/RDL04/papers/Meijer.pdf">Static Typing Where Possible, Dynamic Typing When Needed</a> (PDF) for a
good and balanced discussion of the issue.</p>

<p>I&#8217;m not going to waste time debating which one is &#8220;better&#8221; (for some values
of &#8220;better&#8221;). There are plenty of people who do a better job of that than I
will. (Start with the paper I just mentioned, for instance.) I&#8217;m just going
to share my own experiences with the two approaches, using Java and Python
as my examples.</p>

<p>Recall that Java is statically typed, which has several advantages.</p>

<h2>Compiler-time checks</h2>

<p>First, the compiler can ensure that you don&#8217;t assign the wrong type of
object to a variable or pass the wrong type of object to a method (unless,
of course, you use type casting to thwart the compiler, but good Java
programmers try to avoid having to cast).</p>

<p>I have long been a fan of compile-time protection. The more problems the
compiler can find for you, the fewer things you have to root out at run
time. Oddly enough, though, I haven&#8217;t found the lack of compile time type
checking to be a big problem with Python so far. I suspect this is because
I&#8217;ve been writing well-encapsulated code with lots of automated unit tests.
A paper called <em>Why dynamic typing?</em> (link now dead) puts it this way:</p>

<blockquote><p>Why does dynamic typing (as done with Smalltalk) not negatively
affect the stability of large applications?</p>

<p>Because large applications written in a dynamic OO language still
have well encapsulated parts that can be verified independently,
and the total implementation can be about 1/2 to 1/3 the size of
the implementation in Java (or another static-typed language)</p>

<p>In the small you may get a type error that static-typing could have
[caught], but you also get to build a system such that you never
have to write 40-70% of the code you might otherwise have to. And a
line of code not written is a 100% guaranteed correct line of
code.</p></blockquote>

<p>It&#8217;s an interesting argument. I&#8217;m not sure I agree completely with the last
statement, but there&#8217;s merit in the observations.</p>

<p>For me, so far, the lack of compile-time type protection in Python
simply hasn&#8217;t been as big a deal as I thought it would be.</p>

<p><strong>UPDATE</strong>: Over time, it turned out to be quite a big deal, which is why
I&#8217;ve migrated to <a href="http://www.scala-lang.org/">Scala</a>; it offers a similar brevity of expression, while
being compile-time type-safe.</p>

<h2>Syntax-based introspection</h2>

<p>Another advantage of static typing is that IDEs can tell a variable&#8217;s type
no matter where it appears, which is a boon for things like
auto-completion.</p>

<p>This is where I&#8217;ve most noticed the lack of type information. Lately, I&#8217;ve
been using the excellent <a href="http://www.wingware.com/">Wing</a> IDE to develop Python. (Why I&#8217;m using
Wing instead of my old trusty friend, Emacs, is a subject for a future
article.) Unlike any Java IDE, there are cases where Wing just cannot tell
the type of a variable and, therefore, cannot help me determine what fields
and methods that variable provides. Here&#8217;s a case where it <em>can</em> tell:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">my_foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="n">my_foo</span><span class="o">.</span><span class="n">a</span>
</span><span class='line'>        <span class="o">^</span>
</span></code></pre></td></tr></table></div></figure>


<p>If I invoke auto-completion where the caret is, Wing can show me all
attributes that start with &#8220;a&#8221;, because the assignment of a <code>Foo</code> object to
<code>my_foo</code> is within scope.</p>

<p>However, here&#8217;s a case where it cannot tell:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">somefunc</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
</span><span class='line'>    <span class="n">foo</span><span class="o">.</span><span class="n">a</span>
</span><span class='line'>         <span class="o">^</span>
</span></code></pre></td></tr></table></div></figure>


<p>At runtime, the argument <code>foo</code> can be anything, so the IDE cannot tell what
fields it might have (other than, of course, the fields that all Python
objects have).</p>

<p>Sometimes, I miss the ability for the IDE (or any other tool) to be able to
introspect a variable by syntactic analysis, but it honestly hasn&#8217;t been
enough of an issue to take the fun out of Python.</p>

<h1>Observation 7: The Interactive Shell</h1>

<p>Python comes with an interactive shell, and there&#8217;s an even better one
(IPython) available for free. When I&#8217;m not sure how something works, or I
want to try something manually, or run a quick test, I can simply fire up
the Python shell and try the code, right then and there. (Ruby and other
so-called scripting languages have similar tools.)</p>

<p>It&#8217;s impossible to overstate the usefulness of a command-line interface to
the language interpreter. Nothing quite like it exists for Java. The
<a href="http://www.beanshell.org/">BeanShell</a> console comes close, but the latest version as of this
writing doesn&#8217;t fully support Java 5. (It&#8217;s missing support for generics,
for instance.)</p>

<p><a href="http://blogs.open.collab.net/oncollabnet/">Jack Repenning</a> also pointed out, in a private email, that the brevity
argument applies here, as well:</p>

<blockquote><p>Even in environments with a fairly competent Java Interactive
Shell, what you have to type in is still Java, and the extra
prolixity of Java hurts all the more when you&#8217;re just trying to
confirm the results of a function call, or the shape of an object,
or any of those other explorations the interactive shell is so good
at.</p></blockquote>

<h1>Final Comments</h1>

<p>I&#8217;m sure there are differences I&#8217;ve missed. And, as I noted above, I&#8217;m not
trying to convince anyone who uses Java that it&#8217;d be better to jump ship
and join the <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html">Pythonistas</a>.</p>

<p>I used Java for a long time, and I&#8217;m sure I&#8217;ll do more work in Java. Nor
will I complain a lot if I have to do so. Both Java and Python (as well as
Ruby and other languages) allow me to develop and test my software on any
platform, unlike (say) most <a href="http://en.wikipedia.org/wiki/C_Sharp">C#</a> work, which locks me into a platform I
don&#8217;t like all that much (Mono notwithstanding).</p>

<p>I&#8217;m just trying to figure out why Python is so damned fun.</p>

<p>Time to stop thinking for a bit and have some fun&#8230;</p>

<h1>UPDATE: 29 July, 2008</h1>

<p>I have received some emailed comments. Thanks to everyone who took
the time to send me a comment.</p>

<p>Both Dan Barbus <em>dan.barbus /at/ gmail.com</em> and Simon Lieschke <em>simon at
lieschke.net</em> pointed out an oversight. My original Python <code>matches()</code>
function (see <a href="#callbacks">Callbacks</a>, above) was written like this:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">match_func</span><span class="p">):</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tree_elements</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">match_func</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
</span><span class='line'>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">result</span>
</span></code></pre></td></tr></table></div></figure>


<p>Both Dan and Simon pointed out that the function can be reduced to
a one-liner:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">matches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">match_func</span><span class="p">):</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">[</span><span class="n">element</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__tree_elements</span> <span class="k">if</span> <span class="n">match_func</span><span class="p">(</span><span class="n">element</span><span class="p">)]</span>
</span></code></pre></td></tr></table></div></figure>


<p>One-liner list comprehensions like that are one of the things I like about
Python, and I&#8217;m not sure why I wrote the function the &#8220;long&#8221; way
originally. Chalk it up to a brain fart.</p>

<hr />

<p>Michael Easter (<em>codetojoy /at/ gmail.com</em>) noted out that, like
<a href="http://www.beanshell.org/">BeanShell</a>, <a href="http://groovy.codehaus.org/">Groovy</a> also has a shell that allows interpretative Java.
So does <a href="https://pnuts.dev.java.net/">Pnuts</a>, a very fast Java scripting language I&#8217;ve used quite
heavily in the past. These are good tools to keep in one&#8217;s Java toolbox.</p>

<hr />

<p>Fred van Dijk (<em>fredvd /at/ gmail.com</em>) pointed out a cut-and-paste typo in
one of my examples. Thanks, Fred.</p>

<hr />

<p>Florian Bosch (<em>pyalot /at/ gmail.com</em>) wrote:</p>

<blockquote><p>I&#8217;ve read your article and I think I you might find my perspective
on dynamic typing also interesting, and why it actually works, and
works very well.</p>

<p>To my shame I have to admit I&#8217;m not a big user of unit tests. I&#8217;ve
used them to great effect sometimes, and some software I wrote has
a lot of them, but generally there&#8217;s very little of it around my
code.</p>

<p>On any account, python still is making me way more productive, and
if your argument was true, that your unit tests safe you from being
harmed by dynamic typing, then I would be burned badly, but I am
not. I think I can explain that.</p>

<p>Put simply, I think typing does not essentially catch the larger
domain of logical errors that happen during programming. However,
it does introduce considerable overhead. Logically, when you take
typing constraints away, a small amount of errors that would&#8217;ve
been cought before slip by to runtime, however you get a lot less
overhead to deal with, which more then makes this up.</p>

<p>Put not so simply, Typing is a school of formalism that attempts to
describe a systems constraints in terms of types involved. That is
a special form of a constraint system, like clipse or prolog. These
systems work great for specific domains, but they&#8217;re not a great
way to do all things. Enforcing constraint oriented programming on
all parts of your code is not a very smart idea to increase
productivity, because most code actually does not benefit from that
particular flavor of constraint system.</p></blockquote>

<p>Fair enough, though there are still times where I want both (or either).
Florian followed up with:</p>

<blockquote><p>Python actually has strong types, as opposed to say PHP or Perl.
And you absolutely can write static looking code today in python,
for instance:</p>

<pre><code>@types(int, str)
def foo(arg1, arg2):
    pass
</code></pre>

<p>And annotations for python loom on the horizon, which would make it
possible to write things like this:</p>

<pre><code>@typechecked
def foo(int arg1, str arg2):
    pass
</code></pre></blockquote>

<p>I&#8217;m not sure if this is coming in Python 3000 or not. (If someone knows,
please enlighten me.) I know that there are already some packages out there
that provide similar annotations, such as:</p>

<ul>
<li>The <a href="http://oakwinter.com/code/typecheck/">typecheck</a> module provides various typechecking features,
including an <code>@accepts</code> annotation that looks a lot like the <code>@type</code>
annotation noted above.</li>
<li><a href="http://www.fightingquaker.com/pyanno/">Pyanno</a> also has some typechecking annotations.</li>
</ul>


<h1>UPDATE: 16 September, 2008</h1>

<p>JÃ©sus GÃ³mez (<em>jgomo3 /at/ gmail.com</em>) wrote:</p>

<blockquote><p>About Observation 3 and factories.</p>

<p>You could avoid the use of (and maintaining the) dict you use in
this code:</p>

<pre><code>RPC_CLASSES = {'xmlrpc'  : XMLRPC,
               'jsonrpc' : JSONRPC,
               ... }

def get_rpc(identifier):
   try:
       return RPC_CLASSES[identifier]()
   except KeyError:
       raise ValueError, '"%s" is an unknown RPC type' % identifier
</code></pre>

<p>by redefining the <code>get_rpc</code> function as:</p>

<pre><code>def get_rpc(identifier):
   try:
       return getattr(&lt;&lt;module_which_define_the_classes&gt;&gt;, identifier)()
   except KeyError:
       raise AttributeError, '"%s" is an unknown RPC type' % identifier
</code></pre>

<p>Take a look at the <a href="http://diveintopython.org/toc/index.html">Dive Into Python</a> chapter on classes for a fun way
to declare classes to act like dictionaries, useful for your
<a href="#dictionary_syntax">Dictionary Syntax</a> section.</p></blockquote>

<h1>UPDATE: 13 October, 2008</h1>

<p>Regarding my <code>get_symbol()</code> method, in the section on
<a href="#dictionary_syntax">Dictionary Syntax</a>, Kevin Samuel (<em>info.ksamuel</em> /at/ <em>googlemail.com</em>)
wrote:</p>

<blockquote><p>I&#8217;d like to share a little trick. When you say:</p>

<pre><code>class SymbolTable(object):

    symbols = {}

    def get_symbol(identifier):
        try:
            sym = symbols[identifier]
        except KeyError:
            sym = Symbol(identifier)
            symbols[identifier] = sym

        return sym
</code></pre>

<p>You could just use the built-in:</p>

<pre><code>d = {}
value = d.setdefault(identifier, default_value)
</code></pre>

<p><code>setdefault</code> is a bad name since it does return a value or the
default value (or <code>None</code> is no value is given).</p></blockquote>

<p>The <a href="http://www.python.org/doc/2.5.2/lib/typesmapping.html">Python documentation on dictionaries</a> says:</p>

<blockquote><p><em>a</em> <code>.setdefault</code> (<em>k</em>[, <em>x</em>]) returns <em>a</em>[<em>k</em>] if <em>k</em> in <em>a</em>,
else <em>x</em> (also setting it)</p></blockquote>

<p>It further elaborates:</p>

<blockquote><p><code>setdefault()</code> is like <code>get()</code>, except that if <em>k</em> is missing, <em>x</em>
is both returned and inserted into the dictionary as the value of
<em>k</em>. <em>x</em> defaults to <code>None</code>.</p></blockquote>

<p>I confess that I missed this behavior when I read the Python documentation.
Thanks, Kevin.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Brian Clapper</span></span>

      








  


<time datetime="2008-07-28T00:00:00-04:00" pubdate data-updated="true">28 July, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/tags/java/'>java</a>, <a class='category' href='/blog/tags/programming/'>programming</a>, <a class='category' href='/blog/tags/python/'>python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://brizzled.clapper.org/blog/2008/07/28/why-is-python-more-fun-than-java/" data-via="brianclapper" data-counturl="http://brizzled.clapper.org/blog/2008/07/28/why-is-python-more-fun-than-java/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2008/07/27/django-blog/" title="Previous Post: Django blog">&laquo; Django blog</a>
      
      
        <a class="basic-alignment right" href="/blog/2008/08/04/now-blogging-on-app-engine/" title="Next Post: Now blogging on App Engine">Now blogging on App Engine &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section id="about-me">
  <div class="author-image">
    <img src="/images/bmc-2011-05-09-2-cartoon.png" width="90" height="105"/>
  </div>

  <div class="author">
    <span class="author-name">Brian Clapper</span>
    <span class="author-email">bmc@clapper.org</span>
    <span class="author-twitter-id"><a href="https://twitter.com/#!/brianclapper">@brianclapper</a></span>
  </div>

</section>

<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/106515830052770191893?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/bmc">@bmc</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bmc',
            count: 10,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Brian Clapper -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'brizzled';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://brizzled.clapper.org/blog/2008/07/28/why-is-python-more-fun-than-java/';
        var disqus_url = 'http://brizzled.clapper.org/blog/2008/07/28/why-is-python-more-fun-than-java/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>






<script type="text/javascript">
jQuery(document).ready(function() {
  // Put a TOC right before the entry content.
  generateTOC('.entry-content', 'Table of Contents');
});
</script>



</body>
</html>
